!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";var r=new(n(1));r.injectStyle(),r.checkAuth()},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,a){try{var o=e[i](a),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=n(3),c=function(){function t(){i(this,t),this.localStorage=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage,this.onCooldown=!1,this.GUI=new s(this,this.localStorage)}return a(t,[{key:"injectStyle",value:function(){var t=document.createElement("style"),e=o.Style;({type:"text/css",style:t,content:e,apply:function(){this.style.type="text/css",this.style.appendChild(document.createTextNode(e)),document.head.appendChild(t)}}).apply()}},{key:"checkAuth",value:function(){var t=r(regeneratorRuntime.mark(function t(){var e,n,r,i=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localStorage.token;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.localStorage.canCallAPI){t.next=2;break}return t.abrupt("return");case 2:if("string"==typeof a){t.next=4;break}throw new Error("Not a token, buddy.");case 4:return a=a.replace(/"/gi,""),a=a.replace(/^Bot\s*/i,""),t.next=8,fetch("https://discordapp.com/api/v7/gateway");case 8:return e=t.sent,t.next=11,e.json();case 11:n=t.sent,(r=new WebSocket(n.url+"/?encoding=json&v6")).onerror=function(t){return console.error(t)},r.onmessage=function(t){try{var e=JSON.parse(t.data);i.localStorage.canCallAPI=!0,0===e.op&&"READY"===e.t&&r.close(),10===e.op&&r.send(JSON.stringify({op:2,d:{token:a,properties:{$browser:"b1nzy is a meme"},large_threshold:50}})),console.log("Sucessful authenticated. You can now make REST request!")}catch(t){console.error(t)}};case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"sendSticker",value:function(){var t=r(regeneratorRuntime.mark(function t(e,n){var r,i,a,o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.localStorage.token;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.onCooldown){t.next=2;break}return t.abrupt("return");case 2:return this.onCooldown=!0,t.next=5,fetch(e.file,{cache:"force-cache"});case 5:return r=t.sent,t.next=8,r.blob();case 8:i=t.sent,(a=new FormData).append("file",i,e.name),s=s.replace(/"/gi,""),s=s.replace(/^Bot\s*/i,""),fetch("https://discordapp.com/api/channels/"+n+"/messages",{headers:{Authorization:s},method:"POST",body:a}),setTimeout(function(){return o.onCooldown=!1},1e3);case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),t}();t.exports=c},function(t,e,n){"use strict";e.Style="\ndiv#boot-modal { display: none; }\ndiv.channel-textarea-stickers {\n\tposition: absolute;\n\ttop: 12px !important;\n\tright: 45px;\n\tbackground-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n\twidth: 22px;\n\theight: 22px;\n\tbackground-position: -176px -396px;\n\tbackground-size: 924px 704px;\n\tbackground-repeat: no-repeat;\n\ttransition: border-bottom-color .1s ease-in-out;\n\t-webkit-filter: grayscale(100%);\n\tfilter: grayscale(100%);\n\tcursor: pointer;\n}\n\ndiv.channel-textarea-stickers:hover {\n\ttransform: scale(1.275);\n\t-webkit-transform: scale(1.275);\n\tfilter: grayscale(0%);\n\t-webkit-filter: grayscale(0%);\n}\n\ndiv.sticker-selector {\n\tz-index: 2000;\n\tdisplay: none;\n\tbottom: 46px;\n\tright: 0px;\n\twidth: 600px;\n}\n\ndiv.sticker-selector.active { display: block; }\n.sticker-selector .emoji-picker .scroller .row { height: 96px; }\n\n.emoji-picker .scroller .emoji-item.sticker {\n\twidth: 88px;\n\theight: 88px;\n\tposition: relative;\n}\n\n.emoji-picker .scroller .emoji-item.sticker.favorited .sticker-fav {\n\tbackground-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n\tbackground-position: -462px -132px;\n\tbackground-size: 924px 704px;\n\tposition: absolute;\n\tright: 5px;\n\tbottom: 5px;\n\twidth: 22px;\n\theight: 22px;\n}\n\n.diversity-selector .item.sticker-settings-btn {\n\tbackground-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n\tbackground-position: 0px -330px;\n\tbackground-size: 924px 704px;\n\tpadding: 0px;\n\tmargin-top: 3px;\n}\n\n.kuro-stickers .popout .emoji-picker .scroller-wrap,\n.kuro-stickers .popout .emoji-picker .scroller-wrap .scroller {\n\tmin-height: 400px;\n}\n\n.sticker-container, .config-container {\n\tdisplay: block;\n}\n\n.sticker-container.hidden, .config-container.hidden {\n\tdisplay: none;\n}\n\n.pack-container {\n\tposition: relative;\n\tcursor: pointer;\n}\n\n.pack-container > img {\n\tbackground: #efefef;\n}\n\n.pack-name, .pack-length {\n\tcolor: #98aab6;\n\tfont-size: 12px;\n\tfont-weight: 500;\n\tpadding: 0 4px;\n\ttext-transform: uppercase;\n\tposition: absolute;\n\tleft: 65px;\n\ttop: 14px;\n}\n\n.pack-length {\n\ttop: 27px;\n}\n\n.pack-status.active {\n\tbackground-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n\t/*background-position: -484px -132px;*/\n\tbackground-position: -176px -396px;\n\tbackground-size: 924px 704px;\n\tposition: absolute;\n\tright: 12px;\n\ttop: 13px;\n\twidth: 22px;\n\theight: 22px;\n\tmargin: 3px;\n}\n\n.pack-divider {\n\twidth: 50%;\n\theight: 1px;\n\tbackground: #e8e8e8;\n\tmargin-left: 25%;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n}\n"},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,a){try{var o=e[i](a),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){var a=this;i(this,t),Object.defineProperty(this,"client",{value:e}),this.localStorage=n,this.lastKnownLocation=null,this.popupWindow=null,this.appendableElement=null,this.kuroStickers=null,this.stickersButton=null,this.configContainer=null,this.stickerContainer=null,this.configButton=null,this.favoriteStickers=null,this.subscribedPacks=null,this.favoriteStickers=null,this.favoritePack={name:"favorites",files:[]},this.loadTimer=setInterval(r(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(e=document.querySelector('[class^="channelTextArea"] [class^="inner"]')||document.querySelector(".channel-textarea-inner"))){t.next=5;break}return clearInterval(a.loadTimer),t.next=5,a.prepareDOM();case 5:case"end":return t.stop()}},t,a)})),1e3)}return a(t,[{key:"processStickers",value:function(){var t=r(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://lolisafe.moe/stickers.json");case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,this.updateConfigGUI(n);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateConfigGUI",value:function(t){var e=this;this.localStorage.subscribedPacks||(this.localStorage.subscribedPacks=JSON.stringify([])),this.localStorage.favoriteStickers||(this.localStorage.favoriteStickers=JSON.stringify([])),this.subscribedPacks=JSON.parse(this.localStorage.subscribedPacks),this.favoriteStickers=JSON.parse(this.localStorage.favoriteStickers);var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(n){var r=n.files[0].thumb;r||(r=n.files[0].file);var i="";e.subscribedPacks.includes(n.name)&&(i=" active");var a=document.createElement("div");a.className="pack-container",a.innerHTML='\n\t\t\t\t<img src="'+r+'" style="width: 50px; height: 50px;">\n\t\t\t\t<div class="pack-name">'+n.name+'</div>\n\t\t\t\t<div class="pack-length">'+n.files.length+' Stickers</div>\n\t\t\t\t<div class="pack-status '+i+'"></div>\n\t\t\t',a.addEventListener("click",function(){a.querySelector(".pack-status").classList.toggle("active"),e.subscribedPacks.includes(n.name)?e.subscribedPacks.splice(e.subscribedPacks.indexOf(n.name),1):e.subscribedPacks.push(n.name),e.localStorage.subscribedPacks=JSON.stringify(e.subscribedPacks),e.updateStickersGUI(t,e.subscribedPacks)});var o=document.createElement("div");o.className="pack-divider",e.configContainer.appendChild(a),e.configContainer.appendChild(o)}(a.value)}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}this.updateStickersGUI(t)}},{key:"updateStickersGUI",value:function(t){for(var e=this;this.stickerContainer.firstChild;)this.stickerContainer.removeChild(this.stickerContainer.firstChild);var n=[];this.favoriteStickers.length>0&&(this.favoritePack.files=this.favoriteStickers,n.push(this.favoritePack));var i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;n.push(l)}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}var u=!0,p=!1,d=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=h.value;if("favorites"===v.name||this.subscribedPacks.includes(v.name)){var k=document.createElement("div");k.className="category",k.innerText=v.name+" - "+v.files.length+" Stickers",this.stickerContainer.appendChild(k);var m=function(n){var i=n.thumb;i||(i=n.file);var a=document.createElement("div");a.className="emoji-item sticker",a.style.backgroundImage="url("+i+")",e.stickerContainer.appendChild(a);var o=document.createElement("div");o.className="sticker-fav",a.appendChild(o);var s=!0,c=!1,l=void 0;try{for(var u,p=e.favoriteStickers[Symbol.iterator]();!(s=(u=p.next()).done);s=!0)if(u.value.name===n.name){a.classList.toggle("favorited");break}}catch(t){c=!0,l=t}finally{try{!s&&p.return&&p.return()}finally{if(c)throw l}}a.addEventListener("click",r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.sendSticker(n,window.location.href.split("/").slice(-1)[0]);case 2:e.popupWindow.classList.toggle("active");case 3:case"end":return t.stop()}},t,e)}))),a.addEventListener("contextmenu",function(r){r.preventDefault();var i=!1,a=0,o=!0,s=!1,c=void 0;try{for(var l,u=e.favoriteStickers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)l.value.name===n.name&&(e.favoriteStickers.splice(a,1),i=!0),a++}catch(t){s=!0,c=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw c}}return i||e.favoriteStickers.push(n),e.localStorage.favoriteStickers=JSON.stringify(e.favoriteStickers),e.updateStickersGUI(t),!1},!1)},g=!0,b=!1,y=void 0;try{for(var x,S=v.files[Symbol.iterator]();!(g=(x=S.next()).done);g=!0)m(x.value)}catch(t){b=!0,y=t}finally{try{!g&&S.return&&S.return()}finally{if(b)throw y}}}}}catch(t){p=!0,d=t}finally{try{!u&&f.return&&f.return()}finally{if(p)throw d}}}},{key:"prepareDOM",value:function(){var t=r(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.kuroStickers=document.createElement("div"),this.kuroStickers.className="kuro-stickers",this.createPopupWindow(),this.stickersButton=document.createElement("div"),this.stickersButton.className="channel-textarea-emoji channel-textarea-stickers",this.stickersButton.addEventListener("click",function(){return e.popupWindow.classList.toggle("active")}),this.kuroStickers.appendChild(this.stickersButton),this.kuroStickers.appendChild(this.popupWindow),this.configButton=this.kuroStickers.querySelector(".sticker-settings-btn"),this.configButton.classList.toggle("hidden"),this.stickerContainer=this.kuroStickers.querySelector(".sticker-container"),this.configContainer=this.kuroStickers.querySelector(".config-container"),this.configButton.addEventListener("click",function(){return e.configContainer.classList.toggle("hidden")}),t.next=15,this.processStickers();case 15:setInterval(function(){window.location.href!==e.lastKnownLocation&&(e.lastKnownLocation=window.location.href,e.checkDOM())},1e3);case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"createPopupWindow",value:function(){this.popupWindow=document.createElement("div"),this.popupWindow.className="popout popout-top-right no-arrow no-shadow sticker-selector",this.popupWindow.innerHTML='\n\t\t\t<div class="emoji-picker">\n\t\t\t\t<div class="dimmer"></div>\n\t\t\t\t<div class="header">\n\t\t\t\t\t<div class="search-bar search-bar-light">\n\t\t\t\t\t\t<div class="search-bar-inner">\n\t\t\t\t\t\t\t<input type="text" placeholder="Search stickers" value="" />\n\t\t\t\t\t\t\t<div class="search-bar-icon">\n\t\t\t\t\t\t\t\t<i class="icon icon-search-bar-eye-glass visible"></i>\n\t\t\t\t\t\t\t\t<i class="icon icon-search-bar-clear"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="diversity-selector">\n\t\t\t\t\t\t<div class="item sticker-settings-btn"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="scrollerWrap-2uBjct scroller-wrap scrollerThemed-19vinI themeLight-1WK0Av scrollerFade-28dRsO scrollerTrack-3hhmU0">\n\t\t\t\t\t<div class="scroller-fzNley scroller sticker-container"></div>\n\t\t\t\t\t<div class="scroller-fzNley scroller config-container hidden">\n\t\t\t\t\t\t<div class="category">Subscribed sticker pack list</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'}},{key:"checkDOM",value:function(){this.appendableElement=document.querySelector('[class^="channelTextArea"] [class^="inner"]')||document.querySelector(".channel-textarea-inner"),null!==this.appendableElement&&this.appendableElement.appendChild(this.kuroStickers)}}]),t}();t.exports=o}]);