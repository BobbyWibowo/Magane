!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){const n=new(i(1));n.injectStyle(),n.checkAuth()},function(t,e,i){const n=i(2),s=i(3);class o{constructor(){this.localStorage=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage,this.onCooldown=!1,this.GUI=new s(this,this.localStorage)}injectStyle(){const t=document.createElement("style"),e=n.Style;({type:"text/css",style:t,content:e,apply:function(){this.style.type="text/css",this.style.appendChild(document.createTextNode(e)),document.head.appendChild(t)}}).apply()}async checkAuth(t=this.localStorage.token){if(this.localStorage.canCallAPI)return;if("string"!=typeof t)throw new Error("Not a token, buddy.");t=t.replace(/"/gi,""),t=t.replace(/^Bot\s*/i,"");const e=await fetch("https://discordapp.com/api/v7/gateway"),i=await e.json(),n=new WebSocket(`${i.url}/?encoding=json&v6`);n.onerror=(t=>console.error(t)),n.onmessage=(e=>{try{const i=JSON.parse(e.data);this.localStorage.canCallAPI=!0,0===i.op&&"READY"===i.t&&n.close(),10===i.op&&n.send(JSON.stringify({op:2,d:{token:t,properties:{$browser:"b1nzy is a meme"},large_threshold:50}})),console.log("Sucessful authenticated. You can now make REST request!")}catch(t){console.error(t)}})}async sendSticker(t,e,i=this.localStorage.token){if(this.onCooldown)return;this.onCooldown=!0;const n=await fetch(t.file,{cache:"force-cache"}),s=await n.blob(),o=new FormData;o.append("file",s,t.name),i=(i=i.replace(/"/gi,"")).replace(/^Bot\s*/i,""),fetch(`https://discordapp.com/api/channels/${e}/messages`,{headers:{Authorization:i},method:"POST",body:o}),setTimeout(()=>this.onCooldown=!1,1e3)}}t.exports=o},function(t,e){e.Style=`\ndiv#boot-modal { display: none; }\ndiv.channel-textarea-stickers {\n    position: absolute;\n    top: 12px !important;\n    right: 45px;\n    background-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n    width: 22px;\n    height: 22px;\n    background-position: -176px -396px;\n    background-size: 924px 704px;\n    background-repeat: no-repeat;\n    transition: border-bottom-color .1s ease-in-out;\n    -webkit-filter: grayscale(100%);\n    filter: grayscale(100%);\n    cursor: pointer;\n}\n\ndiv.channel-textarea-stickers:hover {\n    transform: scale(1.275);\n    -webkit-transform: scale(1.275);\n    filter: grayscale(0%);\n    -webkit-filter: grayscale(0%);\n}\n\ndiv.sticker-selector {\n\tz-index: 2000;\n\tdisplay: none;\n\tbottom: 46px;\n    right: 0px;\n\twidth: 600px;\n}\n\ndiv.sticker-selector.active { display: block; }\n.sticker-selector .emoji-picker .scroller .row { height: 96px; }\n\n.emoji-picker .scroller .emoji-item.sticker {\n\twidth: 88px;\n\theight: 88px;\n    position: relative;\n}\n\n.emoji-picker .scroller .emoji-item.sticker.favorited .sticker-fav {\n    background-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n    background-position: -462px -132px;\n    background-size: 924px 704px;\n    position: absolute;\n    right: 5px;\n    bottom: 5px;\n    width: 22px;\n    height: 22px;\n}\n\n.diversity-selector .item.sticker-settings-btn {\n    background-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n    background-position: 0px -330px;\n    background-size: 924px 704px;\n    padding: 0px;\n    margin-top: 3px;\n}\n\n.kuro-stickers .popout .emoji-picker .scroller-wrap,\n.kuro-stickers .popout .emoji-picker .scroller-wrap .scroller {\n    min-height: 400px;\n}\n\n.sticker-container, .config-container {\n    display: block;\n}\n\n.sticker-container.hidden, .config-container.hidden {\n    display: none;\n}\n\n.pack-container {\n    position: relative;\n    cursor: pointer;\n}\n\n.pack-container > img {\n    background: #efefef;\n}\n\n.pack-name, .pack-length {\n    color: #98aab6;\n    font-size: 12px;\n    font-weight: 500;\n    padding: 0 4px;\n    text-transform: uppercase;\n    position: absolute;\n    left: 65px;\n    top: 14px;\n}\n\n.pack-length {\n    top: 27px;\n}\n\n.pack-status.active {\n    background-image: url('/assets/f24711dae4f6d6b28335e866a93e9d9b.png');\n    /*background-position: -484px -132px;*/\n    background-position: -176px -396px;\n    background-size: 924px 704px;\n    position: absolute;\n    right: 12px;\n    top: 13px;\n    width: 22px;\n    height: 22px;\n    margin: 3px;\n}\n\n.pack-divider {\n    width: 50%;\n    height: 1px;\n    background: #e8e8e8;\n    margin-left: 25%;\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n`},function(t,e){class i{constructor(t,e){Object.defineProperty(this,"client",{value:t}),this.localStorage=e,this.lastKnownLocation,this.popupWindow,this.appendableElement,this.kuroStickers,this.stickersButton,this.configContainer,this.stickerContainer,this.configButton,this.favoriteStickers,this.subscribedPacks,this.favoriteStickers,this.favoritePack={name:"favorites",files:[]},this.loadTimer=setInterval(async()=>{null!==(document.querySelector('[class^="channelTextArea"] [class^="inner"]')||document.querySelector(".channel-textarea-inner"))&&(clearInterval(this.loadTimer),await this.prepareDOM())},1e3)}async processStickers(){const t=await fetch("https://lolisafe.moe/stickers.json"),e=await t.json();this.updateConfigGUI(e)}updateConfigGUI(t){this.localStorage.subscribedPacks||(this.localStorage.subscribedPacks=JSON.stringify([])),this.localStorage.favoriteStickers||(this.localStorage.favoriteStickers=JSON.stringify([])),this.subscribedPacks=JSON.parse(this.localStorage.subscribedPacks),this.favoriteStickers=JSON.parse(this.localStorage.favoriteStickers);for(const e of t){let i=e.files[0].thumb;i||(i=e.files[0].file);let n="";this.subscribedPacks.includes(e.name)&&(n=" active");const s=document.createElement("div");s.className="pack-container",s.innerHTML=`\n\t\t\t\t<img src="${i}" style="width: 50px; height: 50px;">\n\t\t\t\t<div class="pack-name">${e.name}</div>\n\t\t\t\t<div class="pack-length">${e.files.length} Stickers</div>\n\t\t\t\t<div class="pack-status ${n}"></div>\n\t\t\t`,s.addEventListener("click",()=>{s.querySelector(".pack-status").classList.toggle("active"),this.subscribedPacks.includes(e.name)?this.subscribedPacks.splice(this.subscribedPacks.indexOf(e.name),1):this.subscribedPacks.push(e.name),this.localStorage.subscribedPacks=JSON.stringify(this.subscribedPacks),this.updateStickersGUI(t,this.subscribedPacks)});const o=document.createElement("div");o.className="pack-divider",this.configContainer.appendChild(s),this.configContainer.appendChild(o)}this.updateStickersGUI(t)}updateStickersGUI(t){for(;this.stickerContainer.firstChild;)this.stickerContainer.removeChild(this.stickerContainer.firstChild);let e=[];this.favoriteStickers.length>0&&(this.favoritePack.files=this.favoriteStickers,e.push(this.favoritePack));for(let i of t)e.push(i);for(const i of e){if("favorites"!==i.name&&!this.subscribedPacks.includes(i.name))continue;const e=document.createElement("div");e.className="category",e.innerText=`${i.name} - ${i.files.length} Stickers`,this.stickerContainer.appendChild(e);for(const e of i.files){let i=e.thumb;i||(i=e.file);const n=document.createElement("div");n.className="emoji-item sticker",n.style.backgroundImage=`url(${i})`,this.stickerContainer.appendChild(n);const s=document.createElement("div");s.className="sticker-fav",n.appendChild(s);for(let t of this.favoriteStickers)if(t.name===e.name){n.classList.toggle("favorited");break}n.addEventListener("click",async()=>{await this.client.sendSticker(e,window.location.href.split("/").slice(-1)[0]),this.popupWindow.classList.toggle("active")}),n.addEventListener("contextmenu",i=>{i.preventDefault();let n=!1,s=0;for(let t of this.favoriteStickers)t.name===e.name&&(this.favoriteStickers.splice(s,1),n=!0),s++;return n||this.favoriteStickers.push(e),this.localStorage.favoriteStickers=JSON.stringify(this.favoriteStickers),this.updateStickersGUI(t),!1},!1)}}}async prepareDOM(){this.kuroStickers=document.createElement("div"),this.kuroStickers.className="kuro-stickers",this.createPopupWindow(),this.stickersButton=document.createElement("div"),this.stickersButton.className="channel-textarea-emoji channel-textarea-stickers",this.stickersButton.addEventListener("click",()=>this.popupWindow.classList.toggle("active")),this.kuroStickers.appendChild(this.stickersButton),this.kuroStickers.appendChild(this.popupWindow),this.configButton=this.kuroStickers.querySelector(".sticker-settings-btn"),this.configButton.classList.toggle("hidden"),this.stickerContainer=this.kuroStickers.querySelector(".sticker-container"),this.configContainer=this.kuroStickers.querySelector(".config-container"),this.configButton.addEventListener("click",()=>this.configContainer.classList.toggle("hidden")),await this.processStickers(),setInterval(()=>{window.location.href!==this.lastKnownLocation&&(this.lastKnownLocation=window.location.href,this.checkDOM())},1e3)}createPopupWindow(){this.popupWindow=document.createElement("div"),this.popupWindow.className="popout popout-top-right no-arrow no-shadow sticker-selector",this.popupWindow.innerHTML=`\n\t\t\t<div class="emoji-picker">\n\t\t\t\t<div class="dimmer"></div>\n\t\t\t\t<div class="header">\n\t\t\t\t\t<div class="search-bar search-bar-light">\n\t\t\t\t\t\t<div class="search-bar-inner">\n\t\t\t\t\t\t\t<input type="text" placeholder="Search stickers" value="" />\n\t\t\t\t\t\t\t<div class="search-bar-icon">\n\t\t\t\t\t\t\t\t<i class="icon icon-search-bar-eye-glass visible"></i>\n\t\t\t\t\t\t\t\t<i class="icon icon-search-bar-clear"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="diversity-selector">\n\t\t\t\t\t\t<div class="item sticker-settings-btn"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="scrollerWrap-2uBjct scroller-wrap scrollerThemed-19vinI themeLight-1WK0Av scrollerFade-28dRsO scrollerTrack-3hhmU0">\n\t\t\t\t\t<div class="scroller-fzNley scroller sticker-container"></div>\n\t\t\t\t\t<div class="scroller-fzNley scroller config-container hidden">\n\t\t\t\t\t\t<div class="category">Subscribed sticker pack list</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}checkDOM(){this.appendableElement=document.querySelector('[class^="channelTextArea"] [class^="inner"]')||document.querySelector(".channel-textarea-inner"),null!==this.appendableElement&&this.appendableElement.appendChild(this.kuroStickers)}}t.exports=i}]);