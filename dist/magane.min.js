!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function r(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}const c="undefined"!=typeof window;let l=c?()=>window.performance.now():()=>Date.now(),d=c?e=>requestAnimationFrame(e):e;const p=new Set;function u(e){p.forEach(t=>{t.c(e)||(p.delete(t),t.f())}),0!==p.size&&d(u)}function m(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function b(){return k(" ")}function y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function w(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function M(e,t){e.value=null==t?"":t}function $(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function S(e,t,n){e.classList[n?"add":"remove"](t)}class I{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){var i;this.e||(this.is_svg?this.e=(i=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=v(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)g(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(f)}}let A;function E(e){A=e}function L(){if(!A)throw new Error("Function called outside component initialization");return A}function T(e){L().$$.on_mount.push(e)}function U(e){L().$$.on_destroy.push(e)}function N(){const e=L();return(t,n,{cancelable:i=!1}={})=>{const a=e.$$.callbacks[t];if(a){const o=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n,i,t),a}(t,n,{cancelable:i});return a.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const O=[],P=[],W=[],D=[],j=Promise.resolve();let _=!1;function F(e){W.push(e)}const B=new Set;let z=0;function R(){const e=A;do{for(;z<O.length;){const e=O[z];z++,E(e),H(e.$$)}for(E(null),O.length=0,z=0;P.length;)P.pop()();for(let e=0;e<W.length;e+=1){const t=W[e];B.has(t)||(B.add(t),t())}W.length=0}while(O.length);for(;D.length;)D.pop()();_=!1,B.clear(),E(e)}function H(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const J=new Set;function q(e,t){e&&e.i&&(J.delete(e),e.i(t))}function Y(e,t){e.d(1),t.delete(e.key)}function V(e,t){-1===e.$$.dirty[0]&&(O.push(e),_||(_=!0,j.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(o,s,r,c,l,d,p,u=[-1]){const m=A;E(o);const g=o.$$={fragment:null,ctx:null,props:d,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(m?m.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||m.$$.root};p&&p(g.root);let h=!1;if(g.ctx=r?r(o,s.props||{},(e,t,...n)=>{const i=n.length?n[0]:t;return g.ctx&&l(g.ctx[e],g.ctx[e]=i)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](i),h&&V(o,e)),t}):[],g.update(),h=!0,i(g.before_update),g.fragment=!!c&&c(g.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);g.fragment&&g.fragment.l(e),e.forEach(f)}else g.fragment&&g.fragment.c();s.intro&&q(o.$$.fragment),function(e,n,o,s){const{fragment:r,on_mount:c,on_destroy:l,after_update:d}=e.$$;r&&r.m(n,o),s||F(()=>{const n=c.map(t).filter(a);l?l.push(...n):i(n),e.$$.on_mount=[]}),d.forEach(F)}(o,s.target,s.anchor,s.customElement),R()}E(m)}class K{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Q(t){let n,a,o;return{c(){n=v("div"),n.innerHTML='<img class="channel-textarea-stickers-content" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2224%22%20height%3D%2224%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M18.5%2011c-4.136%200-7.5%203.364-7.5%207.5c0%20.871.157%201.704.432%202.482l9.551-9.551A7.462%207.462%200%200%200%2018.5%2011z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3Cpath%20d%3D%22M12%202C6.486%202%202%206.486%202%2012c0%204.583%203.158%208.585%207.563%209.69A9.431%209.431%200%200%201%209%2018.5C9%2013.262%2013.262%209%2018.5%209c1.12%200%202.191.205%203.19.563C20.585%205.158%2016.583%202%2012%202z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3C%2Fsvg%3E" alt="Magane menu button"/>',x(n,"id","maganeButton"),x(n,"class","channel-textarea-emoji channel-textarea-stickers"),S(n,"active",t[1])},m(e,i){var s;g(e,n,i),t[3](n),a||(o=[y(n,"click",t[4]),y(n,"contextmenu",w((s=t[5],function(e){return e.preventDefault(),s.call(this,e)})))],a=!0)},p(e,[t]){2&t&&S(n,"active",e[1])},i:e,o:e,d(e){e&&f(n),t[3](null),a=!1,i(o)}}}function G(e,t,n){let{element:i}=t,{active:a=!1}=t;const o=N(),s=e=>console.log("%c[MaganeButton]%c","color: #3a71c1; font-weight: 700","",e);T(()=>s("Mounted.")),U(()=>s("Destroyed."));return e.$$set=e=>{"element"in e&&n(0,i=e.element),"active"in e&&n(1,a=e.active)},[i,a,o,function(e){P[e?"unshift":"push"](()=>{i=e,n(0,i)})},e=>o("click",e),e=>o("grabPacks",e)]}class Z extends K{constructor(e){super(),X(this,e,G,Q,o,{element:0,active:1})}get element(){return this.$$.ctx[0]}set element(e){this.$$set({element:e}),R()}get active(){return this.$$.ctx[1]}set active(e){this.$$set({active:e}),R()}}var ee={$:e=>"string"==typeof e?document.querySelector(e):e,extend:(...e)=>Object.assign(...e),cumulativeOffset(e){let t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}},directScroll:e=>e&&e!==document&&e!==document.body,scrollTop(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollTop=t:e.scrollTop:n?document.documentElement.scrollTop=document.body.scrollTop=t:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollLeft=t:e.scrollLeft:n?document.documentElement.scrollLeft=document.body.scrollLeft=t:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const te={container:"body",duration:500,delay:0,offset:0,easing:function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1},onStart:e,onDone:e,onAborting:e,scrollX:!1,scrollY:!0},ne=e=>{let{offset:t,duration:n,delay:i,easing:a,x:o=0,y:s=0,scrollX:r,scrollY:c,onStart:m,onDone:g,container:f,onAborting:h,element:v}=e;"function"==typeof t&&(t=t());var k=ee.cumulativeOffset(f),b=v?ee.cumulativeOffset(v):{top:s,left:o},y=ee.scrollLeft(f),w=ee.scrollTop(f),x=b.left-k.left+t,C=b.top-k.top+t,M=x-y,$=C-w;let S=!0,I=!1,A=l()+i,E=A+n;function L(e){e||(I=!0,m(v,{x:o,y:s}))}function T(e){!function(e,t,n){r&&ee.scrollLeft(e,n),c&&ee.scrollTop(e,t)}(f,w+$*e,y+M*e)}function U(){S=!1}return function(e){let t;0===p.size&&d(u),new Promise(n=>{p.add(t={c:e,f:n})})}(e=>{if(!I&&e>=A&&L(!1),I&&e>=E&&(T(1),U(),g(v,{x:o,y:s})),!S)return h(v,{x:o,y:s}),!1;if(I){T(0+1*a((e-A)/n))}return!0}),L(i),T(0),U},ie=e=>ne((e=>{let t=ee.extend({},te,e);return t.container=ee.$(t.container),t.element=ee.$(t.element),t})(e));function ae(e,t,n){const i=e.slice();return i[124]=t[n],i}function oe(e,t,n){const i=e.slice();return i[124]=t[n],i[128]=n,i}function se(e,t,n){const i=e.slice();return i[124]=t[n],i[128]=n,i}function re(e,t,n){const i=e.slice();return i[124]=t[n],i[128]=n,i}function ce(e,t,n){const i=e.slice();return i[131]=t[n],i[128]=n,i}function le(e,t,n){const i=e.slice();return i[131]=t[n],i[128]=n,i}function de(e){let t;return{c(){t=v("h3"),t.textContent="It seems you aren't subscribed to any pack yet. Click the plus symbol on the bottom-left to get started! ðŸŽ‰",x(t,"class","getStarted")},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function pe(e){let t,n,i,a,o,s=e[26](e[8].length)+"",r=e[8],c=[];for(let t=0;t<r.length;t+=1)c[t]=ue(le(e,r,t));return{c(){t=v("div"),n=v("span"),i=k("Favorites"),a=new I(!1),o=b();for(let e=0;e<c.length;e+=1)c[e].c();a.a=null,x(n,"id","pfavorites"),x(t,"class","pack")},m(e,r){g(e,t,r),m(t,n),m(n,i),a.m(s,n),m(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null)},p(e,n){if(256&n[0]&&s!==(s=e[26](e[8].length)+"")&&a.p(s),23069440&n[0]){let i;for(r=e[8],i=0;i<r.length;i+=1){const a=le(e,r,i);c[i]?c[i].p(a,n):(c[i]=ue(a),c[i].c(),c[i].m(t,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=r.length}},d(e){e&&f(t),h(c,e)}}}function ue(e){let t,n,a,o,s,c,l,d,p,u;function h(){return e[45](e[131])}function k(){return e[46](e[131])}return{c(){t=v("div"),n=v("img"),c=b(),l=v("div"),l.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',d=b(),x(n,"class","image"),r(n.src,a=""+e[21](e[131].pack,e[131].id))||x(n,"src",a),x(n,"alt",o=e[131].pack+" - "+e[131].id),x(n,"title",s=(e[9][e[131].pack]?e[9][e[131].pack].name:"N/A")+("string"==typeof e[131].pack&&e[131].pack.startsWith("custom-")?" â€“ "+e[131].id:"")),x(l,"class","deleteFavorite"),x(l,"title","Unfavorite"),x(t,"class","sticker")},m(e,i){g(e,t,i),m(t,n),m(t,c),m(t,l),m(t,d),p||(u=[y(n,"click",h),y(l,"click",k)],p=!0)},p(t,i){e=t,256&i[0]&&!r(n.src,a=""+e[21](e[131].pack,e[131].id))&&x(n,"src",a),256&i[0]&&o!==(o=e[131].pack+" - "+e[131].id)&&x(n,"alt",o),768&i[0]&&s!==(s=(e[9][e[131].pack]?e[9][e[131].pack].name:"N/A")+("string"==typeof e[131].pack&&e[131].pack.startsWith("custom-")?" â€“ "+e[131].id:""))&&x(n,"title",s)},d(e){e&&f(t),p=!1,i(u)}}}function me(e){let t,n,i;function a(){return e[49](e[124],e[131])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","deleteFavorite"),x(t,"title","Unfavorite")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ge(e){let t,n,i;function a(){return e[48](e[124],e[131])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","addFavorite"),x(t,"title","Favorite")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function fe(e){let t,n,i,a,o,s,c,l,d;function p(...t){return e[44](e[124],e[131],...t)}function u(){return e[47](e[124],e[131])}function h(e,t){return 1280&t[0]&&(c=null),null==c&&(c=!(-1!==e[8].findIndex(p))),c?ge:me}let k=h(e,[-1,-1,-1,-1,-1]),w=k(e);return{c(){t=v("div"),n=v("img"),s=b(),w.c(),x(n,"class","image"),r(n.src,i=""+e[21](e[124].id,e[131],!1,e[128]))||x(n,"src",i),x(n,"alt",a=e[124].id+" - "+e[131]),x(n,"title",o="string"==typeof e[124].id&&e[124].id.startsWith("custom-")?e[131]:""),x(t,"class","sticker")},m(e,i){g(e,t,i),m(t,n),m(t,s),w.m(t,null),l||(d=y(n,"click",u),l=!0)},p(s,c){e=s,1024&c[0]&&!r(n.src,i=""+e[21](e[124].id,e[131],!1,e[128]))&&x(n,"src",i),1024&c[0]&&a!==(a=e[124].id+" - "+e[131])&&x(n,"alt",a),1024&c[0]&&o!==(o="string"==typeof e[124].id&&e[124].id.startsWith("custom-")?e[131]:"")&&x(n,"title",o),k===(k=h(e,c))&&w?w.p(e,c):(w.d(1),w=k(e),w&&(w.c(),w.m(t,null)))},d(e){e&&f(t),w.d(),l=!1,d()}}}function he(e){let t,n,i,a,o,s,r,c=e[124].name+"",l=e[26](e[124].files.length)+"",d=e[124].files,p=[];for(let t=0;t<d.length;t+=1)p[t]=fe(ce(e,d,t));return{c(){t=v("div"),n=v("span"),i=k(c),a=new I(!1),s=b();for(let e=0;e<p.length;e+=1)p[e].c();r=b(),a.a=null,x(n,"id",o="p"+e[124].id),x(t,"class","pack")},m(e,o){g(e,t,o),m(t,n),m(n,i),a.m(l,n),m(t,s);for(let e=0;e<p.length;e+=1)p[e].m(t,null);m(t,r)},p(e,s){if(1024&s[0]&&c!==(c=e[124].name+"")&&C(i,c),1024&s[0]&&l!==(l=e[26](e[124].files.length)+"")&&a.p(l),1024&s[0]&&o!==(o="p"+e[124].id)&&x(n,"id",o),31458560&s[0]){let n;for(d=e[124].files,n=0;n<d.length;n+=1){const i=ce(e,d,n);p[n]?p[n].p(i,s):(p[n]=fe(i),p[n].c(),p[n].m(t,r))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}},d(e){e&&f(t),h(p,e)}}}function ve(e){let t,n,i,a;function o(){return e[52](e[124])}return{c(){t=v("div"),x(t,"class","pack"),x(t,"title",n=e[124].name),$(t,"background-image",`url(${e[21](e[124].id,e[124].files[0],!1,0)})`)},m(e,n){g(e,t,n),i||(a=y(t,"click",o),i=!0)},p(i,a){e=i,1024&a[0]&&n!==(n=e[124].name)&&x(t,"title",n),1024&a[0]&&$(t,"background-image",`url(${e[21](e[124].id,e[124].files[0],!1,0)})`)},d(e){e&&f(t),i=!1,a()}}}function ke(e){let t,n,i=[],a=new Map,o=e[10];const s=e=>e[124].id;for(let t=0;t<o.length;t+=1){let n=oe(e,o,t),r=s(n);a.set(r,i[t]=we(r,n))}return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","tab-content has-scroll-y"),x(t,"style",n=0===e[7]?"":"display: none;")},m(e,n){g(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,r){137634816&r[0]|5&r[1]&&(o=e[10],i=function(e,t,n,i,a,o,s,r,c,l,d,p){let u=e.length,m=o.length,g=u;const f={};for(;g--;)f[e[g].key]=g;const h=[],v=new Map,k=new Map;for(g=m;g--;){const e=p(a,o,g),r=n(e);let c=s.get(r);c?i&&c.p(e,t):(c=l(r,e),c.c()),v.set(r,h[g]=c),r in f&&k.set(r,Math.abs(g-f[r]))}const b=new Set,y=new Set;function w(e){q(e,1),e.m(r,d),s.set(e.key,e),d=e.first,m--}for(;u&&m;){const t=h[m-1],n=e[u-1],i=t.key,a=n.key;t===n?(d=t.first,u--,m--):v.has(a)?!s.has(i)||b.has(i)?w(t):y.has(a)?u--:k.get(i)>k.get(a)?(y.add(i),w(t)):(b.add(a),u--):(c(n,s),u--)}for(;u--;){const t=e[u];v.has(t.key)||c(t,s)}for(;m;)w(h[m-1]);return h}(i,r,s,1,e,o,a,t,Y,we,null,oe)),128&r[0]&&n!==(n=0===e[7]?"":"display: none;")&&x(t,"style",n)},d(e){e&&f(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function be(e){let t,n,a,o,s,r;return{c(){t=v("div"),n=v("input"),x(n,"class","inputPackIndex"),x(n,"type","text"),x(n,"data-pack",a=e[124].id),n.value=o=e[128]+1,x(t,"class","index")},m(i,a){g(i,t,a),m(t,n),s||(r=[y(n,"click",Le),y(n,"keypress",e[31])],s=!0)},p(e,t){1024&t[0]&&a!==(a=e[124].id)&&x(n,"data-pack",a),1024&t[0]&&o!==(o=e[128]+1)&&n.value!==o&&(n.value=o)},d(e){e&&f(t),s=!1,i(r)}}}function ye(e){let t,n,i;function a(){return e[59](e[124])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function we(e,t){let n,i,a,o,s,r,c,l,d,p,u,h,w,M,S,A,E,L,T,U,N,O=t[124].name+"",P=t[124].count+"",W=(t[18].hidePackAppendix?"":t[27](t[124].id))+"",D=t[10].length>1&&be(t);function j(){return t[58](t[124])}let _=t[13][t[124].id]&&t[13][t[124].id].updateUrl&&ye(t);return{key:e,first:null,c(){n=v("div"),D&&D.c(),i=b(),a=v("div"),o=b(),s=v("div"),r=v("span"),c=k(O),d=b(),p=v("span"),u=k(P),h=k(" stickers"),w=new I(!1),M=b(),S=v("div"),A=v("button"),A.textContent="Del",E=b(),_&&_.c(),T=b(),x(a,"class","preview"),$(a,"background-image",`url(${t[21](t[124].id,t[124].files[0],!1,0)})`),x(r,"title",l=t[18].hidePackAppendix?"ID: "+t[124].id:""),w.a=null,x(s,"class","info"),x(A,"class","button is-danger"),x(A,"title","Unsubscribe"),x(S,"class",L="action"+(t[13][t[124].id]&&t[13][t[124].id].updateUrl?" is-tight":"")),x(n,"class","pack"),this.first=n},m(e,t){g(e,n,t),D&&D.m(n,null),m(n,i),m(n,a),m(n,o),m(n,s),m(s,r),m(r,c),m(s,d),m(s,p),m(p,u),m(p,h),w.m(W,p),m(n,M),m(n,S),m(S,A),m(S,E),_&&_.m(S,null),m(n,T),U||(N=y(A,"click",j),U=!0)},p(e,o){(t=e)[10].length>1?D?D.p(t,o):(D=be(t),D.c(),D.m(n,i)):D&&(D.d(1),D=null),1024&o[0]&&$(a,"background-image",`url(${t[21](t[124].id,t[124].files[0],!1,0)})`),1024&o[0]&&O!==(O=t[124].name+"")&&C(c,O),263168&o[0]&&l!==(l=t[18].hidePackAppendix?"ID: "+t[124].id:"")&&x(r,"title",l),1024&o[0]&&P!==(P=t[124].count+"")&&C(u,P),263168&o[0]&&W!==(W=(t[18].hidePackAppendix?"":t[27](t[124].id))+"")&&w.p(W),t[13][t[124].id]&&t[13][t[124].id].updateUrl?_?_.p(t,o):(_=ye(t),_.c(),_.m(S,null)):_&&(_.d(1),_=null),9216&o[0]&&L!==(L="action"+(t[13][t[124].id]&&t[13][t[124].id].updateUrl?" is-tight":""))&&x(S,"class",L)},d(e){e&&f(n),D&&D.d(),_&&_.d(),U=!1,N()}}}function xe(e){let t,n=e[12],i=[];for(let t=0;t<n.length;t+=1)i[t]=Ie(ae(e,n,t));return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","packs has-scroll-y"),x(t,"style","")},m(e,n){g(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(138164224&a[0]|6&a[1]){let o;for(n=e[12],o=0;o<n.length;o+=1){const s=ae(e,n,o);i[o]?i[o].p(s,a):(i[o]=Ie(s),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&f(t),h(i,e)}}}function Ce(e){let t,n,i;function a(){return e[62](e[124])}return{c(){t=v("button"),t.textContent="Add",x(t,"class","button is-primary"),x(t,"title","Subscribe")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function Me(e){let t,n,i;function a(){return e[61](e[124])}return{c(){t=v("button"),t.textContent="Del",x(t,"class","button is-danger"),x(t,"title","Unsubscribe")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function $e(e){let t,n,i,a,o=e[13][e[124].id].updateUrl&&Se(e);function s(){return e[64](e[124])}return{c(){o&&o.c(),t=b(),n=v("button"),x(n,"class","button delete-pack"),x(n,"title","Purge")},m(e,r){o&&o.m(e,r),g(e,t,r),g(e,n,r),i||(a=y(n,"click",s),i=!0)},p(n,i){(e=n)[13][e[124].id].updateUrl?o?o.p(e,i):(o=Se(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&f(t),e&&f(n),i=!1,a()}}}function Se(e){let t,n,i;function a(){return e[63](e[124])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){g(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function Ie(e){let t,n,i,a,o,s,r,c,l,d,p,u,h,y,w,M,S,A,E=e[124].name+"",L=e[124].count+"",T=(e[18].hidePackAppendix?"":e[27](e[124].id))+"";function U(e,t){return 6144&t[0]&&(w=null),null==w&&(w=!!e[11].includes(e[124].id)),w?Me:Ce}let N=U(e,[-1,-1,-1,-1,-1]),O=N(e),P=e[13][e[124].id]&&$e(e);return{c(){t=v("div"),n=v("div"),i=b(),a=v("div"),o=v("span"),s=k(E),c=b(),l=v("span"),d=k(L),p=k(" stickers"),u=new I(!1),h=b(),y=v("div"),O.c(),M=b(),P&&P.c(),A=b(),x(n,"class","preview"),$(n,"background-image",`url(${e[21](e[124].id,e[124].files[0],!1,0)})`),x(o,"title",r=e[18].hidePackAppendix?"ID: "+e[124].id:""),u.a=null,x(a,"class","info"),x(y,"class",S="action"+(e[13][e[124].id]?" is-tight":"")),x(t,"class","pack")},m(e,r){g(e,t,r),m(t,n),m(t,i),m(t,a),m(a,o),m(o,s),m(a,c),m(a,l),m(l,d),m(l,p),u.m(T,l),m(t,h),m(t,y),O.m(y,null),m(y,M),P&&P.m(y,null),m(t,A)},p(e,t){4096&t[0]&&$(n,"background-image",`url(${e[21](e[124].id,e[124].files[0],!1,0)})`),4096&t[0]&&E!==(E=e[124].name+"")&&C(s,E),266240&t[0]&&r!==(r=e[18].hidePackAppendix?"ID: "+e[124].id:"")&&x(o,"title",r),4096&t[0]&&L!==(L=e[124].count+"")&&C(d,L),266240&t[0]&&T!==(T=(e[18].hidePackAppendix?"":e[27](e[124].id))+"")&&u.p(T),N===(N=U(e,t))&&O?O.p(e,t):(O.d(1),O=N(e),O&&(O.c(),O.m(y,M))),e[13][e[124].id]?P?P.p(e,t):(P=$e(e),P.c(),P.m(y,null)):P&&(P.d(1),P=null),12288&t[0]&&S!==(S="action"+(e[13][e[124].id]?" is-tight":""))&&x(y,"class",S)},d(e){e&&f(t),O.d(),P&&P.d()}}}function Ae(t){let n,a,o,s,r,c,l,d,p,u,w,C,I,A,E,L,T,U,N,O,P,W,D,j,_,F,B,z,R,H,J,q,Y,V,X,K,Q,G,Z,ee,te,ne,ie,ae,oe,ce,le,ue,me,ge,fe,be,ye,we,Ce,Me,$e,Se,Ie,Ae,Ee,Le,Ne,Oe,Pe,We,De,je,_e,Fe,Be,ze,Re,He,Je,qe,Ye,Ve,Xe,Ke,Qe,Ge,Ze,et,tt,nt,it,at,ot,st,rt,ct,lt,dt,pt,ut,mt,gt,ft,ht,vt,kt,bt,yt,wt,xt,Ct,Mt,$t,St,It,At,Et,Lt,Tt,Ut,Nt,Ot,Pt,Wt,Dt,jt,_t,Ft,Bt,zt,Rt,Ht,Jt,qt,Yt,Vt,Xt,Kt,Qt,Gt,Zt,en,tn,nn,an,on=!t[8]&&!t[10]&&de(),sn=t[8]&&t[8].length&&pe(t),rn=t[10],cn=[];for(let e=0;e<rn.length;e+=1)cn[e]=he(re(t,rn,e));let ln=t[23]&&t[23].length&&function(t){let n,i,a;return{c(){n=v("div"),n.innerHTML='<div class="icon-favorite"></div>',x(n,"class","pack"),x(n,"title","Favorites")},m(e,o){g(e,n,o),i||(a=y(n,"click",t[51]),i=!0)},p:e,d(e){e&&f(n),i=!1,a()}}}(t),dn=t[10],pn=[];for(let e=0;e<dn.length;e+=1)pn[e]=ve(se(t,dn,e));let un=t[6][0]&&ke(t),mn=t[6][1]&&xe(t);return{c(){n=v("main"),a=v("div"),o=v("div"),s=v("div"),on&&on.c(),r=b(),sn&&sn.c(),c=b();for(let e=0;e<cn.length;e+=1)cn[e].c();d=b(),p=v("div"),u=v("div"),w=v("div"),C=v("div"),C.innerHTML='<div class="icon-plus"></div>',I=b(),ln&&ln.c(),A=b(),E=v("div"),L=v("div");for(let e=0;e<pn.length;e+=1)pn[e].c();U=b(),N=v("div"),O=v("div"),P=b(),W=v("div"),D=v("div"),j=v("div"),_=v("div"),_.textContent="Installed",F=b(),B=v("div"),B.textContent="Packs",z=b(),R=v("div"),R.textContent="Import",H=b(),J=v("div"),J.textContent="Misc",q=b(),un&&un.c(),Y=b(),V=v("div"),X=v("input"),K=b(),mn&&mn.c(),G=b(),Z=v("div"),ee=v("div"),te=v("p"),te.textContent="LINE Store Proxy",ne=b(),ie=v("p"),ie.innerHTML='If you are looking for a sticker pack that is not provided by Magane, you can go to the <a href="https://store.line.me/" target="_blank">LINE Store</a> and pick whatever pack you want and paste the full URL in the box below.',ae=b(),oe=v("p"),oe.textContent="e.g. https://store.line.me/stickershop/product/17573/ja",ce=b(),le=v("p"),ue=v("input"),me=b(),ge=v("button"),ge.textContent="Add",fe=b(),be=v("div"),ye=v("p"),ye.textContent="Remote Packs",we=b(),Ce=v("p"),Ce.innerHTML='You can paste URL to a JSON config file of a remote pack in here.<br/>\n\t\t\t\t\t\t\t\t\tThis also supports public album links of any file hosting websites running <a href="https://github.com/WeebDev/chibisafe" target="_blank">Chibisafe</a>.',Me=b(),$e=v("p"),$e.innerHTML="e.g. https://example.com/packs/my_custom_pack.json<br/>\n\t\t\t\t\t\t\t\t\thttps://chibisafe.moe/a/my_album",Se=b(),Ie=v("p"),Ae=v("input"),Ee=b(),Le=v("button"),Le.textContent="Add",Ne=b(),Oe=v("p"),Pe=v("input"),We=b(),De=v("button"),De.textContent="Load local JSON",je=b(),_e=v("p"),Fe=v("button"),Fe.textContent="Update all remote packs",ze=b(),Re=v("div"),He=v("div"),Je=v("p"),Je.textContent="Settings",qe=b(),Ye=v("p"),Ve=v("label"),Xe=v("input"),Ke=k("\n\t\t\t\t\t\t\t\t\t\tDisable Toasts"),Qe=b(),Ge=v("p"),Ze=v("label"),et=v("input"),tt=k("\n\t\t\t\t\t\t\t\t\t\tClose window when sending a sticker"),nt=b(),it=v("p"),at=v("label"),ot=v("input"),st=k("\n\t\t\t\t\t\t\t\t\t\tUse left toolbar instead of bottom toolbar on main window"),rt=b(),ct=v("p"),lt=v("label"),dt=v("input"),pt=k("\n\t\t\t\t\t\t\t\t\t\tHide pack's appendix in packs list (e.g. its numerical ID)"),ut=b(),mt=v("p"),gt=v("label"),ft=v("input"),ht=k("\n\t\t\t\t\t\t\t\t\t\tDisable downscaling of manually imported LINE Store packs"),vt=b(),kt=v("p"),bt=v("label"),yt=v("input"),wt=k("\n\t\t\t\t\t\t\t\t\t\tDisable obfuscation of files names for imported custom packs"),xt=b(),Ct=v("p"),Mt=v("label"),$t=v("input"),St=k("\n\t\t\t\t\t\t\t\t\t\tMark stickers as spoilers when sending"),It=b(),At=v("div"),Et=v("p"),Et.textContent="Hotkey",Lt=b(),Tt=v("p"),Tt.innerHTML='<a href="https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values" target="_blank">See a full list of key values.</a>',Ut=b(),Nt=v("p"),Nt.textContent="Ignore notes that will not affect Chromium. Additionally, this may not have full support for everything in the documentation above, but this does support some degree of combinations of modifier keys (Ctrl, Alt, etc.) + other keys.",Ot=b(),Pt=v("p"),Pt.textContent="e.g. M, Ctrl+Q, Alt+Shift+Y",Wt=b(),Dt=v("p"),jt=v("input"),_t=b(),Ft=v("button"),Ft.textContent="Set",Bt=b(),zt=v("div"),Rt=v("p"),Rt.textContent="Database",Ht=b(),Jt=v("p"),qt=v("input"),Yt=b(),Vt=v("button"),Vt.textContent="Replace Database",Xt=b(),Kt=v("p"),Qt=v("button"),Qt.textContent="Export Database",x(s,"class",l="stickers has-scroll-y "+(t[18].useLeftToolbar?"has-left-toolbar":"")),x(s,"style",""),x(C,"class","pack"),x(C,"title","Manage subscribed packs"),x(w,"class","packs-wrapper"),x(u,"class","packs packs-controls"),x(L,"class","packs-wrapper"),x(E,"class","packs"),x(E,"style",""),x(p,"class",T="packs-toolbar "+(t[18].useLeftToolbar?"has-scroll-y":"has-scroll-x")),x(O,"class","modal-close"),x(_,"class","tab"),S(_,"is-active",0===t[7]),x(B,"class","tab"),S(B,"is-active",1===t[7]),x(R,"class","tab"),S(R,"is-active",2===t[7]),x(J,"class","tab"),S(J,"is-active",3===t[7]),x(j,"class","tabs"),x(X,"class","inputQuery"),x(X,"type","text"),x(X,"placeholder","Search"),x(V,"class","tab-content avail-packs"),x(V,"style",Q=1===t[7]?"":"display: none;"),x(te,"class","section-title"),x(ue,"class","inputQuery"),x(ue,"type","text"),x(ue,"placeholder","LINE Sticker Pack URL"),x(ge,"class","button is-primary"),x(le,"class","input-grouped"),x(ee,"class","section line-proxy"),x(ye,"class","section-title"),x(Ae,"class","inputQuery"),x(Ae,"type","text"),x(Ae,"placeholder","Remote Pack JSON or Chibisafe Album URL"),x(Le,"class","button is-primary"),x(Ie,"class","input-grouped"),x(Pe,"id","localRemotePackInput"),x(Pe,"type","file"),$(Pe,"display","none"),x(Pe,"accept","application/JSON"),x(De,"class","button has-width-full"),x(Fe,"class","button is-primary has-width-full"),x(be,"class","section remote-packs"),x(Z,"class","tab-content has-scroll-y import"),x(Z,"style",Be=2===t[7]?"":"display: none;"),x(Je,"class","section-title"),x(Xe,"name","disableToasts"),x(Xe,"type","checkbox"),x(et,"name","closeWindowOnSend"),x(et,"type","checkbox"),x(ot,"name","useLeftToolbar"),x(ot,"type","checkbox"),x(dt,"name","hidePackAppendix"),x(dt,"type","checkbox"),x(ft,"name","disableDownscale"),x(ft,"type","checkbox"),x(yt,"name","disableImportedObfuscation"),x(yt,"type","checkbox"),x($t,"name","markAsSpoiler"),x($t,"type","checkbox"),x(He,"class","section settings"),x(Et,"class","section-title"),x(jt,"class","inputQuery"),x(jt,"type","text"),x(Ft,"class","button is-primary"),x(Dt,"class","input-grouped"),x(At,"class","section hotkey"),x(Rt,"class","section-title"),x(qt,"id","replaceDatabaseInput"),x(qt,"type","file"),$(qt,"display","none"),x(qt,"accept","application/JSON"),x(Vt,"class","button is-danger has-width-full"),x(Qt,"class","button is-primary has-width-full"),x(zt,"class","section database"),x(Re,"class","tab-content has-scroll-y misc"),x(Re,"style",Gt=3===t[7]?"":"display: none;"),x(D,"class","stickersConfig"),x(W,"class","modal-content"),x(N,"class","stickersModal"),x(N,"style",Zt=t[5]?"":"display: none;"),x(o,"class","stickerWindow"),x(o,"style",en="bottom: "+t[0].wbottom+"px; right: "+t[0].wright+"px; "+(t[4]?"":"display: none;")),x(a,"id","magane"),x(a,"style",tn=(t[2]?"":`top: ${t[0].top}px; left: ${t[0].left}px;`)+" "+(t[3]?"display: none;":""))},m(e,i){g(e,n,i),m(n,a),m(a,o),m(o,s),on&&on.m(s,null),m(s,r),sn&&sn.m(s,null),m(s,c);for(let e=0;e<cn.length;e+=1)cn[e].m(s,null);m(o,d),m(o,p),m(p,u),m(u,w),m(w,C),m(w,I),ln&&ln.m(w,null),m(p,A),m(p,E),m(E,L);for(let e=0;e<pn.length;e+=1)pn[e].m(L,null);m(o,U),m(o,N),m(N,O),m(N,P),m(N,W),m(W,D),m(D,j),m(j,_),m(j,F),m(j,B),m(j,z),m(j,R),m(j,H),m(j,J),m(D,q),un&&un.m(D,null),m(D,Y),m(D,V),m(V,X),M(X,t[17]),m(V,K),mn&&mn.m(V,null),m(D,G),m(D,Z),m(Z,ee),m(ee,te),m(ee,ne),m(ee,ie),m(ee,ae),m(ee,oe),m(ee,ce),m(ee,le),m(le,ue),M(ue,t[14]),m(le,me),m(le,ge),m(Z,fe),m(Z,be),m(be,ye),m(be,we),m(be,Ce),m(be,Me),m(be,$e),m(be,Se),m(be,Ie),m(Ie,Ae),M(Ae,t[15]),m(Ie,Ee),m(Ie,Le),m(be,Ne),m(be,Oe),m(Oe,Pe),m(Oe,We),m(Oe,De),m(be,je),m(be,_e),m(_e,Fe),m(D,ze),m(D,Re),m(Re,He),m(He,Je),m(He,qe),m(He,Ye),m(Ye,Ve),m(Ve,Xe),Xe.checked=t[18].disableToasts,m(Ve,Ke),m(He,Qe),m(He,Ge),m(Ge,Ze),m(Ze,et),et.checked=t[18].closeWindowOnSend,m(Ze,tt),m(He,nt),m(He,it),m(it,at),m(at,ot),ot.checked=t[18].useLeftToolbar,m(at,st),m(He,rt),m(He,ct),m(ct,lt),m(lt,dt),dt.checked=t[18].hidePackAppendix,m(lt,pt),m(He,ut),m(He,mt),m(mt,gt),m(gt,ft),ft.checked=t[18].disableDownscale,m(gt,ht),m(He,vt),m(He,kt),m(kt,bt),m(bt,yt),yt.checked=t[18].disableImportedObfuscation,m(bt,wt),m(He,xt),m(He,Ct),m(Ct,Mt),m(Mt,$t),$t.checked=t[18].markAsSpoiler,m(Mt,St),m(Re,It),m(Re,At),m(At,Et),m(At,Lt),m(At,Tt),m(At,Ut),m(At,Nt),m(At,Ot),m(At,Pt),m(At,Wt),m(At,Dt),m(Dt,jt),M(jt,t[16]),m(Dt,_t),m(Dt,Ft),m(Re,Bt),m(Re,zt),m(zt,Rt),m(zt,Ht),m(zt,Jt),m(Jt,qt),m(Jt,Yt),m(Jt,Vt),m(zt,Xt),m(zt,Kt),m(Kt,Qt),t[82](n),nn||(an=[y(C,"click",t[50]),y(O,"click",t[53]),y(_,"click",t[54]),y(B,"click",t[55]),y(R,"click",t[56]),y(J,"click",t[57]),y(X,"keyup",t[25]),y(X,"input",t[60]),y(ue,"input",t[65]),y(ge,"click",t[66]),y(Ae,"input",t[67]),y(Le,"click",t[68]),y(Pe,"click",Te),y(Pe,"change",t[36]),y(De,"click",t[69]),y(Fe,"click",t[70]),y(Xe,"change",t[71]),y(et,"change",t[72]),y(ot,"change",t[73]),y(dt,"change",t[74]),y(ft,"change",t[75]),y(yt,"change",t[76]),y($t,"change",t[77]),y(He,"change",t[39]),y(jt,"input",t[78]),y(Ft,"click",t[79]),y(qt,"click",Ue),y(qt,"change",t[41]),y(Vt,"click",t[80]),y(Qt,"click",t[81])],nn=!0)},p(e,t){if(e[8]||e[10]?on&&(on.d(1),on=null):on||(on=de(),on.c(),on.m(s,r)),e[8]&&e[8].length?sn?sn.p(e,t):(sn=pe(e),sn.c(),sn.m(s,c)):sn&&(sn.d(1),sn=null),98567424&t[0]){let n;for(rn=e[10],n=0;n<rn.length;n+=1){const i=re(e,rn,n);cn[n]?cn[n].p(i,t):(cn[n]=he(i),cn[n].c(),cn[n].m(s,null))}for(;n<cn.length;n+=1)cn[n].d(1);cn.length=rn.length}if(262144&t[0]&&l!==(l="stickers has-scroll-y "+(e[18].useLeftToolbar?"has-left-toolbar":""))&&x(s,"class",l),e[23]&&e[23].length&&ln.p(e,t),107584e4&t[0]){let n;for(dn=e[10],n=0;n<dn.length;n+=1){const i=se(e,dn,n);pn[n]?pn[n].p(i,t):(pn[n]=ve(i),pn[n].c(),pn[n].m(L,null))}for(;n<pn.length;n+=1)pn[n].d(1);pn.length=dn.length}262144&t[0]&&T!==(T="packs-toolbar "+(e[18].useLeftToolbar?"has-scroll-y":"has-scroll-x"))&&x(p,"class",T),128&t[0]&&S(_,"is-active",0===e[7]),128&t[0]&&S(B,"is-active",1===e[7]),128&t[0]&&S(R,"is-active",2===e[7]),128&t[0]&&S(J,"is-active",3===e[7]),e[6][0]?un?un.p(e,t):(un=ke(e),un.c(),un.m(D,Y)):un&&(un.d(1),un=null),131072&t[0]&&X.value!==e[17]&&M(X,e[17]),e[6][1]?mn?mn.p(e,t):(mn=xe(e),mn.c(),mn.m(V,null)):mn&&(mn.d(1),mn=null),128&t[0]&&Q!==(Q=1===e[7]?"":"display: none;")&&x(V,"style",Q),16384&t[0]&&ue.value!==e[14]&&M(ue,e[14]),32768&t[0]&&Ae.value!==e[15]&&M(Ae,e[15]),128&t[0]&&Be!==(Be=2===e[7]?"":"display: none;")&&x(Z,"style",Be),262144&t[0]&&(Xe.checked=e[18].disableToasts),262144&t[0]&&(et.checked=e[18].closeWindowOnSend),262144&t[0]&&(ot.checked=e[18].useLeftToolbar),262144&t[0]&&(dt.checked=e[18].hidePackAppendix),262144&t[0]&&(ft.checked=e[18].disableDownscale),262144&t[0]&&(yt.checked=e[18].disableImportedObfuscation),262144&t[0]&&($t.checked=e[18].markAsSpoiler),65536&t[0]&&jt.value!==e[16]&&M(jt,e[16]),128&t[0]&&Gt!==(Gt=3===e[7]?"":"display: none;")&&x(Re,"style",Gt),32&t[0]&&Zt!==(Zt=e[5]?"":"display: none;")&&x(N,"style",Zt),17&t[0]&&en!==(en="bottom: "+e[0].wbottom+"px; right: "+e[0].wright+"px; "+(e[4]?"":"display: none;"))&&x(o,"style",en),13&t[0]&&tn!==(tn=(e[2]?"":`top: ${e[0].top}px; left: ${e[0].left}px;`)+" "+(e[3]?"display: none;":""))&&x(a,"style",tn)},i:e,o:e,d(e){e&&f(n),on&&on.d(),sn&&sn.d(),h(cn,e),ln&&ln.d(),h(pn,e),un&&un.d(),mn&&mn.d(),t[82](null),nn=!1,i(an)}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('/** Magane: main.scss **/\ndiv#magane {\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  position: absolute;\n  z-index: 99;\n}\ndiv#magane button, div#magane input, div#magane select, div#magane label, div#magane span, div#magane p, div#magane a, div#magane li, div#magane ul, div#magane div {\n  font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;\n  color: var(--header-secondary);\n  font-weight: 400;\n  line-height: 1.5;\n  font-size: 16px;\n  text-rendering: optimizeLegibility;\n  -webkit-text-size-adjust: 100%;\n     -moz-text-size-adjust: 100%;\n          text-size-adjust: 100%;\n}\ndiv#magane div.stickerWindow {\n  z-index: 2000;\n  width: 600px;\n  min-height: 200px;\n  position: fixed;\n  background: var(--background-secondary);\n  max-height: 600px;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n  box-shadow: var(--elevation-stroke), var(--elevation-high);\n}\ndiv#magane div.stickerWindow div.stickers {\n  height: 550px !important;\n  margin-bottom: 100px;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers.has-left-toolbar {\n  height: 600px !important;\n  margin-left: 50px;\n}\ndiv#magane div.stickerWindow div.stickers h3.getStarted {\n  text-align: center;\n  padding-top: 40%;\n  pointer-events: none;\n}\ndiv#magane div.stickerWindow div.stickers div.pack {\n  float: left;\n  display: flex;\n  flex-flow: wrap;\n  justify-content: center;\n  padding: 25px;\n  width: 100%;\n  box-sizing: border-box;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span {\n  color: var(--header-secondary);\n  width: 100%;\n  cursor: auto;\n  padding-left: 10px;\n  margin: 10px 0px;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts {\n  padding-left: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts span {\n  padding: 0 0.5em;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100px;\n  height: 100px;\n  float: left;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker .image {\n  cursor: pointer;\n  max-height: 100%;\n  max-width: 100%;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  right: 0;\n  transition: all 0.2s ease;\n  display: none;\n  z-index: 2;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  transition: all 0.2s ease;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite {\n  bottom: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path {\n  fill: #2ECC71;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  top: 0px;\n  transform: rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25) rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  fill: #F04747;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.deleteFavorite {\n  display: block;\n  cursor: pointer;\n}\ndiv#magane div.stickerWindow div.packs-toolbar {\n  position: absolute;\n  bottom: 0;\n  background: var(--background-tertiary);\n  display: flex;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x {\n  width: 100%;\n  height: 50px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs {\n  flex: 1 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs.packs-controls {\n  flex: 0 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs div.packs-wrapper {\n  white-space: nowrap;\n  float: left;\n  width: 100%;\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y {\n  width: 50px;\n  height: 100%;\n  flex-direction: column;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs {\n  flex: 1 1 auto;\n  height: 100%;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs.packs-controls {\n  flex: 0 0 auto;\n  height: auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs div.packs-wrapper {\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack {\n  display: inline-block;\n  height: 40px;\n  width: 40px;\n  margin: 5px;\n  cursor: pointer;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  transition: all 0.2s ease;\n  filter: grayscale(100%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack:hover,\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.pack.active {\n  transform: scale(1.25);\n  filter: grayscale(0%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack > div {\n  background-image: url("/assets/f24711dae4f6d6b28335e866a93e9d9b.png");\n  width: 22px;\n  height: 22px;\n  background-size: 924px 704px;\n  background-repeat: no-repeat;\n  margin-top: 8px;\n  margin-left: 9px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-favorite {\n  background-position: -462px -132px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-plus {\n  background-position: -374px -484px;\n  /* make it greenish */\n  filter: hue-rotate(260deg) brightness(3) contrast(4.5);\n}\ndiv#magane .stickersModal {\n  z-index: 2001;\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  align-items: center;\n  justify-content: center;\n}\ndiv#magane .stickersModal.is-active {\n  display: flex;\n}\ndiv#magane .stickersModal .inputQuery {\n  width: calc(100% - 30px);\n  height: 36px;\n  box-sizing: border-box;\n  margin: 0 15px 10px;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .inputPackIndex {\n  width: 55px;\n  height: 36px;\n  box-sizing: border-box;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-background {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(10, 10, 10, 0.86);\n}\ndiv#magane .stickersModal .modal-content,\ndiv#magane .stickersModal .modal-card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: var(--background-tertiary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs {\n  width: 100%;\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab {\n  color: var(--header-secondary);\n  display: inline-block;\n  border: none;\n  border-top: 0px transparent;\n  border-left: 0px transparent;\n  border-right: 0px transparent;\n  border-width: 1px;\n  border-style: solid;\n  border-bottom-color: var(--header-secondary);\n  padding: 20px;\n  cursor: pointer;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab:hover, div#magane .stickersModal .modal-content .stickersConfig .tabs .tab.is-active {\n  border-bottom-color: var(--interactive-active);\n  color: var(--interactive-active);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content {\n  height: calc(100% - 66px); /* .tabs height */\n  width: 100%;\n  padding: 10px 0;\n  box-sizing: border-box;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs {\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs .packs {\n  height: 100%;\n  width: 100%;\n  padding-bottom: 10px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section {\n  padding: 0 24px 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section .section-title, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section .section-title {\n  font-weight: 800;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section > p:last-of-type, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section > p:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a {\n  /* inherit Discord\'s link color */\n  color: var(--text-link);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a:hover, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a:hover {\n  text-decoration: underline;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped {\n  display: flex;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped input, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped input {\n  margin: 0;\n  width: auto;\n  flex-grow: 1;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped button, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped button {\n  margin-left: 4px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack {\n  height: 75px;\n  width: 100%;\n  float: left;\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  margin-bottom: 5px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  flex: 0 0 auto;\n  min-width: 75px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  flex: 1 0 auto;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action.is-tight button {\n  width: auto;\n  padding-right: 0.5em;\n  padding-left: 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack {\n  width: 36px;\n  height: 36px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before, div#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index {\n  padding-top: 20px;\n  text-align: left;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  height: 75px;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle {\n  padding: 20px;\n  cursor: move;\n  padding-top: 30px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle span {\n  background: #555;\n  height: 2px;\n  width: 100%;\n  display: block;\n  margin-bottom: 6px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  padding-top: 20px;\n  text-align: right;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info {\n  flex: 1 1 auto;\n  padding: 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span {\n  display: block;\n  width: 100%;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span:nth-of-type(1) {\n  font-weight: bold;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(1) {\n  padding: 0 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(2) {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview img {\n  height: 100%;\n  width: 100%;\n}\ndiv#magane .stickersModal .modal-close {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  background-color: rgba(10, 10, 10, 0.2);\n  border: none;\n  border-radius: 290486px;\n  cursor: pointer;\n  display: inline-block;\n  flex-grow: 0;\n  flex-shrink: 0;\n  font-size: 0;\n  outline: none;\n  vertical-align: top;\n  background: none;\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  height: 32px;\n  max-height: 32px;\n  max-width: 32px;\n  min-height: 32px;\n  min-width: 32px;\n  width: 32px;\n  z-index: 1;\n}\ndiv#magane .stickersModal .modal-close:before, div#magane .stickersModal .modal-close:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-close:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-close:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-close:hover, div#magane .stickersModal .modal-close:focus {\n  background-color: rgba(10, 10, 10, 0.3);\n}\ndiv#magane .button {\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  box-shadow: none;\n  display: inline-flex;\n  font-size: 1rem;\n  padding: calc(0.375em - 1px) 0.75em;\n  position: relative;\n  vertical-align: top;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  justify-content: center;\n  text-align: center;\n  white-space: nowrap;\n  border-color: transparent;\n  color: var(--header-secondary);\n  background-color: var(--background-secondary);\n  width: 62px; /* consistent width */\n}\ndiv#magane .button.is-danger {\n  color: #ffffff;\n  border-color: rgba(240, 71, 71, 0.3);\n  background: #f04747;\n}\ndiv#magane .button:hover, div#magane .button.is-primary:hover {\n  transform: scale3d(1.1, 1.1, 1.1);\n}\ndiv#magane .button.has-width-full {\n  width: 100%;\n}\ndiv#magane .button.has-width-full:hover {\n  /* TODO: Figure out how to do a more consistent scaling,\n    regardless of the button\'s dynamic size. */\n  transform: scale3d(1.04, 1.04, 1.04);\n}\ndiv#magane .has-scroll-x {\n  overflow-x: overlay;\n}\ndiv#magane .has-scroll-y {\n  overflow-y: overlay;\n}\ndiv#magane ::-webkit-scrollbar {\n  /* Let\'s make the scrollbars pretty */\n  width: 6px;\n  height: 6px;\n}\ndiv#magane ::-webkit-scrollbar-track {\n  margin: 0;\n  background: transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-track-piece {\n  border: 0 solid transparent;\n  background: transparent;\n  margin: 0;\n}\ndiv#magane ::-webkit-scrollbar-thumb {\n  background: rgba(105, 96, 128, 0.5);\n  border: 0 solid transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-thumb:hover {\n  background: rgba(105, 96, 128, 0.75);\n}\ndiv#magane ::-webkit-scrollbar-thumb:active {\n  background: #696080;\n}\n\ndiv#maganeButton.channel-textarea-stickers {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\ndiv#maganeButton.channel-textarea-stickers:hover, div#maganeButton.channel-textarea-stickers.active {\n  filter: brightness(1.35);\n}\ndiv#maganeButton img.channel-textarea-stickers-content {\n  width: 24px;\n  height: 24px;\n  padding: 4px;\n  margin-left: 2px;\n  margin-right: 2px;\n}');const Ee=/^(startswith|emojis|custom)-/,Le=e=>e.target.select(),Te=e=>e.stopPropagation(),Ue=e=>e.stopPropagation();function Ne(e,t,n){window.magane={};const i={},a={top:0,left:0};let o=null,s=null,r=null,c=null,l=null,d=!1,p="",u=!1,m=!1;const g={};let f=null,h=[];const v={};let k=[],b=[],y=[],w=[];const x={};let C=null,M=null,$=null,S={},I=!1,A=null,E=null,L=null;const N={},O={disableToasts:!1,closeWindowOnSend:!1,disableDownscale:!1,useLeftToolbar:!1,disableImportedObfuscation:!1,markAsSpoiler:!1,hidePackAppendix:!1,hotkey:null},W=Object.freeze(Object.assign({},O)),D=["magane.available","magane.subscribed","magane.favorites","magane.settings"],j=(e,t="log")=>(t=["log","info","warn","error"].includes(t)?t:"log",console[t]("%c[Magane]%c","color: #3a71c1; font-weight: 700","",e)),_=(e,t={})=>{t.nolog&&!O.disableToasts||j(e,t.type),O.disableToasts||BdApi.showToast(e,t)},F=(e,t={})=>(t.type="info",_(e,t)),B=(e,t={})=>(t.type="success",_(e,t)),z=(e,t={})=>(t.type="error",_(e,t)),R=(e,t={})=>(t.type="warn",_(e,t)),H=()=>{l&&l.$destroy()},J=async()=>{L||(L=new ResizeObserver(e=>{for(const t of e){if(!t.contentRect)return;if(t.contentRect.width||t.contentRect.height)return;J()}})),document.body.contains(r)||(L.disconnect(),H(),r=await((e,t)=>{let n;return t&&j(`Waiting for ${t}â€¦`),new Promise(t=>{(n=()=>{const i=document.querySelector(e);if(i)return delete N[e],t(i);N[e]=setTimeout(n,500)})()})})('[class^="channelTextArea-"]:not([class*="channelTextAreaDisabled"])',"textarea"),L.observe(r)),l&&document.body.contains(l.element)||(()=>{const e=r.querySelector('[class^="buttons"]');e&&(l=new Z({target:e,anchor:e.firstElementChild}),l.$on("click",()=>ce()),l.$on("grabPacks",()=>V()))})()},q=(e,t)=>{A.setItem(e,JSON.stringify(t))},Y=()=>{const e=A.getItem("magane.settings");if(e)try{const t=JSON.parse(e);for(const e of Object.keys(O))void 0!==t[e]&&null!==t[e]&&n(18,O[e]=t[e],O);n(16,$=O.hotkey),xe()}catch(e){console.error(e)}},V=async()=>{const e=await fetch("https://magane.moe/api/packs"),t=await e.json();p=t.baseURL;const i=A.getItem("magane.available");if(i)try{const e=JSON.parse(i),t=e.filter(e=>"object"==typeof e&&void 0!==e.id&&Ee.test(e.id));e.length!==t.length&&q("magane.available",t),t.forEach(e=>{n(13,x[e.id]=e,x)}),k.push(...t)}catch(e){console.error(e)}k.push(...t.packs),k=k,n(12,w=k);const a=A.getItem("magane.subscribed");if(a)try{n(10,b=JSON.parse(a));for(const e of b)y.push(e.id);b.forEach(e=>{Ee.test(e.id)&&n(13,x[e.id]=e,x)})}catch(e){console.error(e)}const o=A.getItem("magane.favorites");if(o)try{n(8,h=JSON.parse(o).filter(e=>{if(v[e.pack])return!0;const t=k.findIndex(t=>t.id===e.pack);return-1!==t?(n(9,v[e.pack]={name:k[t].name},v),!0):void 0}))}catch(e){console.error(e)}},X=e=>{-1===b.findIndex(t=>t.id===e.id)&&(n(10,b=[...b,e]),n(11,y=[...y,e.id]),q("magane.subscribed",b),j("Subscribed to pack > "+e.name))},K=e=>{for(let t=0;t<b.length;t++)if(b[t].id===e.id)return b.splice(t,1),y.splice(t,1),n(10,b),n(11,y),j("Unsubscribed from pack > "+e.name),void q("magane.subscribed",b)},Q=(e,t,n,i)=>{let a;if("number"==typeof e)a=`${p}${e}/${t}`,n||(a=a.replace(/\.(gif|png)$/i,"_key.$1"));else if(e.startsWith("startswith-")){a="https://stickershop.line-scdn.net/stickershop/v1/sticker/%id%/android/sticker.png;compress=true".replace(/%id%/g,t.split(".")[0]);let i=n?"&h=180p":"&h=100p";x[e].animated&&(a=a.replace(/sticker(@2x)?\.png/,"sticker_animation$1.png"),i+="&output=gif"),O.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("emojis-")){a="https://stickershop.line-scdn.net/sticonshop/v1/sticon/%pack%/android/%id%.png".replace(/%pack%/g,e.split("-")[1]).replace(/%id%/g,t.split(".")[0]);let i=n?"":"&h=100p";x[e].animated&&(a=a.replace(/\.png/,"_animation.png"),i+="&output=gif"),O.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("custom-")){if(!n&&Array.isArray(x[e].thumbs)){if(x[e].thumbs.length&&("number"!=typeof i&&(i=x[e].files.findIndex(e=>e===t)),a=i>=0?x[e].thumbs[i]:null),!a)return"/assets/eedd4bd948a0da6d75bf5304bff4e17f.svg"}else a=t;"string"==typeof x[e].template&&(a=x[e].template.replace(/%pack%/g,e.replace("custom-","")).replace(/%id%/g,a))}return a},G=async(e,t)=>{if(I)return R("Sending sticker is still on cooldownâ€¦",{timeout:1e3});I=!0;try{const n=i.userStore.getCurrentUser().id,a=i.selectedChannelStore.getChannelId(),o=i.channelStore.getChannel(a);if(!((e,t,n)=>{if(!t)return!1;if(!e||!n.guild_id)return!0;e=Array.isArray(e)?e:[e];for(const a of e)if(!i.permissionRoleUtils.can({permission:a,user:t,context:n})&&!i.computePermissions.can(a,t,n))return!1;return!0})([i.discordPermissions.ATTACH_FILES,i.discordPermissions.SEND_MESSAGES],n,o))return I=!1,z("You do not have permission to attach files in this channel.");_("Sendingâ€¦",{nolog:!0}),O.closeWindowOnSend&&ce(!1);const s=Q(e,t,!0);j("Fetching sticker from remote: "+s);const c=await fetch(s,{cache:"force-cache"}),l=await c.blob();let d=t;if("string"==typeof e)if(x[e].animated&&(e.startsWith("startswith-")||e.startsWith("emojis-")))d=d.replace(/\.png$/i,".gif"),R("Animated stickers/emojis from LINE Store currently cannot be animated.");else if(e.startsWith("custom-"))if(O.disableImportedObfuscation)d=t;else{const e=t.match(/(\.\w+)$/);d=`${Date.now().toString()}${e?e[1]:""}`}O.markAsSpoiler&&(d="SPOILER_"+d);const p=new File([l],d);j(`Sending sticker as ${d}â€¦`);let u="";const m=(()=>{let e=r[Object.keys(r).find(e=>e.startsWith("__reactInternalInstance")||e.startsWith("__reactFiber"))];if(!e)return null;for(;!e.stateNode||!e.stateNode.constructor||"ChannelTextAreaForm"!==e.stateNode.constructor.displayName;)e=e.return;return e})();if(m)u=m.stateNode.state.textValue;else if(r){j("Unable to fetch text area of chat input, attempting workaroundâ€¦","warn");let e=r.querySelector("span");e||(e=r),u=e.innerText}else j("Unable to fetch text area of chat input, workaround unavailableâ€¦","warn");i.messageUpload.upload({channelId:a,file:p,message:{content:u}}),m&&m.stateNode.setState({textValue:"",richValue:i.richUtils.toRichValue("")})}catch(e){console.error(e),z("Unexpected error occurred when sending sticker. Check your console for details.")}I=!1},ee=(e,t)=>{if(-1!==h.findIndex(n=>n.pack===e&&n.id===t))return;if(!v[e]){const t=b.find(t=>t.id===e);t&&n(9,v[e]={name:t.name},v)}const i={pack:e,id:t};n(8,h=[...h,i]),q("magane.favorites",h),j(`Favorited sticker > ${t} of pack ${e}`),B("Favorited!",{nolog:!0})},te=(e,t)=>{const i=h.findIndex(n=>n.pack===e&&n.id===t);-1!==i&&(h.splice(i,1),n(8,h),h.some(t=>t.pack===e)||delete v[e],q("magane.favorites",h),j(`Unfavorited sticker > ${t} of pack ${e}`),F("Unfavorited!",{nolog:!0}))},ne=()=>{const e="string"==typeof E&&E.trim().toLowerCase();n(12,w=e?k.filter(t=>t.name.toLowerCase().indexOf(e)>=0||String(t.id).indexOf(e)>=0):k)},ae=(e,t,i={})=>{let a,o=[];const s=A.getItem("magane.available");if(s&&(o=JSON.parse(s),o))if(a=o.findIndex(t=>t.id===e),a>=0){if(i.overwrite&&i.partial)t=Object.assign(o[a],t);else if(!i.overwrite)throw new Error(`Pack with ID ${e} already exist.`)}else if(i.overwrite)throw new Error(`Cannot overwrite missing pack with ID ${e}.`);if(!t.count||!t.files.length)throw new Error("Invalid stickers count.");const r={pack:t};if(Ee.test(e)&&n(13,x[e]=t,x),a>=0){o[a]=t;const n=k.findIndex(t=>t.id===e);-1!==n&&(k[n]=t)}else o.unshift(t),k.unshift(t),k=k;return q("magane.available",o),ne(),i.overwrite?j("Overwritten pack with ID "+e):j("Added a new pack with ID "+e),r},oe=async()=>{let e=!1;const t=JSON.parse(A.getItem("magane.favorites")),n=JSON.parse(A.getItem("magane.subscribed"));t&&t.forEach(t=>{if("number"==typeof t.pack)return;const n=parseInt(t.pack,10);isNaN(t.pack)||(t.pack=n,e=!0)}),n&&n.forEach(t=>{if("number"==typeof t.id)return;const n=parseInt(t.id,10);isNaN(t.id)||(t.id=n,e=!0)}),e&&(F("Found packs/stickers to migrate, migrating now..."),A.setItem("magane.favorites",JSON.stringify(t)),A.setItem("magane.subscribed",JSON.stringify(n)),await V(),B("Migration successful."))},se=(e,t,n)=>{const i="object"==typeof e[0];if(!i&&"number"==typeof n&&e.length<n)throw new Error(`This function expects at least ${n} parameter(s).`);const a={};for(let n=0;n<t.length;n++)a[t[n]]=i?e[0][t[n]]:e[n];return a};window.magane.appendPack=(...e)=>{let{name:t,firstid:n,count:i,animated:a}=se(e,["name","firstid","count","animated"],3);if(n=Number(n),isNaN(n)||!isFinite(n)||n<0)throw new Error("Invalid first ID.");i=Math.max(Math.min(Number(i),200),0)||0;const o="startswith-"+n,s=[];for(let e=n;e<n+i;e+=1)s.push(e+".png");return ae(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},window.magane.appendEmojisPack=(...e)=>{let{name:t,id:n,count:i,animated:a}=se(e,["name","id","count","animated"],3);i=Math.max(Math.min(Number(i),200),0)||0;const o="emojis-"+n,s=[];for(let e=0;e<i;e+=1)s.push(String(e+1).padStart(3,"0")+".png");return ae(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},window.magane.appendCustomPack=(...e)=>{let{name:t,id:n,count:i,animated:a,template:o,files:s,thumbs:r}=se(e,["name","id","count","animated","template","files","thumbs"],5);i=Math.max(Number(i),0)||0;const c="custom-"+n;if(Array.isArray(s)){if(!s.length)throw new Error('"files" array cannot be empty.')}else{if(!o)throw new Error('"template" must be set if not using custom "files" array.');s=[];for(let e=1;e<=i;e+=1)s.push(e+(a?".gif":".png"))}return ae(c,{name:t,count:i,id:c,animated:a?1:null,files:s,thumbs:r,template:o})},window.magane.editPack=(...e)=>{const{id:t,props:n}=se(e,["id","props"],2);if("object"!=typeof n)throw new Error('"props" must be an object.');return ae(t,n,{overwrite:!0,partial:!0})},window.magane.deletePack=e=>{if(!e&&!Ee.test(e))throw new Error('Pack ID must start with either "startswith-", "emojis-", or "custom-".');const t=A.getItem("magane.available");if(t)try{const i=JSON.parse(t),a=i.findIndex(t=>t.id===e);if(-1===a)throw new Error("Unable to find pack with ID "+e);n(8,h=h.filter(t=>t.pack!==e)),delete v[e],q("magane.favorites",h);const o=b.find(t=>t.id===e);o&&K(o),i.splice(a,1),q("magane.available",i);const s=k.findIndex(t=>t.id===e);return-1!==s&&(k.splice(s,1),k=k,ne()),delete x[e],j(`Removed pack with ID ${e} (old index: ${a})`),!0}catch(e){throw e}},window.magane.searchPacks=e=>{if(!e)throw new Error("Keyword required");e=e.toLowerCase();const t=A.getItem("magane.available");if(t)try{return JSON.parse(t).filter(t=>t.name.toLowerCase().indexOf(e)>=0||t.id.indexOf(e)>=0)}catch(e){throw e}};T(async()=>{try{_("Loading Maganeâ€¦"),i.channelStore=BdApi.findModuleByProps("getChannel","getDMFromUserId"),i.selectedChannelStore=BdApi.findModuleByProps("getLastSelectedChannelId"),i.userStore=BdApi.findModuleByProps("getCurrentUser","getUser"),i.discordConstants=BdApi.findModuleByProps("Permissions","ActivityTypes","StatusTypes"),i.discordPermissions=i.discordConstants.Permissions,i.permissionRoleUtils=BdApi.findModuleByProps("can","ALLOW","DENY"),i.computePermissions=BdApi.findModuleByProps("computePermissions"),i.messageUpload=BdApi.findModuleByProps("upload","instantBatchUpload"),i.richUtils=BdApi.findModuleByProps("toRichValue","createEmptyState"),(()=>{const e=document.createElement("iframe");document.head.append(e),A=Object.getOwnPropertyDescriptor(e.contentWindow.frames,"localStorage").get.call(window),e.remove()})(),Y(),await V(),await oe(),B("Magane is now ready!"),(async()=>{s=o.parentNode.parentNode,n(2,c=s===document.body),j(c?"Magane is mounted with MaganeBD.":"Magane is mounted with legacy method."),J()})()}catch(e){console.error(e),z("Unexpected error occurred when initializing Magane. Check your console for details.")}}),U(()=>{document.removeEventListener("click",re),document.removeEventListener("keyup",we),H();for(const e of Object.values(N))clearTimeout(e);L&&L.disconnect(),delete window.magane,j("Internal components cleaned up.")});const re=e=>{const t=o.querySelector(".stickerWindow");if(t){const{x:n,y:i,width:a,height:o}=t.getBoundingClientRect();if(e.target){if(l&&l.element.contains(e.target))return;const t=document.querySelectorAll('[class^="layerContainer-"]');if(t.length&&Array.from(t).some(t=>t.contains(e.target)))return}e.clientX<=n+a&&e.clientX>=n&&e.clientY<=i+o&&e.clientY>=i||ce()}},ce=e=>{if(!document.body.contains(o))return z("Oh no! Magane was unexpectedly destroyed. Please reload Magane :(",{timeout:6e3});const t=void 0===e?!u:e;t?((()=>{const e=r.querySelector('[class^="buttons"]');if(!e)return;const t=e.getBoundingClientRect();if(j("Updating window's positionâ€¦"),n(0,a.wbottom=s.clientHeight-t.top+8,a),n(0,a.wright=s.clientWidth-t.right-6,a),!c){const e=s.getBoundingClientRect();n(0,a.wbottom+=e.top,a),n(0,a.wright+=e.left,a)}})(),document.addEventListener("click",re)):document.removeEventListener("click",re),n(4,u=t),l.active=t},le=()=>{const e=!m;e&&null===f&&de(0),n(5,m=e)},de=e=>{n(7,f=e),g[f]||n(6,g[f]=!0,g)},pe=e=>{ie({element:e.replace(/([.])/g,"\\$1"),container:o.querySelector(".stickers")})},ue=e=>{try{const t=x[e].name;window.magane.deletePack(e)&&B(`Removed pack ${t}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),z(e.toString(),{nolog:!0})}},me=async(e,t)=>{const n={id:"",name:"",files:[],count:0,remoteType:0};if(t)for(const e of Object.keys(t))n[e]=t[e];switch(n.remoteType){case 1:n.name=String(e.name),n.thumbs=[];for(let t=0;t<e.files.length;t++)n.files.push(e.files[t].url),n.thumbs.push(e.files[t].thumb||null);break;case 0:default:if(["id","name","files"].some(t=>!e[t]))throw new Error("Invalid config. Some required fields are missing.");if(n.id=String(e.id),n.name=String(e.name),e.files.some(e=>"string"!=typeof e))throw new Error('Invalid "files" array. Some values are not string.');if(n.files=e.files,Array.isArray(e.thumbs)){if(e.thumbs.some(e=>"string"!=typeof e&&null!==e))throw new Error('Invalid "thumbs" array. Some values are neither string nor null.');n.thumbs=e.thumbs}n.description=e.description?String(e.description):null,n.homeUrl=e.homeUrl?String(e.homeUrl):null,n.template=e.template?String(e.template):null,e.updateUrl&&(n.updateUrl=String(e.updateUrl))}return n.count=n.files.length,Array.isArray(n.thumbs)&&n.thumbs.every(e=>null===e)&&(n.thumbs=[]),n},ge=async(e,t=!1,n)=>{const i={updateUrl:e};if(t)i.remoteType=n;else{if(!e||!/^https?:\/\//.test(e))throw new Error("URL must have HTTP(s) protocol.");const t=[/^(.+:\/\/)(.+)\/a\/([^/\s]+)/];let n={index:-1};for(let i=0;i<t.length;i++){const a=e.match(t[i]);a&&!a.some(e=>void 0===e)&&(n={index:i,result:a})}switch(n.index){case 0:i.id=`${n.result[2]}-${n.result[3]}`,i.homeUrl=e,i.updateUrl=`${n.result[1]}${n.result[2]}/api/album/${n.result[3]}`,i.remoteType=1}}const a=await fetch(i.updateUrl,{cache:"no-cache"}),o=await a.json();if(!o)throw new Error("Unable to parse data. Check your console for details.");return me(o,i)},fe=async(e,t=!1)=>{try{if(!x[e]||!x[e].updateUrl)return;t||_("Updating pack informationâ€¦",{nolog:!0});const i=await ge(x[e].updateUrl,"number"==typeof x[e].remoteType,x[e].remoteType);i.id=e;const a=ae(i.id,i,{overwrite:!0});n(8,h=h.filter(t=>t.pack!==e||-1!==a.pack.files.findIndex(e=>e===t.id))),h.some(t=>t.pack===e)?n(9,v[e].name=a.pack.name,v):delete v[e],q("magane.favorites",h);const o=b.findIndex(t=>t.id===e);return-1!==o&&(n(10,b[o]=a.pack,b),n(11,y[o]=a.pack.id,y),q("magane.subscribed",b)),t||B(`Updated pack ${a.pack.name}.`,{nolog:!0,timeout:6e3}),a}catch(e){console.error(e),z(e.toString(),{nolog:!0})}},he=async()=>{if(C)try{const e=C.match(/^(https?:\/\/store\.line\.me\/((sticker|emoji)shop)\/product\/)?([a-z0-9]+)/);if(!e)return z("Unsupported LINE Store URL or ID.");let t;if(_("Loading pack informationâ€¦",{nolog:!0}),"emoji"===e[3]){const n=e[4],i=await fetch("https://magane.moe/api/proxy/emoji/"+n),a=await i.json();t=window.magane.appendEmojisPack({name:a.title,id:a.id,count:a.len,animated:a.hasAnimation||null})}else{const n=Number(e[4]);if(isNaN(n)||n<0)return z("Unsupported LINE Stickers ID.");const i=await fetch("https://magane.moe/api/proxy/sticker/"+n),a=await i.json();t=window.magane.appendPack({name:a.title,firstid:a.first,count:a.len,animated:a.hasAnimation})}B(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3}),n(14,C=null)}catch(e){console.error(e),z(e.toString(),{nolog:!0})}},ve=(e,t)=>{const n=e+"\n\n**Please continue only if you trust this remote pack.**";BdApi.showConfirmationModal("Import Remote Pack",n,{confirmText:"Import",cancelText:"Cancel",danger:!0,onConfirm:t})},ke=()=>{M&&ve("URL: "+M,async()=>{try{_("Loading pack informationâ€¦",{nolog:!0});const e=await ge(M);e.id="custom-"+e.id;const t=ae(e.id,e);B(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3}),n(15,M=null)}catch(e){console.error(e),z(e.toString(),{nolog:!0})}})},be=()=>{document.getElementById("localRemotePackInput").click()},ye=()=>{const e=Object.values(x).filter(e=>e.updateUrl).map(e=>e.id);if(!e.length)return R("You do not have any remote packs that can be updated.");const t=`**Please confirm that you want to update __${e.length}__ remote pack${1===e.length?"":"s"}.**`;BdApi.showConfirmationModal(`Update ${e.length} remote pack${1===e.length?"":"s"}`,t,{confirmText:"Import",cancelText:"Cancel",danger:!0,onConfirm:async()=>{try{for(let t=0;t<e.length;t++){_(`Updating pack ${t+1} out of ${e.length}â€¦`,{nolog:!0,timeout:1e3});if(!await fe(e[t],!0))break}B("Updates completed.",{nolog:!0})}catch(e){R("Updates cancelled due to unexpected errors.",{nolog:!0})}}})},we=e=>{for(const t in S)if("key"===t){if(S[t]!==e[t].toLocaleLowerCase())return}else if(S[t]!==e[t])return;e.preventDefault(),l&&document.body.contains(l.element)&&ce()},xe=e=>{let t;if($){const e=$.split("+").map(e=>e.trim());t={};for(const n of e)if(/alt/i.test(n))t.altKey=!0;else if(/meta/i.test(n))t.metaKey=!0;else if(/shift/i.test(n))t.shiftKey=!0;else if(/(control|ctrl|ctl)/i.test(n))t.ctrlKey=!0;else{if(t.key)return z("Invalid hotkey. If used with modifier keys, only support 1 other key.",{timeout:6e3});t.key=n.toLocaleLowerCase()}S=t,document.addEventListener("keyup",we)}else S=null,document.removeEventListener("keyup",we);e&&(n(18,O.hotkey=$,O),j("settings['hotkey'] = "+O.hotkey),q("magane.settings",O),B(S?"Hotkey saved.":"Hotkey cleared."))},Ce=()=>{document.getElementById("replaceDatabaseInput").click()},Me=()=>{const e=document.createElement("a");let t="";try{_("Exporting databaseâ€¦");const n={};for(const e of D){const t=A.getItem(e);null!==t&&(n[e]=JSON.parse(t))}const i=JSON.stringify(n),a=new Blob([i]);t=window.URL.createObjectURL(a),e.href=t,e.download=`magane.database.${(new Date).toISOString()}.json`,e.click()}catch(e){console.error(e),z("Unexpected error occurred. Check your console for details.")}e.remove(),t&&window.URL.revokeObjectURL(t)};return[a,o,c,d,u,m,g,f,h,v,b,y,w,x,C,M,$,E,O,X,K,Q,G,ee,te,ne,e=>`<span class="counts"><span>â€“</span>${e} sticker${1===e?"":"s"}</span>`,e=>{let t=""+e;return"string"==typeof e&&(e.startsWith("startswith-")?t="LINE "+e.replace("startswith-",""):e.startsWith("emojis-")?t="LINE Emojis "+e.replace("emojis-",""):e.startsWith("custom-")&&(t=e.replace("custom-",""))),`<span class="appendix"><span>â€“</span><span title="ID: ${e}">${t}</span></span>`},le,de,pe,e=>{const t=e.target.value.trim();if(13!==e.keyCode||!t.length)return;let i=Number(t);if(isNaN(i)||i<1||i>b.length)return z(`New position must be â‰¥ 1 and â‰¤ ${b.length}.`);i--;let a=e.target.dataset.pack;if(void 0===a)return;Ee.test(a)||(a=Number(a));const o=b.findIndex(e=>e.id===a);if(o===i)return;const s=b.splice(o,1);y.splice(o,1),b.splice(i,0,s[0]),y.splice(i,0,s[0].id),e.target.blur(),e.target.value=String(o),n(10,b),n(11,y),q("magane.subscribed",b),B(`Moved pack from position ${o+1} to ${i+1}.`)},ue,fe,he,ke,e=>{const{files:t}=e.target;if(!t.length)return!1;const n=t[0],i=new FileReader;i.onload=t=>{let i;e.target.value="";try{i=JSON.parse(t.target.result)}catch(e){console.error(e),z("The selected file is not a valid JSON file.")}ve("File: "+n.name,async()=>{try{const e=await me(i);e.id="custom-"+e.id;const t=ae(e.id,e);B(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),z(e.toString(),{nolog:!0})}})},j(`Reading ${n.name}â€¦`),i.readAsText(n)},be,ye,e=>{const{name:t}=e.target;if(!t)return!1;j(`settings['${t}'] = ${O[t]}`),q("magane.settings",O),B("Settings saved!",{nolog:!0})},xe,e=>{const{files:t}=e.target;if(!t.length)return!1;const i=new FileReader;i.onload=t=>{let i;e.target.value="";try{i=JSON.parse(t.target.result)}catch(e){console.error(e),z("The selected file is not a valid JSON file.")}let a="This database contains the following data:";const o=[],s=[];for(const e of D)if(void 0===i[e]||null===i[e])s.push(e);else{let t=null;if(Array.isArray(i[e]))t=i[e].length;else try{t=Object.keys(i[e]).length}catch(e){}let n="";null!==t&&(n=` has **${t}** item${1===t?"":"s"}`),a+=`\n**${e}**${n}`,o.push(e)}o.length||(a="**This is an empty database file.**"),s.length&&(a+=`\nThese missing or invalid field${1===s.length?"":"s"} **will be removed**:`,a+="\n"+s.join("\n")),a+="\n**Please continue only if you trust this database file.**",BdApi.showConfirmationModal("Replace Database",a.replace(/\n/g,"\n\n"),{confirmText:"Replace",cancelText:"Cancel",danger:!0,onConfirm:async()=>{for(const e of o)q(e,i[e]);for(const e of s)A.removeItem(e);n(3,d=!0),_("Reloading Magane databaseâ€¦"),Object.assign(O,W),Y(),await V(),await oe(),B("Magane is now ready!"),n(3,d=!1)}})},j(`Reading ${t[0].name}â€¦`),i.readAsText(t[0])},Ce,Me,(e,t,n)=>n.pack===e.id&&n.id===t,e=>G(e.pack,e.id),e=>te(e.pack,e.id),(e,t)=>G(e.id,t),(e,t)=>ee(e.id,t),(e,t)=>te(e.id,t),()=>le(),()=>pe("#pfavorites"),e=>pe("#p"+e.id),()=>le(),()=>de(0),()=>de(1),()=>de(2),()=>de(3),e=>K(e),e=>fe(e.id),function(){E=this.value,n(17,E)},e=>K(e),e=>X(e),e=>fe(e.id),e=>ue(e.id),function(){C=this.value,n(14,C)},()=>he(),function(){M=this.value,n(15,M)},()=>ke(),()=>be(),()=>ye(),function(){O.disableToasts=this.checked,n(18,O)},function(){O.closeWindowOnSend=this.checked,n(18,O)},function(){O.useLeftToolbar=this.checked,n(18,O)},function(){O.hidePackAppendix=this.checked,n(18,O)},function(){O.disableDownscale=this.checked,n(18,O)},function(){O.disableImportedObfuscation=this.checked,n(18,O)},function(){O.markAsSpoiler=this.checked,n(18,O)},function(){$=this.value,n(16,$)},()=>xe(!0),()=>Ce(),()=>Me(),function(e){P[e?"unshift":"push"](()=>{o=e,n(1,o)})}]}class Oe extends K{constructor(e){super(),X(this,e,Ne,Ae,o,{},null,[-1,-1,-1,-1,-1])}}const Pe=()=>{console.log("[MAGANE] > checkDOM()");let e=document.getElementById("maganeContainer");if(e)return;const t=document.querySelector("[class*=baseLayer] > [class*=container] > [class*=base]");t?(console.log("[MAGANE] > DOM ready, injecting!"),e=document.createElement("div"),e.id="maganeContainer",t.insertAdjacentElement("afterbegin",e),window.MAGANE_APP=new Oe({target:e})):setTimeout(()=>Pe(),500)};"object"==typeof BdApi?Pe():console.error("This plugin does not work outside of BetterDiscord!")}();
//# sourceMappingURL=magane.min.js.map
