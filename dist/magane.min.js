!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function r(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}const c="undefined"!=typeof window;let l=c?()=>window.performance.now():()=>Date.now(),d=c?e=>requestAnimationFrame(e):e;const p=new Set;function u(e){p.forEach(t=>{t.c(e)||(p.delete(t),t.f())}),0!==p.size&&d(u)}function h(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function b(){return k(" ")}function y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function w(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function E(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function I(e,t){e.value=null==t?"":t}function $(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function S(e,t,n){e.classList[n?"add":"remove"](t)}class A{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){var i;this.e||(this.is_svg?this.e=(i=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=v(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)m(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(g)}}let C;function L(e){C=e}function T(){if(!C)throw new Error("Function called outside component initialization");return C}function N(e){T().$$.on_mount.push(e)}function R(e){T().$$.on_destroy.push(e)}function M(){const e=T();return(t,n,{cancelable:i=!1}={})=>{const a=e.$$.callbacks[t];if(a){const o=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n,i,t),a}(t,n,{cancelable:i});return a.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const O=[],D=[],P=[],U=[],F=Promise.resolve();let _=!1;function W(e){P.push(e)}const j=new Set;let B=0;function z(){const e=C;do{for(;B<O.length;){const e=O[B];B++,L(e),G(e.$$)}for(L(null),O.length=0,B=0;D.length;)D.pop()();for(let e=0;e<P.length;e+=1){const t=P[e];j.has(t)||(j.add(t),t())}P.length=0}while(O.length);for(;U.length;)U.pop()();_=!1,j.clear(),L(e)}function G(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}const H=new Set;function V(e,t){e&&e.i&&(H.delete(e),e.i(t))}function X(e,t){e.d(1),t.delete(e.key)}function q(e,t){-1===e.$$.dirty[0]&&(O.push(e),_||(_=!0,F.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(o,s,r,c,l,d,p,u=[-1]){const h=C;L(o);const m=o.$$={fragment:null,ctx:null,props:d,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||h.$$.root};p&&p(m.root);let f=!1;if(m.ctx=r?r(o,s.props||{},(e,t,...n)=>{const i=n.length?n[0]:t;return m.ctx&&l(m.ctx[e],m.ctx[e]=i)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](i),f&&q(o,e)),t}):[],m.update(),f=!0,i(m.before_update),m.fragment=!!c&&c(m.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);m.fragment&&m.fragment.l(e),e.forEach(g)}else m.fragment&&m.fragment.c();s.intro&&V(o.$$.fragment),function(e,n,o,s){const{fragment:r,on_mount:c,on_destroy:l,after_update:d}=e.$$;r&&r.m(n,o),s||W(()=>{const n=c.map(t).filter(a);l?l.push(...n):i(n),e.$$.on_mount=[]}),d.forEach(W)}(o,s.target,s.anchor,s.customElement),z()}L(h)}class J{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function K(t){let n,a,o;return{c(){n=v("div"),n.innerHTML='<img class="channel-textarea-stickers-content" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2224%22%20height%3D%2224%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M18.5%2011c-4.136%200-7.5%203.364-7.5%207.5c0%20.871.157%201.704.432%202.482l9.551-9.551A7.462%207.462%200%200%200%2018.5%2011z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3Cpath%20d%3D%22M12%202C6.486%202%202%206.486%202%2012c0%204.583%203.158%208.585%207.563%209.69A9.431%209.431%200%200%201%209%2018.5C9%2013.262%2013.262%209%2018.5%209c1.12%200%202.191.205%203.19.563C20.585%205.158%2016.583%202%2012%202z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3C%2Fsvg%3E" alt="Magane menu button"/>',x(n,"id","maganeButton"),x(n,"class","channel-textarea-emoji channel-textarea-stickers"),S(n,"active",t[1])},m(e,i){var s;m(e,n,i),t[5](n),a||(o=[y(n,"click",t[6]),y(n,"contextmenu",w((s=t[7],function(e){return e.preventDefault(),s.call(this,e)})))],a=!0)},p(e,[t]){2&t&&S(n,"active",e[1])},i:e,o:e,d(e){e&&g(n),t[5](null),a=!1,i(o)}}}function Q(e,t,n){let{element:i}=t,{active:a=!1}=t,{textArea:o}=t,{lastTextAreaSize:s={}}=t;const r=M(),c=e=>console.log("%c[MaganeButton]%c","color: #3a71c1; font-weight: 700","",e);N(()=>c("Mounted.")),R(()=>c("Destroyed."));return e.$$set=e=>{"element"in e&&n(0,i=e.element),"active"in e&&n(1,a=e.active),"textArea"in e&&n(3,o=e.textArea),"lastTextAreaSize"in e&&n(4,s=e.lastTextAreaSize)},[i,a,r,o,s,function(e){D[e?"unshift":"push"](()=>{i=e,n(0,i)})},e=>r("click",e),e=>r("grabPacks",e)]}class Z extends J{constructor(e){super(),Y(this,e,Q,K,o,{element:0,active:1,textArea:3,lastTextAreaSize:4})}get element(){return this.$$.ctx[0]}set element(e){this.$$set({element:e}),z()}get active(){return this.$$.ctx[1]}set active(e){this.$$set({active:e}),z()}get textArea(){return this.$$.ctx[3]}set textArea(e){this.$$set({textArea:e}),z()}get lastTextAreaSize(){return this.$$.ctx[4]}set lastTextAreaSize(e){this.$$set({lastTextAreaSize:e}),z()}}var ee={$:e=>"string"==typeof e?document.querySelector(e):e,extend:(...e)=>Object.assign(...e),cumulativeOffset(e){let t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}},directScroll:e=>e&&e!==document&&e!==document.body,scrollTop(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollTop=t:e.scrollTop:n?document.documentElement.scrollTop=document.body.scrollTop=t:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollLeft=t:e.scrollLeft:n?document.documentElement.scrollLeft=document.body.scrollLeft=t:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const te={container:"body",duration:500,delay:0,offset:0,easing:function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1},onStart:e,onDone:e,onAborting:e,scrollX:!1,scrollY:!0},ne=e=>{let{offset:t,duration:n,delay:i,easing:a,x:o=0,y:s=0,scrollX:r,scrollY:c,onStart:h,onDone:m,container:g,onAborting:f,element:v}=e;"function"==typeof t&&(t=t());var k=ee.cumulativeOffset(g),b=v?ee.cumulativeOffset(v):{top:s,left:o},y=ee.scrollLeft(g),w=ee.scrollTop(g),x=b.left-k.left+t,E=b.top-k.top+t,I=x-y,$=E-w;let S=!0,A=!1,C=l()+i,L=C+n;function T(e){e||(A=!0,h(v,{x:o,y:s}))}function N(e){!function(e,t,n){r&&ee.scrollLeft(e,n),c&&ee.scrollTop(e,t)}(g,w+$*e,y+I*e)}function R(){S=!1}return function(e){let t;0===p.size&&d(u),new Promise(n=>{p.add(t={c:e,f:n})})}(e=>{if(!A&&e>=C&&T(!1),A&&e>=L&&(N(1),R(),m(v,{x:o,y:s})),!S)return f(v,{x:o,y:s}),!1;if(A){N(0+1*a((e-C)/n))}return!0}),T(i),N(0),R},ie=e=>ne((e=>{let t=ee.extend({},te,e);return t.container=ee.$(t.container),t.element=ee.$(t.element),t})(e));var ae="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var oe={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var se=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i}=oe,a=(t=e.exports={}).re=[],o=t.safeRe=[],s=t.src=[],r=t.t={};let c=0;const l=[["\\s",1],["\\d",n],["[a-zA-Z0-9-]",i]],d=(e,t,n)=>{const i=(e=>{for(const[t,n]of l)e=e.split(t+"*").join(`${t}{0,${n}}`).split(t+"+").join(`${t}{1,${n}}`);return e})(t),d=c++;ae(e,d,t),r[e]=d,s[d]=t,a[d]=new RegExp(t,n?"g":void 0),o[d]=new RegExp(i,n?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${s[r.NUMERICIDENTIFIER]})\\.(${s[r.NUMERICIDENTIFIER]})\\.(${s[r.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${s[r.NUMERICIDENTIFIERLOOSE]})\\.(${s[r.NUMERICIDENTIFIERLOOSE]})\\.(${s[r.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${s[r.NUMERICIDENTIFIER]}|${s[r.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${s[r.NUMERICIDENTIFIERLOOSE]}|${s[r.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${s[r.PRERELEASEIDENTIFIER]}(?:\\.${s[r.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${s[r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[r.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[a-zA-Z0-9-]+"),d("BUILD",`(?:\\+(${s[r.BUILDIDENTIFIER]}(?:\\.${s[r.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${s[r.MAINVERSION]}${s[r.PRERELEASE]}?${s[r.BUILD]}?`),d("FULL",`^${s[r.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${s[r.MAINVERSIONLOOSE]}${s[r.PRERELEASELOOSE]}?${s[r.BUILD]}?`),d("LOOSE",`^${s[r.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",s[r.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),d("XRANGEIDENTIFIER",s[r.NUMERICIDENTIFIER]+"|x|X|\\*"),d("XRANGEPLAIN",`[v=\\s]*(${s[r.XRANGEIDENTIFIER]})(?:\\.(${s[r.XRANGEIDENTIFIER]})(?:\\.(${s[r.XRANGEIDENTIFIER]})(?:${s[r.PRERELEASE]})?${s[r.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${s[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[r.XRANGEIDENTIFIERLOOSE]})(?:${s[r.PRERELEASELOOSE]})?${s[r.BUILD]}?)?)?`),d("XRANGE",`^${s[r.GTLT]}\\s*${s[r.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${s[r.GTLT]}\\s*${s[r.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),d("COERCERTL",s[r.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${s[r.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${s[r.LONETILDE]}${s[r.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${s[r.LONETILDE]}${s[r.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${s[r.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${s[r.LONECARET]}${s[r.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${s[r.LONECARET]}${s[r.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${s[r.GTLT]}\\s*(${s[r.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${s[r.GTLT]}\\s*(${s[r.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${s[r.GTLT]}\\s*(${s[r.LOOSEPLAIN]}|${s[r.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${s[r.XRANGEPLAIN]})\\s+-\\s+(${s[r.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${s[r.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[r.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}));se.re,se.safeRe,se.src,se.t,se.tildeTrimReplace,se.caretTrimReplace,se.comparatorTrimReplace;const re=Object.freeze({loose:!0}),ce=Object.freeze({});var le=e=>e?"object"!=typeof e?re:e:ce;const de=/^[0-9]+$/,pe=(e,t)=>{const n=de.test(e),i=de.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var ue={compareIdentifiers:pe,rcompareIdentifiers:(e,t)=>pe(t,e)};const{MAX_LENGTH:he,MAX_SAFE_INTEGER:me}=oe,{safeRe:ge,t:fe}=se,{compareIdentifiers:ve}=ue;class ke{constructor(e,t){if(t=le(t),e instanceof ke){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>he)throw new TypeError(`version is longer than ${he} characters`);ae("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?ge[fe.LOOSE]:ge[fe.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>me||this.major<0)throw new TypeError("Invalid major version");if(this.minor>me||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>me||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<me)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(ae("SemVer.compare",this.version,this.options,e),!(e instanceof ke)){if("string"==typeof e&&e===this.version)return 0;e=new ke(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ke||(e=new ke(e,this.options)),ve(this.major,e.major)||ve(this.minor,e.minor)||ve(this.patch,e.patch)}comparePre(e){if(e instanceof ke||(e=new ke(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(ae("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return ve(n,i)}while(++t)}compareBuild(e){e instanceof ke||(e=new ke(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(ae("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return ve(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===n&&(i=[t]),0===ve(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}}var be=ke;var ye=(e,t,n)=>new be(e,n).compare(new be(t,n));var we=(e,t,n)=>ye(e,t,n)>0;function xe(e,t,n){const i=e.slice();return i[169]=t[n],i}function Ee(e,t,n){const i=e.slice();return i[169]=t[n],i[173]=n,i}function Ie(e,t,n){const i=e.slice();return i[169]=t[n],i[173]=n,i}function $e(e,t,n){const i=e.slice();return i[169]=t[n],i[173]=n,i}function Se(e,t,n){const i=e.slice();return i[176]=t[n],i[173]=n,i}function Ae(e,t,n){const i=e.slice();return i[176]=t[n],i[173]=n,i}function Ce(e,t,n){const i=e.slice();return i[176]=t[n],i[173]=n,i}function Le(e){let t;return{c(){t=v("h3"),t.textContent="It seems you aren't subscribed to any pack yet. Click the plus symbol on the bottom-left to get started! 🎉",x(t,"class","getStarted")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function Te(e){let t,n,i,a,o,s=e[30](e[8].length)+"",r=e[8],c=[];for(let t=0;t<r.length;t+=1)c[t]=Ne(Ce(e,r,t));return{c(){t=v("div"),n=v("span"),i=k("Favorites"),a=new A(!1),o=b();for(let e=0;e<c.length;e+=1)c[e].c();a.a=null,x(n,"id","pfavorites"),x(t,"class","pack")},m(e,r){m(e,t,r),h(t,n),h(n,i),a.m(s,n),h(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null)},p(e,n){if(256&n[0]&&s!==(s=e[30](e[8].length)+"")&&a.p(s),369107200&n[0]){let i;for(r=e[8],i=0;i<r.length;i+=1){const a=Ce(e,r,i);c[i]?c[i].p(a,n):(c[i]=Ne(a),c[i].c(),c[i].m(t,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=r.length}},d(e){e&&g(t),f(c,e)}}}function Ne(e){let t,n,a,o,s,c,l,d,p,u;function f(...t){return e[52](e[176],...t)}function k(){return e[53](e[176])}return{c(){t=v("div"),n=v("img"),c=b(),l=v("div"),l.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',d=b(),x(n,"class","image"),r(n.src,a=""+e[25](e[176].pack,e[176].id))||x(n,"src",a),x(n,"alt",o=e[176].pack+" - "+e[176].id),x(n,"title",s=e[13][e[176].pack]?e[13][e[176].pack].name:""),x(l,"class","deleteFavorite"),x(l,"title","Unfavorite"),x(t,"class","sticker")},m(e,i){m(e,t,i),h(t,n),h(t,c),h(t,l),h(t,d),p||(u=[y(n,"click",f),y(l,"click",k)],p=!0)},p(t,i){e=t,256&i[0]&&!r(n.src,a=""+e[25](e[176].pack,e[176].id))&&x(n,"src",a),256&i[0]&&o!==(o=e[176].pack+" - "+e[176].id)&&x(n,"alt",o),8448&i[0]&&s!==(s=e[13][e[176].pack]?e[13][e[176].pack].name:"")&&x(n,"title",s)},d(e){e&&g(t),p=!1,i(u)}}}function Re(e){let t,n,i,a,o,s=e[30](e[12].length)+"",r=e[12],c=[];for(let t=0;t<r.length;t+=1)c[t]=De(Ae(e,r,t));return{c(){t=v("div"),n=v("span"),i=k("Frequently Used"),a=new A(!1),o=b();for(let e=0;e<c.length;e+=1)c[e].c();a.a=null,x(n,"id","pfrequentlyused"),x(t,"class","pack")},m(e,r){m(e,t,r),h(t,n),h(n,i),a.m(s,n),h(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null)},p(e,n){if(4096&n[0]&&s!==(s=e[30](e[12].length)+"")&&a.p(s),503329024&n[0]){let i;for(r=e[12],i=0;i<r.length;i+=1){const a=Ae(e,r,i);c[i]?c[i].p(a,n):(c[i]=De(a),c[i].c(),c[i].m(t,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=r.length}},d(e){e&&g(t),f(c,e)}}}function Me(e){let t,n,i;function a(){return e[56](e[176])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","deleteFavorite"),x(t,"title","Unfavorite")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Oe(e){let t,n,i;function a(){return e[55](e[176])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","addFavorite"),x(t,"title","Favorite")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function De(e){let t,n,i,a,o,s,c,l,d,p;function u(...t){return e[51](e[176],...t)}function f(...t){return e[54](e[176],...t)}function k(e,t){return 4352&t[0]&&(c=null),null==c&&(c=!(-1!==e[8].findIndex(u))),c?Oe:Me}let w=k(e,[-1,-1,-1,-1,-1,-1]),E=w(e);return{c(){t=v("div"),n=v("img"),s=b(),E.c(),l=b(),x(n,"class","image"),r(n.src,i=""+e[25](e[176].pack,e[176].id))||x(n,"src",i),x(n,"alt",a=e[176].pack+" - "+e[176].id),x(n,"title",o=(e[13][e[176].pack]?e[13][e[176].pack].name+" – ":"")+"Used: "+e[176].used),x(t,"class","sticker")},m(e,i){m(e,t,i),h(t,n),h(t,s),E.m(t,null),h(t,l),d||(p=y(n,"click",f),d=!0)},p(s,c){e=s,4096&c[0]&&!r(n.src,i=""+e[25](e[176].pack,e[176].id))&&x(n,"src",i),4096&c[0]&&a!==(a=e[176].pack+" - "+e[176].id)&&x(n,"alt",a),12288&c[0]&&o!==(o=(e[13][e[176].pack]?e[13][e[176].pack].name+" – ":"")+"Used: "+e[176].used)&&x(n,"title",o),w===(w=k(e,c))&&E?E.p(e,c):(E.d(1),E=w(e),E&&(E.c(),E.m(t,l)))},d(e){e&&g(t),E.d(),d=!1,p()}}}function Pe(e){let t,n,i;function a(){return e[59](e[169],e[176])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","deleteFavorite"),x(t,"title","Unfavorite")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Ue(e){let t,n,i;function a(){return e[58](e[169],e[176])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","addFavorite"),x(t,"title","Favorite")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Fe(e){let t,n,i,a,o,s,c,l;function d(...t){return e[50](e[169],e[176],...t)}function p(...t){return e[57](e[169],e[176],...t)}function u(e,t){return 768&t[0]&&(s=null),null==s&&(s=!(-1!==e[8].findIndex(d))),s?Ue:Pe}let f=u(e,[-1,-1,-1,-1,-1,-1]),k=f(e);return{c(){t=v("div"),n=v("img"),o=b(),k.c(),x(n,"class","image"),r(n.src,i=""+e[25](e[169].id,e[176],!1,e[173]))||x(n,"src",i),x(n,"alt",a=e[169].id+" - "+e[176]),x(t,"class","sticker")},m(e,i){m(e,t,i),h(t,n),h(t,o),k.m(t,null),c||(l=y(n,"click",p),c=!0)},p(o,s){e=o,512&s[0]&&!r(n.src,i=""+e[25](e[169].id,e[176],!1,e[173]))&&x(n,"src",i),512&s[0]&&a!==(a=e[169].id+" - "+e[176])&&x(n,"alt",a),f===(f=u(e,s))&&k?k.p(e,s):(k.d(1),k=f(e),k&&(k.c(),k.m(t,null)))},d(e){e&&g(t),k.d(),c=!1,l()}}}function _e(e){let t,n,i,a,o,s,r,c=e[169].name+"",l=e[30](e[169].files.length)+"",d=e[169].files,p=[];for(let t=0;t<d.length;t+=1)p[t]=Fe(Se(e,d,t));return{c(){t=v("div"),n=v("span"),i=k(c),a=new A(!1),s=b();for(let e=0;e<p.length;e+=1)p[e].c();r=b(),a.a=null,x(n,"id",o="p"+e[169].id),x(t,"class","pack")},m(e,o){m(e,t,o),h(t,n),h(n,i),a.m(l,n),h(t,s);for(let e=0;e<p.length;e+=1)p[e].m(t,null);h(t,r)},p(e,s){if(512&s[0]&&c!==(c=e[169].name+"")&&E(i,c),512&s[0]&&l!==(l=e[30](e[169].files.length)+"")&&a.p(l),512&s[0]&&o!==(o="p"+e[169].id)&&x(n,"id",o),503317248&s[0]){let n;for(d=e[169].files,n=0;n<d.length;n+=1){const i=Se(e,d,n);p[n]?p[n].p(i,s):(p[n]=Fe(i),p[n].c(),p[n].m(t,r))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}},d(e){e&&g(t),f(p,e)}}}function We(t){let n,i,a;return{c(){n=v("div"),n.innerHTML='<div class="icon-frequently-used"></div>',x(n,"class","pack"),x(n,"title","Frequently Used")},m(e,o){m(e,n,o),i||(a=y(n,"click",t[62]),i=!0)},p:e,d(e){e&&g(n),i=!1,a()}}}function je(e){let t,n,i,a;function o(){return e[63](e[169])}return{c(){t=v("div"),x(t,"class","pack"),x(t,"title",n=e[169].name),$(t,"background-image",`url(${e[25](e[169].id,e[169].files[0],!1,0)})`)},m(e,n){m(e,t,n),i||(a=y(t,"click",o),i=!0)},p(i,a){e=i,512&a[0]&&n!==(n=e[169].name)&&x(t,"title",n),512&a[0]&&$(t,"background-image",`url(${e[25](e[169].id,e[169].files[0],!1,0)})`)},d(e){e&&g(t),i=!1,a()}}}function Be(e){let t,n,i=[],a=new Map,o=e[9];const s=e=>e[169].id;for(let t=0;t<o.length;t+=1){let n=Ee(e,o,t),r=s(n);a.set(r,i[t]=Xe(r,n))}return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","tab-content has-scroll-y"),x(t,"style",n=0===e[7]?"":"display: none;")},m(e,n){m(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,r){51397120&r[0]|209&r[1]&&(o=e[9],i=function(e,t,n,i,a,o,s,r,c,l,d,p){let u=e.length,h=o.length,m=u;const g={};for(;m--;)g[e[m].key]=m;const f=[],v=new Map,k=new Map;for(m=h;m--;){const e=p(a,o,m),r=n(e);let c=s.get(r);c?i&&c.p(e,t):(c=l(r,e),c.c()),v.set(r,f[m]=c),r in g&&k.set(r,Math.abs(m-g[r]))}const b=new Set,y=new Set;function w(e){V(e,1),e.m(r,d),s.set(e.key,e),d=e.first,h--}for(;u&&h;){const t=f[h-1],n=e[u-1],i=t.key,a=n.key;t===n?(d=t.first,u--,h--):v.has(a)?!s.has(i)||b.has(i)?w(t):y.has(a)?u--:k.get(i)>k.get(a)?(y.add(i),w(t)):(b.add(a),u--):(c(n,s),u--)}for(;u--;){const t=e[u];v.has(t.key)||c(t,s)}for(;h;)w(f[h-1]);return f}(i,r,s,1,e,o,a,t,X,Xe,null,Ee)),128&r[0]&&n!==(n=0===e[7]?"":"display: none;")&&x(t,"style",n)},d(e){e&&g(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function ze(e){let t,n,a,o,s,r;return{c(){t=v("div"),n=v("input"),x(n,"class","inputPackIndex"),x(n,"type","text"),x(n,"data-pack",a=e[169].id),n.value=o=e[173]+1,x(t,"class","index")},m(i,a){m(i,t,a),h(t,n),s||(r=[y(n,"click",it),y(n,"keypress",e[35])],s=!0)},p(e,t){512&t[0]&&a!==(a=e[169].id)&&x(n,"data-pack",a),512&t[0]&&o!==(o=e[173]+1)&&n.value!==o&&(n.value=o)},d(e){e&&g(t),s=!1,i(r)}}}function Ge(e){let t,n,i=e[169].id.startsWith("custom-"),a=i&&He(e),o=e[14][e[169].id].updateUrl&&Ve(e);return{c(){a&&a.c(),t=b(),o&&o.c(),n=k("")},m(e,i){a&&a.m(e,i),m(e,t,i),o&&o.m(e,i),m(e,n,i)},p(e,s){512&s[0]&&(i=e[169].id.startsWith("custom-")),i?a?a.p(e,s):(a=He(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),e[14][e[169].id].updateUrl?o?o.p(e,s):(o=Ve(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(e){a&&a.d(e),e&&g(t),o&&o.d(e),e&&g(n)}}}function He(e){let t,n,i;function a(){return e[70](e[169])}return{c(){t=v("button"),t.textContent="i",x(t,"class","button pack-info"),x(t,"title","Info")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Ve(e){let t,n,i;function a(){return e[71](e[169])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Xe(e,t){let n,i,a,o,s,r,c,l,d,p,u,f,w,I,S,C,L,T,N,R,M,O=t[169].name+"",D=t[169].count+"",P=(t[20].hidePackAppendix?"":t[31](t[169].id))+"",U=t[9].length>1&&ze(t);function F(){return t[69](t[169])}let _=t[14][t[169].id]&&Ge(t);return{key:e,first:null,c(){n=v("div"),U&&U.c(),i=b(),a=v("div"),o=b(),s=v("div"),r=v("span"),c=k(O),d=b(),p=v("span"),u=k(D),f=k(" stickers"),w=new A(!1),I=b(),S=v("div"),C=v("button"),C.textContent="Del",L=b(),_&&_.c(),N=b(),x(a,"class","preview"),$(a,"background-image",`url(${t[25](t[169].id,t[169].files[0],!1,0)})`),x(r,"title",l=t[20].hidePackAppendix?"ID: "+t[169].id:""),w.a=null,x(s,"class","info"),x(C,"class","button is-danger"),x(C,"title","Unsubscribe"),x(S,"class",T="action"+(t[14][t[169].id]&&(t[169].id.startsWith("custom-")||t[14][t[169].id].updateUrl)?" is-tight":"")),x(n,"class","pack"),this.first=n},m(e,t){m(e,n,t),U&&U.m(n,null),h(n,i),h(n,a),h(n,o),h(n,s),h(s,r),h(r,c),h(s,d),h(s,p),h(p,u),h(p,f),w.m(P,p),h(n,I),h(n,S),h(S,C),h(S,L),_&&_.m(S,null),h(n,N),R||(M=y(C,"click",F),R=!0)},p(e,o){(t=e)[9].length>1?U?U.p(t,o):(U=ze(t),U.c(),U.m(n,i)):U&&(U.d(1),U=null),512&o[0]&&$(a,"background-image",`url(${t[25](t[169].id,t[169].files[0],!1,0)})`),512&o[0]&&O!==(O=t[169].name+"")&&E(c,O),1049088&o[0]&&l!==(l=t[20].hidePackAppendix?"ID: "+t[169].id:"")&&x(r,"title",l),512&o[0]&&D!==(D=t[169].count+"")&&E(u,D),1049088&o[0]&&P!==(P=(t[20].hidePackAppendix?"":t[31](t[169].id))+"")&&w.p(P),t[14][t[169].id]?_?_.p(t,o):(_=Ge(t),_.c(),_.m(S,null)):_&&(_.d(1),_=null),16896&o[0]&&T!==(T="action"+(t[14][t[169].id]&&(t[169].id.startsWith("custom-")||t[14][t[169].id].updateUrl)?" is-tight":""))&&x(S,"class",T)},d(e){e&&g(n),U&&U.d(),_&&_.d(),R=!1,M()}}}function qe(e){let t,n=e[11],i=[];for(let t=0;t<n.length;t+=1)i[t]=et(xe(e,n,t));return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","packs has-scroll-y"),x(t,"style","")},m(e,n){m(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(59788288&a[0]|225&a[1]){let o;for(n=e[11],o=0;o<n.length;o+=1){const s=xe(e,n,o);i[o]?i[o].p(s,a):(i[o]=et(s),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&g(t),f(i,e)}}}function Ye(e){let t,n,i;function a(){return e[74](e[169])}return{c(){t=v("button"),t.textContent="Add",x(t,"class","button is-primary"),x(t,"title","Subscribe")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Je(e){let t,n,i;function a(){return e[73](e[169])}return{c(){t=v("button"),t.textContent="Del",x(t,"class","button is-danger"),x(t,"title","Unsubscribe")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Ke(e){let t,n,i,a,o,s=e[169].id.startsWith("custom-"),r=s&&Qe(e),c=e[14][e[169].id].updateUrl&&Ze(e);function l(){return e[77](e[169])}return{c(){r&&r.c(),t=b(),c&&c.c(),n=b(),i=v("button"),x(i,"class","button delete-pack is-danger"),x(i,"title","Purge")},m(e,s){r&&r.m(e,s),m(e,t,s),c&&c.m(e,s),m(e,n,s),m(e,i,s),a||(o=y(i,"click",l),a=!0)},p(i,a){e=i,2048&a[0]&&(s=e[169].id.startsWith("custom-")),s?r?r.p(e,a):(r=Qe(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),e[14][e[169].id].updateUrl?c?c.p(e,a):(c=Ze(e),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(e){r&&r.d(e),e&&g(t),c&&c.d(e),e&&g(n),e&&g(i),a=!1,o()}}}function Qe(e){let t,n,i;function a(){return e[75](e[169])}return{c(){t=v("button"),t.textContent="i",x(t,"class","button pack-info"),x(t,"title","Info")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function Ze(e){let t,n,i;function a(){return e[76](e[169])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){m(e,t,o),n||(i=y(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,i()}}}function et(e){let t,n,i,a,o,s,r,c,l,d,p,u,f,y,w,I,S,C,L=e[169].name+"",T=e[169].count+"",N=(e[20].hidePackAppendix?"":e[31](e[169].id))+"";function R(e,t){return 3072&t[0]&&(w=null),null==w&&(w=!!e[10].includes(e[169].id)),w?Je:Ye}let M=R(e,[-1,-1,-1,-1,-1,-1]),O=M(e),D=e[14][e[169].id]&&Ke(e);return{c(){t=v("div"),n=v("div"),i=b(),a=v("div"),o=v("span"),s=k(L),c=b(),l=v("span"),d=k(T),p=k(" stickers"),u=new A(!1),f=b(),y=v("div"),O.c(),I=b(),D&&D.c(),C=b(),x(n,"class","preview"),$(n,"background-image",`url(${e[25](e[169].id,e[169].files[0],!1,0)})`),x(o,"title",r=e[20].hidePackAppendix?"ID: "+e[169].id:""),u.a=null,x(a,"class","info"),x(y,"class",S="action"+(e[14][e[169].id]?" is-tight":"")),x(t,"class","pack")},m(e,r){m(e,t,r),h(t,n),h(t,i),h(t,a),h(a,o),h(o,s),h(a,c),h(a,l),h(l,d),h(l,p),u.m(N,l),h(t,f),h(t,y),O.m(y,null),h(y,I),D&&D.m(y,null),h(t,C)},p(e,t){2048&t[0]&&$(n,"background-image",`url(${e[25](e[169].id,e[169].files[0],!1,0)})`),2048&t[0]&&L!==(L=e[169].name+"")&&E(s,L),1050624&t[0]&&r!==(r=e[20].hidePackAppendix?"ID: "+e[169].id:"")&&x(o,"title",r),2048&t[0]&&T!==(T=e[169].count+"")&&E(d,T),1050624&t[0]&&N!==(N=(e[20].hidePackAppendix?"":e[31](e[169].id))+"")&&u.p(N),M===(M=R(e,t))&&O?O.p(e,t):(O.d(1),O=M(e),O&&(O.c(),O.m(y,I))),e[14][e[169].id]?D?D.p(e,t):(D=Ke(e),D.c(),D.m(y,null)):D&&(D.d(1),D=null),18432&t[0]&&S!==(S="action"+(e[14][e[169].id]?" is-tight":""))&&x(y,"class",S)},d(e){e&&g(t),O.d(),D&&D.d()}}}function tt(t){let n,a,o,s,r,c,l,d,p,u,w,E,A,C,L,T,N,R,M,O,D,P,U,F,_,W,j,B,z,G,H,V,X,q,Y,J,K,Q,Z,ee,te,ne,ie,ae,oe,se,re,ce,le,de,pe,ue,he,me,ge,fe,ve,ke,be,ye,we,xe,Ee,Se,Ae,Ce,Ne,Me,Oe,De,Pe,Ue,Fe,ze,Ge,He,Ve,Xe,Ye,Je,Ke,Qe,Ze,et,tt,nt,it,st,rt,ct,lt,dt,pt,ut,ht,mt,gt,ft,vt,kt,bt,yt,wt,xt,Et,It,$t,St,At,Ct,Lt,Tt,Nt,Rt,Mt,Ot,Dt,Pt,Ut,Ft,_t,Wt,jt,Bt,zt,Gt,Ht,Vt,Xt,qt,Yt,Jt,Kt,Qt,Zt,en,tn,nn,an,on,sn,rn,cn,ln,dn,pn,un,hn,mn,gn,fn,vn,kn,bn,yn,wn,xn,En,In,$n,Sn,An,Cn,Ln,Tn,Nn,Rn,Mn,On,Dn,Pn,Un,Fn,_n,Wn,jn,Bn,zn,Gn,Hn,Vn,Xn,qn,Yn,Jn,Kn,Qn,Zn,ei,ti,ni,ii,ai,oi,si,ri,ci=!t[8].length&&!t[9].length&&Le(),li=t[8].length&&Te(t),di=t[12].length&&Re(t),pi=t[9],ui=[];for(let e=0;e<pi.length;e+=1)ui[e]=_e($e(t,pi,e));let hi=t[27].length&&function(t){let n,i,a;return{c(){n=v("div"),n.innerHTML='<div class="icon-favorite"></div>',x(n,"class","pack"),x(n,"title","Favorites")},m(e,o){m(e,n,o),i||(a=y(n,"click",t[61]),i=!0)},p:e,d(e){e&&g(n),i=!1,a()}}}(t),mi=t[12].length&&We(t),gi=t[9],fi=[];for(let e=0;e<gi.length;e+=1)fi[e]=je(Ie(t,gi,e));let vi=t[6][0]&&Be(t),ki=t[6][1]&&qe(t);return{c(){n=v("main"),a=v("div"),o=v("div"),s=v("div"),ci&&ci.c(),r=b(),li&&li.c(),c=b(),di&&di.c(),l=b();for(let e=0;e<ui.length;e+=1)ui[e].c();p=b(),u=v("div"),w=v("div"),E=v("div"),A=v("div"),A.innerHTML='<div class="icon-plus"></div>',C=b(),hi&&hi.c(),L=b(),mi&&mi.c(),T=b(),N=v("div"),R=v("div");for(let e=0;e<fi.length;e+=1)fi[e].c();O=b(),D=v("div"),P=v("div"),U=b(),F=v("div"),_=v("div"),W=v("div"),j=v("div"),j.textContent="Installed",B=b(),z=v("div"),z.textContent="Packs",G=b(),H=v("div"),H.textContent="Import",V=b(),X=v("div"),X.textContent="Misc",q=b(),vi&&vi.c(),Y=b(),J=v("div"),K=v("input"),Q=b(),ki&&ki.c(),ee=b(),te=v("div"),ne=v("div"),ie=v("p"),ie.textContent="LINE Store Proxy",ae=b(),oe=v("p"),oe.innerHTML='If you are looking for stickers pack that are not provided by Magane, you can go to the <a href="https://store.line.me/" target="_blank">LINE Store</a>, pick whichever packs you want, then paste their full URLs in the box below (separated by new lines).',se=b(),re=v("p"),re.textContent="e.g. https://store.line.me/stickershop/product/17573/ja",ce=b(),le=v("p"),de=v("textarea"),pe=b(),ue=v("button"),ue.textContent="Add",he=b(),me=v("div"),ge=v("p"),ge.textContent="Remote Packs",fe=b(),ve=v("p"),ve.innerHTML='You can paste URLs to JSON config files of remote packs in here (separated by new lines).<br/>\n\t\t\t\t\t\t\t\t\tThis also supports public album links of any file hosting websites running <a href="https://github.com/WeebDev/chibisafe" target="_blank">Chibisafe</a>.',ke=b(),be=v("p"),be.innerHTML="e.g. https://example.com/packs/my_custom_pack.json<br/>\n\t\t\t\t\t\t\t\t\thttps://chibisafe.moe/a/my_album",ye=b(),we=v("p"),xe=v("textarea"),Ee=b(),Se=v("button"),Se.textContent="Add",Ae=b(),Ce=v("p"),Ne=v("input"),Me=b(),Oe=v("button"),Oe.textContent="Load local JSON files",De=b(),Pe=v("p"),Ue=v("button"),Ue.textContent="Update all remote packs",ze=b(),Ge=v("div"),He=v("div"),Ve=v("p"),Xe=v("button"),Xe.textContent="Check for updates",Ye=b(),Je=v("div"),Ke=v("p"),Ke.textContent="Settings",Qe=b(),Ze=v("p"),et=v("label"),tt=v("input"),nt=k("\n\t\t\t\t\t\t\t\t\t\tDisable automatically checking for updates on launch"),it=b(),st=v("p"),rt=v("label"),ct=v("input"),lt=k("\n\t\t\t\t\t\t\t\t\t\tEnable "),dt=v("code"),dt.textContent="window.magane",pt=k(" development utility"),ut=b(),ht=v("p"),mt=v("label"),gt=v("input"),ft=k("\n\t\t\t\t\t\t\t\t\t\tDisable Toasts"),vt=b(),kt=v("p"),bt=v("label"),yt=v("input"),wt=k("\n\t\t\t\t\t\t\t\t\t\tClose window when sending a sticker"),xt=b(),Et=v("p"),It=v("label"),$t=v("input"),St=k("\n\t\t\t\t\t\t\t\t\t\tUse left toolbar instead of bottom toolbar on main window"),At=b(),Ct=v("p"),Lt=v("label"),Tt=v("input"),Nt=k("\n\t\t\t\t\t\t\t\t\t\tHide pack's appendix in packs list (e.g. its numerical ID)"),Rt=b(),Mt=v("p"),Ot=v("label"),Dt=v("input"),Pt=k("\n\t\t\t\t\t\t\t\t\t\tDisable downscaling of manually imported LINE Store packs"),Ut=b(),Ft=v("p"),_t=v("label"),Wt=v("input"),jt=k("\n\t\t\t\t\t\t\t\t\t\tDisable obfuscation of files names for imported custom packs (obfuscation happens only for uploads)"),Bt=b(),zt=v("p"),Gt=v("label"),Ht=v("input"),Vt=k("\n\t\t\t\t\t\t\t\t\t\tAlways send stickers as links instead of uploads"),Xt=b(),qt=v("p"),Yt=v("label"),Jt=v("input"),Kt=k("\n\t\t\t\t\t\t\t\t\t\tAllow inverting send behavior if holding Ctrl when sending stickers (if always send as links is enabled, holding Ctrl when sending will instead send as uploads, and vice versa)"),Qt=b(),Zt=v("p"),en=v("label"),tn=v("input"),nn=k("\n\t\t\t\t\t\t\t\t\t\tIgnore missing embed links permission"),an=b(),on=v("p"),sn=v("label"),rn=v("input"),cn=k("\n\t\t\t\t\t\t\t\t\t\tMark stickers as spoilers when sending"),ln=b(),dn=v("p"),pn=v("label"),un=v("input"),hn=k("\n\t\t\t\t\t\t\t\t\t\tDo not warn if viewport height is insufficient"),mn=b(),gn=v("p"),fn=v("label"),vn=v("input"),kn=k("\n\t\t\t\t\t\t\t\t\t\tDo not send text chat input alongside sticker"),bn=b(),yn=v("div"),wn=v("p"),wn.textContent="Frequently Used",xn=b(),En=v("p"),En.textContent="Maximum amount of the most frequently used stickers to list on Frequently Used section.",In=b(),$n=v("p"),$n.innerHTML="Set to <code>0</code> to completely disable the section and stickers usage counter.",Sn=b(),An=v("p"),Cn=v("input"),Ln=b(),Tn=v("button"),Tn.textContent="Set",Nn=b(),Rn=v("div"),Mn=v("p"),Mn.textContent="Hotkey",On=b(),Dn=v("p"),Dn.innerHTML='<a href="https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values" target="_blank">See a full list of key values.</a>',Pn=b(),Un=v("p"),Un.innerHTML="Ignore notes that will not affect Chromium. Additionally, this may not have full support for everything in the documentation above, but this does support some degree of combinations of modifier keys (<code>Ctrl</code>, <code>Alt</code>, etc.) + other keys.",Fn=b(),_n=v("p"),_n.innerHTML="e.g. <code>M</code>, <code>Ctrl+Q</code>, <code>Alt+Shift+Y</code>",Wn=b(),jn=v("p"),Bn=v("input"),zn=b(),Gn=v("button"),Gn.textContent="Set",Hn=b(),Vn=v("div"),Xn=v("p"),Xn.textContent="Database",qn=b(),Yn=v("p"),Jn=v("input"),Kn=b(),Qn=v("button"),Qn.textContent="Replace Database",Zn=b(),ei=v("p"),ti=v("button"),ti.textContent="Export Database",x(s,"class",d="stickers has-scroll-y "+(t[20].useLeftToolbar?"has-left-toolbar":"")),x(s,"style",""),x(A,"class","pack"),x(A,"title","Manage subscribed packs"),x(E,"class","packs-wrapper"),x(w,"class","packs packs-controls"),x(R,"class","packs-wrapper"),x(N,"class","packs"),x(N,"style",""),x(u,"class",M="packs-toolbar "+(t[20].useLeftToolbar?"has-scroll-y":"has-scroll-x")),x(P,"class","modal-close"),x(j,"class","tab"),S(j,"is-active",0===t[7]),x(z,"class","tab"),S(z,"is-active",1===t[7]),x(H,"class","tab"),S(H,"is-active",2===t[7]),x(X,"class","tab"),S(X,"is-active",3===t[7]),x(W,"class","tabs"),x(K,"class","inputQuery"),x(K,"type","text"),x(K,"placeholder","Search"),x(J,"class","tab-content avail-packs"),x(J,"style",Z=1===t[7]?"":"display: none;"),x(ie,"class","section-title"),x(de,"autocomplete","off"),x(de,"class","inputQuery"),x(de,"placeholder","LINE Sticker Pack URLs"),x(ue,"class","button is-primary"),x(le,"class","input-grouped"),x(ne,"class","section line-proxy"),x(ge,"class","section-title"),x(xe,"autocomplete","off"),x(xe,"class","inputQuery"),x(xe,"placeholder","Remote Pack JSON or Chibisafe Album URLs"),x(Se,"class","button is-primary"),x(we,"class","input-grouped"),x(Ne,"id","localRemotePackInput"),x(Ne,"type","file"),Ne.multiple=!0,$(Ne,"display","none"),x(Ne,"accept","application/JSON"),x(Oe,"class","button has-width-full"),x(Ue,"class","button is-primary has-width-full"),x(me,"class","section remote-packs"),x(te,"class","tab-content has-scroll-y import"),x(te,"style",Fe=2===t[7]?"":"display: none;"),x(Xe,"class","button has-width-full"),x(He,"class","section checkupdate"),x(Ke,"class","section-title"),x(tt,"name","disableUpdateCheck"),x(tt,"type","checkbox"),x(ct,"name","enableWindowMagane"),x(ct,"type","checkbox"),x(gt,"name","disableToasts"),x(gt,"type","checkbox"),x(yt,"name","closeWindowOnSend"),x(yt,"type","checkbox"),x($t,"name","useLeftToolbar"),x($t,"type","checkbox"),x(Tt,"name","hidePackAppendix"),x(Tt,"type","checkbox"),x(Dt,"name","disableDownscale"),x(Dt,"type","checkbox"),x(Wt,"name","disableImportedObfuscation"),x(Wt,"type","checkbox"),x(Ht,"name","alwaysSendAsLink"),x(Ht,"type","checkbox"),x(Jt,"name","ctrlInvertSendBehavior"),x(Jt,"type","checkbox"),x(tn,"name","ignoreEmbedLinksPermission"),x(tn,"type","checkbox"),x(rn,"name","markAsSpoiler"),x(rn,"type","checkbox"),x(un,"name","ignoreViewportSize"),x(un,"type","checkbox"),x(vn,"name","disableSendingWithChatInput"),x(vn,"type","checkbox"),x(Je,"class","section settings"),x(wn,"class","section-title"),x(Cn,"class","inputQuery supress-magane-hotkey"),x(Cn,"type","text"),x(Tn,"class","button is-primary"),x(An,"class","input-grouped"),x(yn,"class","section frequently-used"),x(Mn,"class","section-title"),x(Bn,"class","inputQuery supress-magane-hotkey"),x(Bn,"type","text"),x(Gn,"class","button is-primary"),x(jn,"class","input-grouped"),x(Rn,"class","section hotkey"),x(Xn,"class","section-title"),x(Jn,"id","replaceDatabaseInput"),x(Jn,"type","file"),$(Jn,"display","none"),x(Jn,"accept","application/JSON"),x(Qn,"class","button is-danger has-width-full"),x(ti,"class","button is-primary has-width-full"),x(Vn,"class","section database"),x(Ge,"class","tab-content has-scroll-y misc"),x(Ge,"style",ni=3===t[7]?"":"display: none;"),x(_,"class","stickersConfig"),x(F,"class","modal-content"),x(D,"class","stickersModal"),x(D,"style",ii=t[5]?"":"display: none;"),x(o,"class","stickerWindow"),x(o,"style",ai="bottom: "+t[1].wbottom+"px; right: "+t[1].wright+"px; "+(t[4]?"":"display: none;")),x(a,"id","magane"),x(a,"style",oi=(t[0]===t[21].LEGACY?`top: ${t[1].top}px; left: ${t[1].left}px;`:"")+" "+(t[3]?"display: none;":""))},m(e,i){m(e,n,i),h(n,a),h(a,o),h(o,s),ci&&ci.m(s,null),h(s,r),li&&li.m(s,null),h(s,c),di&&di.m(s,null),h(s,l);for(let e=0;e<ui.length;e+=1)ui[e].m(s,null);h(o,p),h(o,u),h(u,w),h(w,E),h(E,A),h(E,C),hi&&hi.m(E,null),h(E,L),mi&&mi.m(E,null),h(u,T),h(u,N),h(N,R);for(let e=0;e<fi.length;e+=1)fi[e].m(R,null);h(o,O),h(o,D),h(D,P),h(D,U),h(D,F),h(F,_),h(_,W),h(W,j),h(W,B),h(W,z),h(W,G),h(W,H),h(W,V),h(W,X),h(_,q),vi&&vi.m(_,null),h(_,Y),h(_,J),h(J,K),I(K,t[19]),h(J,Q),ki&&ki.m(J,null),h(_,ee),h(_,te),h(te,ne),h(ne,ie),h(ne,ae),h(ne,oe),h(ne,se),h(ne,re),h(ne,ce),h(ne,le),h(le,de),I(de,t[15]),h(le,pe),h(le,ue),h(te,he),h(te,me),h(me,ge),h(me,fe),h(me,ve),h(me,ke),h(me,be),h(me,ye),h(me,we),h(we,xe),I(xe,t[16]),h(we,Ee),h(we,Se),h(me,Ae),h(me,Ce),h(Ce,Ne),h(Ce,Me),h(Ce,Oe),h(me,De),h(me,Pe),h(Pe,Ue),h(_,ze),h(_,Ge),h(Ge,He),h(He,Ve),h(Ve,Xe),h(Ge,Ye),h(Ge,Je),h(Je,Ke),h(Je,Qe),h(Je,Ze),h(Ze,et),h(et,tt),tt.checked=t[20].disableUpdateCheck,h(et,nt),h(Je,it),h(Je,st),h(st,rt),h(rt,ct),ct.checked=t[20].enableWindowMagane,h(rt,lt),h(rt,dt),h(rt,pt),h(Je,ut),h(Je,ht),h(ht,mt),h(mt,gt),gt.checked=t[20].disableToasts,h(mt,ft),h(Je,vt),h(Je,kt),h(kt,bt),h(bt,yt),yt.checked=t[20].closeWindowOnSend,h(bt,wt),h(Je,xt),h(Je,Et),h(Et,It),h(It,$t),$t.checked=t[20].useLeftToolbar,h(It,St),h(Je,At),h(Je,Ct),h(Ct,Lt),h(Lt,Tt),Tt.checked=t[20].hidePackAppendix,h(Lt,Nt),h(Je,Rt),h(Je,Mt),h(Mt,Ot),h(Ot,Dt),Dt.checked=t[20].disableDownscale,h(Ot,Pt),h(Je,Ut),h(Je,Ft),h(Ft,_t),h(_t,Wt),Wt.checked=t[20].disableImportedObfuscation,h(_t,jt),h(Je,Bt),h(Je,zt),h(zt,Gt),h(Gt,Ht),Ht.checked=t[20].alwaysSendAsLink,h(Gt,Vt),h(Je,Xt),h(Je,qt),h(qt,Yt),h(Yt,Jt),Jt.checked=t[20].ctrlInvertSendBehavior,h(Yt,Kt),h(Je,Qt),h(Je,Zt),h(Zt,en),h(en,tn),tn.checked=t[20].ignoreEmbedLinksPermission,h(en,nn),h(Je,an),h(Je,on),h(on,sn),h(sn,rn),rn.checked=t[20].markAsSpoiler,h(sn,cn),h(Je,ln),h(Je,dn),h(dn,pn),h(pn,un),un.checked=t[20].ignoreViewportSize,h(pn,hn),h(Je,mn),h(Je,gn),h(gn,fn),h(fn,vn),vn.checked=t[20].disableSendingWithChatInput,h(fn,kn),h(Ge,bn),h(Ge,yn),h(yn,wn),h(yn,xn),h(yn,En),h(yn,In),h(yn,$n),h(yn,Sn),h(yn,An),h(An,Cn),I(Cn,t[17]),h(An,Ln),h(An,Tn),h(Ge,Nn),h(Ge,Rn),h(Rn,Mn),h(Rn,On),h(Rn,Dn),h(Rn,Pn),h(Rn,Un),h(Rn,Fn),h(Rn,_n),h(Rn,Wn),h(Rn,jn),h(jn,Bn),I(Bn,t[18]),h(jn,zn),h(jn,Gn),h(Ge,Hn),h(Ge,Vn),h(Vn,Xn),h(Vn,qn),h(Vn,Yn),h(Yn,Jn),h(Yn,Kn),h(Yn,Qn),h(Vn,Zn),h(Vn,ei),h(ei,ti),t[105](n),si||(ri=[y(A,"click",t[60]),y(P,"click",t[64]),y(j,"click",t[65]),y(z,"click",t[66]),y(H,"click",t[67]),y(X,"click",t[68]),y(K,"keyup",t[29]),y(K,"input",t[72]),y(de,"input",t[78]),y(ue,"click",t[79]),y(xe,"input",t[80]),y(Se,"click",t[81]),y(Ne,"click",at),y(Ne,"change",t[41]),y(Oe,"click",t[82]),y(Ue,"click",t[83]),y(Xe,"click",t[84]),y(tt,"change",t[85]),y(ct,"change",t[86]),y(gt,"change",t[87]),y(yt,"change",t[88]),y($t,"change",t[89]),y(Tt,"change",t[90]),y(Dt,"change",t[91]),y(Wt,"change",t[92]),y(Ht,"change",t[93]),y(Jt,"change",t[94]),y(tn,"change",t[95]),y(rn,"change",t[96]),y(un,"change",t[97]),y(vn,"change",t[98]),y(Je,"change",t[44]),y(Cn,"input",t[99]),y(Tn,"click",t[100]),y(Bn,"input",t[101]),y(Gn,"click",t[102]),y(Jn,"click",ot),y(Jn,"change",t[47]),y(Qn,"click",t[103]),y(ti,"click",t[104])],si=!0)},p(e,t){if(e[8].length||e[9].length?ci&&(ci.d(1),ci=null):ci||(ci=Le(),ci.c(),ci.m(s,r)),e[8].length?li?li.p(e,t):(li=Te(e),li.c(),li.m(s,c)):li&&(li.d(1),li=null),e[12].length?di?di.p(e,t):(di=Re(e),di.c(),di.m(s,l)):di&&(di.d(1),di=null),1577059072&t[0]){let n;for(pi=e[9],n=0;n<pi.length;n+=1){const i=$e(e,pi,n);ui[n]?ui[n].p(i,t):(ui[n]=_e(i),ui[n].c(),ui[n].m(s,null))}for(;n<ui.length;n+=1)ui[n].d(1);ui.length=pi.length}if(1048576&t[0]&&d!==(d="stickers has-scroll-y "+(e[20].useLeftToolbar?"has-left-toolbar":""))&&x(s,"class",d),e[27].length&&hi.p(e,t),e[12].length?mi?mi.p(e,t):(mi=We(e),mi.c(),mi.m(E,null)):mi&&(mi.d(1),mi=null),33554944&t[0]|8&t[1]){let n;for(gi=e[9],n=0;n<gi.length;n+=1){const i=Ie(e,gi,n);fi[n]?fi[n].p(i,t):(fi[n]=je(i),fi[n].c(),fi[n].m(R,null))}for(;n<fi.length;n+=1)fi[n].d(1);fi.length=gi.length}1048576&t[0]&&M!==(M="packs-toolbar "+(e[20].useLeftToolbar?"has-scroll-y":"has-scroll-x"))&&x(u,"class",M),128&t[0]&&S(j,"is-active",0===e[7]),128&t[0]&&S(z,"is-active",1===e[7]),128&t[0]&&S(H,"is-active",2===e[7]),128&t[0]&&S(X,"is-active",3===e[7]),e[6][0]?vi?vi.p(e,t):(vi=Be(e),vi.c(),vi.m(_,Y)):vi&&(vi.d(1),vi=null),524288&t[0]&&K.value!==e[19]&&I(K,e[19]),e[6][1]?ki?ki.p(e,t):(ki=qe(e),ki.c(),ki.m(J,null)):ki&&(ki.d(1),ki=null),128&t[0]&&Z!==(Z=1===e[7]?"":"display: none;")&&x(J,"style",Z),32768&t[0]&&I(de,e[15]),65536&t[0]&&I(xe,e[16]),128&t[0]&&Fe!==(Fe=2===e[7]?"":"display: none;")&&x(te,"style",Fe),1048576&t[0]&&(tt.checked=e[20].disableUpdateCheck),1048576&t[0]&&(ct.checked=e[20].enableWindowMagane),1048576&t[0]&&(gt.checked=e[20].disableToasts),1048576&t[0]&&(yt.checked=e[20].closeWindowOnSend),1048576&t[0]&&($t.checked=e[20].useLeftToolbar),1048576&t[0]&&(Tt.checked=e[20].hidePackAppendix),1048576&t[0]&&(Dt.checked=e[20].disableDownscale),1048576&t[0]&&(Wt.checked=e[20].disableImportedObfuscation),1048576&t[0]&&(Ht.checked=e[20].alwaysSendAsLink),1048576&t[0]&&(Jt.checked=e[20].ctrlInvertSendBehavior),1048576&t[0]&&(tn.checked=e[20].ignoreEmbedLinksPermission),1048576&t[0]&&(rn.checked=e[20].markAsSpoiler),1048576&t[0]&&(un.checked=e[20].ignoreViewportSize),1048576&t[0]&&(vn.checked=e[20].disableSendingWithChatInput),131072&t[0]&&Cn.value!==e[17]&&I(Cn,e[17]),262144&t[0]&&Bn.value!==e[18]&&I(Bn,e[18]),128&t[0]&&ni!==(ni=3===e[7]?"":"display: none;")&&x(Ge,"style",ni),32&t[0]&&ii!==(ii=e[5]?"":"display: none;")&&x(D,"style",ii),18&t[0]&&ai!==(ai="bottom: "+e[1].wbottom+"px; right: "+e[1].wright+"px; "+(e[4]?"":"display: none;"))&&x(o,"style",ai),11&t[0]&&oi!==(oi=(e[0]===e[21].LEGACY?`top: ${e[1].top}px; left: ${e[1].left}px;`:"")+" "+(e[3]?"display: none;":""))&&x(a,"style",oi)},i:e,o:e,d(e){e&&g(n),ci&&ci.d(),li&&li.d(),di&&di.d(),f(ui,e),hi&&hi.d(),mi&&mi.d(),f(fi,e),vi&&vi.d(),ki&&ki.d(),t[105](null),si=!1,i(ri)}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('/** Magane: main.scss **/\ndiv#magane {\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  position: absolute;\n  z-index: 100;\n}\ndiv#magane button, div#magane input, div#magane select, div#magane label, div#magane span, div#magane p, div#magane a, div#magane li, div#magane ul, div#magane div, div#magane textarea {\n  font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;\n  color: var(--header-secondary);\n  font-weight: 400;\n  line-height: 1.5;\n  font-size: 16px;\n  text-rendering: optimizeLegibility;\n  -webkit-text-size-adjust: 100%;\n     -moz-text-size-adjust: 100%;\n          text-size-adjust: 100%;\n}\ndiv#magane div.stickerWindow {\n  z-index: 2000;\n  width: 600px;\n  min-height: 200px;\n  position: fixed;\n  background: var(--background-secondary);\n  max-height: 600px;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n  box-shadow: var(--elevation-stroke), var(--elevation-high);\n}\ndiv#magane div.stickerWindow div.stickers {\n  height: 550px !important;\n  margin-bottom: 100px;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers.has-left-toolbar {\n  height: 600px !important;\n  margin-left: 50px;\n}\ndiv#magane div.stickerWindow div.stickers h3.getStarted {\n  text-align: center;\n  padding-top: 40%;\n  pointer-events: none;\n}\ndiv#magane div.stickerWindow div.stickers div.pack {\n  float: left;\n  display: flex;\n  flex-flow: wrap;\n  justify-content: center;\n  padding: 20px;\n  width: 100%;\n  box-sizing: border-box;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span {\n  color: var(--header-secondary);\n  width: 100%;\n  cursor: auto;\n  padding-left: 10px;\n  margin: 10px 0px;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts {\n  padding-left: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts span {\n  padding: 0 0.5em;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100px;\n  height: 100px;\n  float: left;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker .image {\n  cursor: pointer;\n  max-height: 100%;\n  max-width: 100%;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  right: 0;\n  transition: all 0.2s ease;\n  display: none;\n  z-index: 2;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  transition: all 0.2s ease;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite {\n  bottom: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path {\n  fill: #2ECC71;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  top: 0px;\n  transform: rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25) rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  fill: #F04747;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.deleteFavorite {\n  display: block;\n  cursor: pointer;\n}\ndiv#magane div.stickerWindow div.packs-toolbar {\n  position: absolute;\n  bottom: 0;\n  background: var(--background-tertiary);\n  display: flex;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x {\n  width: 100%;\n  height: 50px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs {\n  flex: 1 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs.packs-controls {\n  flex: 0 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs div.packs-wrapper {\n  white-space: nowrap;\n  float: left;\n  width: 100%;\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y {\n  width: 50px;\n  height: 100%;\n  flex-direction: column;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs {\n  flex: 1 1 auto;\n  height: 100%;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs.packs-controls {\n  flex: 0 0 auto;\n  height: auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs div.packs-wrapper {\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack {\n  display: inline-block;\n  height: 40px;\n  width: 40px;\n  margin: 5px;\n  cursor: pointer;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  transition: all 0.2s ease;\n  filter: grayscale(100%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack:hover,\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.pack.active {\n  transform: scale(1.25);\n  filter: grayscale(0%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack > div {\n  background-image: url("/assets/62ed7720accb1adfe95565b114e843c6.png");\n  width: 32px;\n  height: 32px;\n  background-size: 1344px 1216px;\n  background-repeat: no-repeat;\n  margin-top: 4px;\n  margin-left: 4px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-favorite {\n  background-position: -1056px -288px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-plus {\n  background-position: -384px -896px;\n  /* make it greenish */\n  /* thanks to the magic of https://codepen.io/sosuke/pen/Pjoqqp */\n  filter: invert(63%) sepia(25%) saturate(813%) hue-rotate(55deg) brightness(98%) contrast(82%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-frequently-used {\n  background-position: -160px -960px;\n}\ndiv#magane .stickersModal {\n  z-index: 2001;\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  align-items: center;\n  justify-content: center;\n}\ndiv#magane .stickersModal.is-active {\n  display: flex;\n}\ndiv#magane .stickersModal .inputQuery {\n  width: calc(100% - 30px);\n  height: 36px;\n  box-sizing: border-box;\n  margin: 0 15px 10px;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal textarea.inputQuery {\n  height: auto;\n  min-height: 54px;\n}\ndiv#magane .stickersModal .inputPackIndex {\n  width: 55px;\n  height: 36px;\n  box-sizing: border-box;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-background {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(10, 10, 10, 0.86);\n}\ndiv#magane .stickersModal .modal-content,\ndiv#magane .stickersModal .modal-card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: var(--background-tertiary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs {\n  width: 100%;\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab {\n  color: var(--header-secondary);\n  display: inline-block;\n  border: none;\n  border-top: 0px transparent;\n  border-left: 0px transparent;\n  border-right: 0px transparent;\n  border-width: 1px;\n  border-style: solid;\n  border-bottom-color: var(--header-secondary);\n  padding: 20px;\n  cursor: pointer;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab:hover, div#magane .stickersModal .modal-content .stickersConfig .tabs .tab.is-active {\n  border-bottom-color: var(--interactive-active);\n  color: var(--interactive-active);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content {\n  height: calc(100% - 66px); /* .tabs height */\n  width: 100%;\n  padding: 10px 0;\n  box-sizing: border-box;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs {\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs .packs {\n  height: 100%;\n  width: 100%;\n  padding-bottom: 10px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section {\n  padding: 0 24px 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section .section-title, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section .section-title {\n  font-weight: 800;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section > p:last-of-type, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section > p:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a {\n  /* inherit Discord\'s link color */\n  color: var(--text-link);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a:hover, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a:hover {\n  text-decoration: underline;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped {\n  display: flex;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped input, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped input {\n  margin: 0;\n  width: auto;\n  flex-grow: 1;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped textarea, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped textarea {\n  margin: 0;\n  width: auto;\n  flex-grow: 1;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped button, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped button {\n  margin-left: 4px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack {\n  height: 75px;\n  width: 100%;\n  float: left;\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  margin-bottom: 5px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  flex: 0 0 auto;\n  min-width: 75px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  flex: 1 0 auto;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action.is-tight button {\n  width: auto;\n  padding-right: 0.5em;\n  padding-left: 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack {\n  width: 36px;\n  height: 36px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before, div#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index {\n  padding-top: 20px;\n  text-align: left;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  height: 75px;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle {\n  padding: 20px;\n  cursor: move;\n  padding-top: 30px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle span {\n  background: #555;\n  height: 2px;\n  width: 100%;\n  display: block;\n  margin-bottom: 6px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  padding-top: 20px;\n  text-align: right;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info {\n  flex: 1 1 auto;\n  padding: 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span {\n  display: block;\n  width: 100%;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span:nth-of-type(1) {\n  font-weight: bold;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(1) {\n  padding: 0 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(2) {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview img {\n  height: 100%;\n  width: 100%;\n}\ndiv#magane .stickersModal .modal-close {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  background-color: rgba(10, 10, 10, 0.2);\n  border: none;\n  border-radius: 290486px;\n  cursor: pointer;\n  display: inline-block;\n  flex-grow: 0;\n  flex-shrink: 0;\n  font-size: 0;\n  outline: none;\n  vertical-align: top;\n  background: none;\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  height: 32px;\n  max-height: 32px;\n  max-width: 32px;\n  min-height: 32px;\n  min-width: 32px;\n  width: 32px;\n  z-index: 1;\n}\ndiv#magane .stickersModal .modal-close:before, div#magane .stickersModal .modal-close:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-close:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-close:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-close:hover, div#magane .stickersModal .modal-close:focus {\n  background-color: rgba(10, 10, 10, 0.3);\n}\ndiv#magane .button {\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  box-shadow: none;\n  display: inline-flex;\n  font-size: 1rem;\n  padding: calc(0.375em - 1px) 0.75em;\n  position: relative;\n  vertical-align: top;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  justify-content: center;\n  text-align: center;\n  white-space: nowrap;\n  border-color: transparent;\n  color: var(--header-secondary);\n  background-color: var(--background-secondary);\n  width: 62px; /* consistent width */\n}\ndiv#magane .button.is-danger {\n  color: #ffffff;\n  border-color: rgba(240, 71, 71, 0.3);\n  background: #f04747;\n}\ndiv#magane .button:hover, div#magane .button.is-primary:hover {\n  transform: scale3d(1.1, 1.1, 1.1);\n}\ndiv#magane .button.has-width-full {\n  width: 100%;\n}\ndiv#magane .button.has-width-full:hover {\n  /* TODO: Figure out how to do a more consistent scaling,\n    regardless of the button\'s dynamic size. */\n  transform: scale3d(1.04, 1.04, 1.04);\n}\ndiv#magane .has-scroll-x {\n  overflow-x: auto;\n  scrollbar-gutter: stable;\n}\ndiv#magane .has-scroll-y {\n  overflow-y: auto;\n  scrollbar-gutter: stable;\n}\ndiv#magane ::-webkit-scrollbar {\n  /* Let\'s make the scrollbars pretty */\n  width: 6px;\n  height: 6px;\n}\ndiv#magane ::-webkit-scrollbar-track {\n  margin: 0;\n  background: transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-track-piece {\n  border: 0 solid transparent;\n  background: transparent;\n  margin: 0;\n}\ndiv#magane ::-webkit-scrollbar-thumb {\n  background: rgba(105, 96, 128, 0.5);\n  border: 0 solid transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-thumb:hover {\n  background: rgba(105, 96, 128, 0.75);\n}\ndiv#magane ::-webkit-scrollbar-thumb:active {\n  background: #696080;\n}\ndiv#magane code {\n  box-sizing: border-box;\n  padding: 2px 6px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n}\n\ndiv#maganeButton.channel-textarea-stickers {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\ndiv#maganeButton.channel-textarea-stickers:hover, div#maganeButton.channel-textarea-stickers.active {\n  filter: brightness(1.35);\n}\ndiv#maganeButton img.channel-textarea-stickers-content {\n  width: 24px;\n  height: 24px;\n  padding: 4px;\n  margin-left: 2px;\n  margin-right: 2px;\n}');const nt="https://raw.githubusercontent.com/Pitu/Magane/master/dist/magane.plugin.js",it=e=>e.target.select(),at=e=>e.stopPropagation(),ot=e=>e.stopPropagation();function st(e,t,n){const i=(e,t="log")=>(t=["log","info","warn","error"].includes(t)?t:"log",console[t]("%c[Magane]%c","color: #3a71c1; font-weight: 700","",e)),a={LEGACY:"legacy",BETTERDISCORD:"betterdiscord",VENCORD:"vencord"};let o=null;const s={},r={},c={info:0,success:1,error:2,warn:2},l={findByProps(...e){switch(o){case a.BETTERDISCORD:return BdApi.findModuleByProps(...e);case a.VENCORD:return VencordApi.findByPropsLazy(...e);default:return r.FINDBYPROPS(...e)}},find(...e){switch(o){case a.BETTERDISCORD:return BdApi.Webpack.getModule(...e);case a.VENCORD:return VencordApi.findLazy(e[0]);default:return r.FIND(...e)}},Alerts:{show(...e){if(o===a.BETTERDISCORD)return BdApi.showConfirmationModal(...e);if(o===a.VENCORD){const t=e[0],n=s.React.createElement("div",{dangerouslySetInnerHTML:{__html:e[1].replace(/\*\*(.*?)\*\*/gm,"<b>$1</b>").replace(/__(.*?)__/gm,"<u>$1</u>").replace(/```\n(.*?)\n```/gms,"<code>$1</code>").replace(/\n\n/gm,"<br>")},style:{"user-select":"text"}});return VencordApi.Alerts.show(Object.assign({title:t,body:n},...e.slice(2)))}return r.ALERTS_SHOW(...e)}},Toasts:{show(...e){if(o===a.BETTERDISCORD)return BdApi.showToast(...e);if(o===a.VENCORD){const t=e[0],n=Object.assign({},...e.slice(1));let i=0;return n.type&&(i=c[n.type],delete n.type),void 0!==n.timeout&&(n.duration=n.timeout,delete n.timeout),n.position=1,VencordApi.Toasts.show({message:t,type:i,options:n})}return r.TOASTS_SHOW(...e)}},Plugins:{isEnabled(...e){switch(o){case a.BETTERDISCORD:return BdApi.Plugins.isEnabled(...e);case a.VENCORD:return null;default:return r.PLUGINS_ISENABLED(...e)}},getVersion(...e){switch(o){case a.BETTERDISCORD:return BdApi.Plugins.get(...e).version;case a.VENCORD:return null;default:return r.PLUGINS_GETVERSION(...e)}}},UI:{showNotice(...e){switch(o){case a.BETTERDISCORD:return BdApi.UI.showNotice(...e);case a.VENCORD:return null;default:return r.UI_SHOWNOTICE(...e)}}}},d={top:0,left:0};let p=null,u=null,h=!1,m=[],g=null,f="",v=!1,k=!1;const b={};let y=null,w=[],x=[],E=[],I=[],$=[],S=[],A=[],C={};const L={};let T=null,M=null,O=10,P=null,U={},F=!1,_=null,W=null,j=null;const B=[];let z=!1,G=!1;const H={},V={1:"Chibisafe Albums",2:"Old Chibisafe / Lolisafe v3 Albums"},X={disableUpdateCheck:!1,enableWindowMagane:!1,disableToasts:!1,closeWindowOnSend:!1,useLeftToolbar:!1,hidePackAppendix:!1,disableDownscale:!1,disableImportedObfuscation:!1,alwaysSendAsLink:!1,ctrlInvertSendBehavior:!1,ignoreEmbedLinksPermission:!1,markAsSpoiler:!1,ignoreViewportSize:!1,disableSendingWithChatInput:!1,frequentlyUsed:O,hotkey:null},q=Object.freeze(Object.assign({},X)),Y=["magane.available","magane.subscribed","magane.favorites","magane.settings","magane.stats"],J=(e,t={})=>{t.nolog&&!X.disableToasts||i(e,t.type),X.disableToasts||(delete t.nolog,l.Toasts.show(e,t))},K=(e,t={})=>(t.type="info",J(e,t)),Q=(e,t={})=>(t.type="success",J(e,t)),ee=(e,t={})=>(t.type="error",J(e,t)),te=(e,t={})=>(t.type="warn",J(e,t)),ne=e=>{const t=e.querySelector('[class^="buttons"]'),n=new Z({target:t,anchor:t.firstElementChild});return n.$on("click",()=>Ue(void 0,n)),n.$on("grabPacks",()=>fe(!0)),n.textArea=e,n.lastTextAreaSize={width:e.clientWidth,height:e.clientHeight},n},ae=e=>{i("Updating window's position…");const t=e.textArea.querySelector('[class^="buttons"]').getBoundingClientRect();if(n(1,d.wbottom=u.clientHeight-t.top+8,d),n(1,d.wright=u.clientWidth-t.right-6,d),o===a.LEGACY){const e=u.getBoundingClientRect();n(1,d.wbottom+=e.top,d),n(1,d.wright+=e.left,d)}},oe=async e=>{if(e&&0!==e.contentRect.width&&0!==e.contentRect.height)for(const t of m)if(t.textArea===e.target){if(t.lastTextAreaSize.width===e.contentRect.width)return;break}const t=await((e,t={})=>{let n;return t.logname&&i(`Waiting for ${t.logname}…`),new Promise(i=>{(n=()=>{const a=[],o=document.querySelectorAll(e);for(let e=0;e<o.length&&(("function"!=typeof t.assert||t.assert(o[e]))&&a.push(o[e]),!a.length||t.multiple);e++);if(a.length)return delete H[e],i(a);H[e]=setTimeout(n,500)})()})})('[class^="channelTextArea-"]:not([class*="channelTextAreaDisabled-"])',{logname:"textarea",assert:e=>{let t=Boolean(e.querySelector('[class^="buttons"]'));if(t){const n=document.querySelector('[class^="channelChatWrapper-"]');n&&(t=n.contains(e))}return t},multiple:!0}),n=m.slice(),a=[];for(const e of t){e._maganeID||(e._maganeID=Date.now());let t=!1;for(let i=0;i<n.length;i++)if(n[i].textArea===e){t=!0,n[i].lastTextAreaSize={width:e.clientWidth,height:e.clientHeight},a.push(n[i]),n.splice(i,1);break}if(t){i(`Textarea #${e._maganeID}: still attached`);continue}const o=ne(e);o?(i(`Textarea #${e._maganeID}: attached`),j.observe(e),a.push(o)):i(`Textarea #${e._maganeID}: failed to attach`)}for(const e of n)i(`Textarea #${e.textArea._maganeID}: outdated, destroying…`),g===e&&(Ue(!1,g),g=null),j.unobserve(e.textArea),e.$destroy();m=a,m.length?g&&ae(g):oe()},se=e=>new Promise((t,n)=>{B.push({entry:e,resolve:t,reject:n}),re()}),re=()=>{if(z)return!1;const e=B.shift();if(!e)return!1;try{z=!0,oe(e.entry).then(t=>{z=!1,e.resolve(t),re()}).catch(t=>{z=!1,e.reject(t),re()})}catch(t){z=!1,e.reject(t),re()}return!0},ce=(e,t)=>{if(Y.includes(e))return _.setItem(e,JSON.stringify(t))},le=e=>{if(Y.includes(e))try{const t=_.getItem(e);return JSON.parse(t)}catch(e){console.error(e)}},de=e=>{for(const t of Object.keys(q))void 0===e[t]?n(20,X[t]=q[t],X):n(20,X[t]=e[t],X);De(X.enableWindowMagane),n(17,O=X.frequentlyUsed),n(18,P=X.hotkey),et()},pe=(e=!1)=>{e&&de(q);const t=le("magane.settings");t&&de(t)},ue=async(e=!1)=>{if(o!==a.BETTERDISCORD)return te("Sorry, update checker is only available when running on BetterDiscord.");if(!l.Plugins.isEnabled("MaganeBD"))return te("Update check skipped, is this plugin not named MaganeBD?");const t=l.Plugins.getVersion("MaganeBD");i("Fetching remote dist file from: "+nt),e&&J("Checking for updates…",{nolog:!0}),await fetch(nt,{cache:"no-cache"}).then(async n=>{i("Remote dist file fetched.");const a=(await n.text()).match(/^ \* @version ([a-zA-Z0-9.-]+)$/m),o=a&&a[1];o?we(o,t)?(i(`Update found: ${o} > ${t}.`),l.UI.showNotice(`Magane v${t} found an update: v${o}. Please download the update manually.`,{buttons:[{label:"GitHub",onClick:()=>window.open("https://github.com/Pitu/Magane/commits/master",{target:"_blank"})},{label:"Download",onClick:()=>window.open(nt,{target:"_blank"})}]})):(i(`No updates found: ${o} <= ${t}.`),e&&J("No updates found.",{nolog:!0})):te("Failed to parse version string from remote dist file.")}).catch(e=>{console.error(e),ee("Unexpected error occurred when checking for Magane's updates. Check your console for details.")})},he=e=>"string"==typeof e&&(e.startsWith("startswith-")||e.startsWith("emojis-")||e.startsWith("custom-")),me=(e,t)=>{if(C[e])return;const i=t||x,a=i.findIndex(t=>t.id===e);-1!==a&&n(13,C[e]={name:i[a].name},C)},ge=e=>{w.some(t=>t.pack===e)||A.some(t=>t.pack===e)||delete C[e]},fe=async(e=!1)=>{let t;try{const e=await fetch("https://magane.moe/api/packs");t=await e.json(),f=t.baseURL}catch(e){ee("Unable to fetch Magane's API. Magane will load as-is, but built-in remote packs will temporarily be unavailable.",{timeout:1e4}),console.error(e)}e&&(x=[],n(11,$=[]),n(9,E=[]),n(10,I=[]),n(8,w=[]),S=[],n(12,A=[]),n(13,C={}));const a=le("magane.available");if(Array.isArray(a)&&a.length){const e=a.filter(e=>"object"==typeof e&&void 0!==e.id&&he(e.id));a.length!==e.length&&(i(`magane.available mismatch: ${a.length} !== ${e.length}`),ce("magane.available",e)),e.forEach(e=>{n(14,L[e.id]=e,L)}),x.push(...e)}t&&x.push(...t.packs),x=x,n(11,$=x);const o=le("magane.subscribed");Array.isArray(o)&&o.length&&(n(9,E=o.filter(e=>!(he(e.id)&&!L[e.id])&&(I.push(e.id),!0))),o.length!==E.length&&(i(`magane.subscribed mismatch: ${o.length} !== ${E.length}`),ce("magane.subscribed",E)));const s=le("magane.favorites");Array.isArray(s)&&s.length&&(n(8,w=s.filter(e=>!(he(e.pack)&&!L[e.pack])&&(me(e.pack),!0))),s.length!==w.length&&(i(`magane.favorites mismatch: ${s.length} !== ${w.length}`),ce("magane.favorites",w)));const r=le("magane.stats");Array.isArray(r)&&r.length&&(S=r.filter(e=>!he(e.pack)||L[e.pack]),r.length!==S.length&&(i(`magane.stats mismatch: ${r.length} !== ${S.length}`),ce("magane.stats",S)),Ke())},ve=e=>{-1===E.findIndex(t=>t.id===e.id)&&(n(9,E=[...E,e]),n(10,I=[...I,e.id]),ce("magane.subscribed",E),i("Subscribed > "+e.name))},ke=e=>{for(let t=0;t<E.length;t++)if(E[t].id===e.id)return E.splice(t,1),I.splice(t,1),n(9,E),n(10,I),i("Unsubscribed > "+e.name),void ce("magane.subscribed",E)},be=(e,t,n,i)=>{let a;if("number"==typeof e)if(f)a=`${f||""}${e}/${t}`,n||(a=a.replace(/\.(gif|png)$/i,"_key.$1"));else{if(n)throw new Error("Magane's API was unavailable. Please reload Magane if the API is already back online.");a="/assets/8becd37ab9d13cdfe37c08c496a9def3.svg"}else if(e.startsWith("startswith-")){a="https://stickershop.line-scdn.net/stickershop/v1/sticker/%id%/android/sticker.png;compress=true".replace(/%id%/g,t.split(".")[0]);let i=n?"&h=180p":"&h=100p";L[e].animated&&(a=a.replace(/sticker(@2x)?\.png/,"sticker_animation$1.png"),i+="&output=gif"),X.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("emojis-")){a="https://stickershop.line-scdn.net/sticonshop/v1/sticon/%pack%/android/%id%.png".replace(/%pack%/g,e.split("-")[1]).replace(/%id%/g,t.split(".")[0]);let i=n?"":"&h=100p";L[e].animated&&(a=a.replace(/\.png/,"_animation.png"),i+="&output=gif"),X.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("custom-")){if(!n&&Array.isArray(L[e].thumbs)){if(L[e].thumbs.length&&("number"!=typeof i&&(i=L[e].files.findIndex(e=>e===t)),a=i>=0?L[e].thumbs[i]:null),!a)return"/assets/eedd4bd948a0da6d75bf5304bff4e17f.svg"}else a=t;"string"==typeof L[e].template&&(a=L[e].template.replace(/%pack%/g,e.replace("custom-","")).replace(/%id%/g,a))}return a},ye=(e,t)=>{if(!(s.DiscordPermissions&&s.Permissions&&s.UserStore&&s.ChannelStore))return!0;const n=s.UserStore.getCurrentUser(),i=s.ChannelStore.getChannel(t);return!!n&&(!e||!i.guild_id||s.Permissions.can({permission:s.DiscordPermissions[e],user:n,context:i}))},xe=async(e,t,n)=>{if(F)return te("Sending sticker is still on cooldown…",{timeout:1500});if(!g)return te("Selected text area is not found, please re-open Magane window.");F=!0;try{let a;const o=(e=>{let t=e[Object.keys(e).find(e=>e.startsWith("__reactFiber")||e.startsWith("__reactInternalInstance"))];for(let e=0;e<10&&t;e++){if(t.stateNode&&t.stateNode.handleTextareaChange)return t;t=t.return}})(g.textArea);if(o?a=o.stateNode.props.channel.id:s.SelectedChannelStore&&(a=s.SelectedChannelStore.getChannelId()),!a)return F=!1,ee("Unable to determine channel ID. Is this a pending Thread creation?");if(!ye("SEND_MESSAGES",a))return F=!1,ee("You do not have permission to send message in this channel.");J("Sending…",{nolog:!0}),X.closeWindowOnSend&&Ue(!1,g);const r=be(e,t,!0);let c,l="";if(!X.disableSendingWithChatInput&&s.DraftStore&&(l=s.DraftStore.getDraft(a,0)),s.PendingReplyStore){const e=s.PendingReplyStore.getPendingReply(a);e&&(c=s.MessageUtils.getSendMessageOptionsForReply(e))}let d=X.alwaysSendAsLink;if(n&&n.ctrlKey&&X.ctrlInvertSendBehavior&&(d=!d),!d&&ye("ATTACH_FILES",a)){i("Fetching sticker from remote: "+r);const n=await fetch(r,{cache:"force-cache"}),o=await n.blob();let d=t;if("string"==typeof e)if(L[e].animated&&(e.startsWith("startswith-")||e.startsWith("emojis-")))d=d.replace(/\.png$/i,".gif"),te("Animated stickers/emojis from LINE Store currently cannot be animated.");else if(e.startsWith("custom-"))if(X.disableImportedObfuscation)d=t;else{const e=t.match(/(\.\w+)$/);d=`${Date.now().toString()}${e?e[1]:""}`}X.markAsSpoiler&&(d="SPOILER_"+d);const p=new File([o],d);i(`Sending sticker as ${d}…`),s.MessageUpload.uploadFiles({channelId:a,draftType:0,hasSpoiler:!1,options:c||{},parsedMessage:{content:l},uploads:[new s.UploadObject({file:p,platform:1},a,!1,0)]})}else if(X.ignoreEmbedLinksPermission||ye("EMBED_LINKS",a)){d||te("You do not have permission to attach files, sending sticker as link…");let e=r;X.markAsSpoiler&&(e=`||${e}||`),s.MessageUtils._sendMessage(a,{content:`${l} ${e}`.trim()},c||{})}else ee("You do not have permissions to attach files nor embed links.");if(0!==X.frequentlyUsed){const n=S.findIndex(n=>n.pack===e&&n.id===t);-1===n?S.push({pack:e,id:t,used:1,lastUsed:Date.now()}):(S[n].used++,S[n].lastUsed=Date.now()),ce("magane.stats",S),Ke()}!X.disableSendingWithChatInput&&o&&(i("Clearing chat input…"),o.stateNode.setState({textValue:"",richValue:[{type:"line",children:[{text:""}]}]}))}catch(e){console.error(e),ee(e.toString(),{nolog:!0,timeout:5e3})}F=!1},Ee=(e,t)=>{if(-1!==w.findIndex(n=>n.pack===e&&n.id===t))return;me(e,E);const a={pack:e,id:t};n(8,w=[...w,a]),ce("magane.favorites",w),i(`Favorited > ${t} of pack ${e}`),Q("Favorited!",{nolog:!0})},Ie=(e,t)=>{const a=w.findIndex(n=>n.pack===e&&n.id===t);-1!==a&&(w.splice(a,1),n(8,w),ge(e),ce("magane.favorites",w),i(`Unfavorited > ${t} of pack ${e}`),K("Unfavorited!",{nolog:!0}))},$e=()=>{const e="string"==typeof W&&W.trim().toLowerCase();n(11,$=e?x.filter(t=>t.name.toLowerCase().indexOf(e)>=0||String(t.id).indexOf(e)>=0):x)},Se=(e,t,a={})=>{let o=le("magane.available");Array.isArray(o)&&o.length||(o=[]);const s=o.findIndex(t=>t.id===e);if(s>=0){if(a.overwrite&&a.partial)t=Object.assign(o[s],t);else if(!a.overwrite)throw new Error(`Pack with ID ${e} already exist.`)}else if(a.overwrite)throw new Error(`Cannot overwrite missing pack with ID ${e}.`);if(!t.count||!t.files.length)throw new Error("Invalid stickers count.");const r={pack:t};if(he(e)&&n(14,L[e]=t,L),s>=0){o[s]=t;const n=x.findIndex(t=>t.id===e);-1!==n&&(x[n]=t)}else o.unshift(t),x.unshift(t),x=x;return ce("magane.available",o),$e(),a.overwrite?i("Overwritten pack with ID "+e):i("Added a new pack with ID "+e),r},Ae=async()=>{let e=!1;const t=le("magane.favorites");Array.isArray(t)&&t.length&&t.forEach(t=>{if("number"==typeof t.pack||he(t.pack))return;const n=parseInt(t.pack,10);isNaN(t.pack)||(t.pack=n,e=!0)});const n=le("magane.subscribed");Array.isArray(n)&&n.length&&n.forEach(t=>{if("number"==typeof t.id||he(t.id))return;const n=parseInt(t.id,10);isNaN(t.id)||(t.id=n,e=!0)}),e&&(K("Found packs/stickers to migrate, migrating now..."),ce("magane.favorites",t),ce("magane.subscribed",n),await fe(!0),Q("Migration successful."))},Ce=(e,t=[],n=0)=>{const i="object"==typeof e[0];if(!i&&e.length<n)throw new Error(`This function expects at least ${n} parameter(s).`);const a={};for(let n=0;n<t.length;n++)a[t[n]]=i?e[0][t[n]]:e[n];return a},Le=(...e)=>{let{name:t,firstid:n,count:i,animated:a}=Ce(e,["name","firstid","count","animated"],3);if(n=Number(n),isNaN(n)||!isFinite(n)||n<0)throw new Error("Invalid first ID.");i=Math.max(Math.min(Number(i),200),0)||0;const o="startswith-"+n,s=[];for(let e=n;e<n+i;e+=1)s.push(e+".png");return Se(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},Te=(...e)=>{let{name:t,id:n,count:i,animated:a}=Ce(e,["name","id","count","animated"],3);i=Math.max(Math.min(Number(i),200),0)||0;const o="emojis-"+n,s=[];for(let e=0;e<i;e+=1)s.push(String(e+1).padStart(3,"0")+".png");return Se(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},Ne=(...e)=>{let{name:t,id:n,count:i,animated:a,template:o,files:s,thumbs:r}=Ce(e,["name","id","count","animated","template","files","thumbs"],5);i=Math.max(Number(i),0)||0;const c="custom-"+n;if(Array.isArray(s)){if(!s.length)throw new Error('"files" array cannot be empty.')}else{if(!o)throw new Error('"template" must be set if not using custom "files" array.');s=[];for(let e=1;e<=i;e+=1)s.push(e+(a?".gif":".png"))}return Se(c,{name:t,count:i,id:c,animated:a?1:null,files:s,thumbs:r,template:o})},Re=(...e)=>{const{id:t,props:n}=Ce(e,["id","props"],2);if("object"!=typeof n)throw new Error('"props" must be an object.');return Se(t,n,{overwrite:!0,partial:!0})},Me=e=>{if(!he(e))throw new Error('Pack ID must start with either "startswith-", "emojis-", or "custom-".');const t=le("magane.available");if(!Array.isArray(t)||!t.length)throw new Error("You have not imported any remote or custom packs");const a=t.findIndex(t=>t.id===e);if(-1===a)throw new Error("Unable to find pack with ID "+e);n(8,w=w.filter(t=>t.pack!==e)),ce("magane.favorites",w),S=S.filter(t=>t.pack!==e),ce("magane.stats",S),Ke();const o=E.find(t=>t.id===e);o&&ke(o),t.splice(a,1),ce("magane.available",t);const s=x.findIndex(t=>t.id===e);return-1!==s&&(x.splice(s,1),x=x,$e()),delete L[e],i(`Removed pack with ID ${e} (old index: ${a})`),!0},Oe=e=>{if(!e)throw new Error("Keyword required");e=e.toLowerCase();const t=le("magane.available");if(!Array.isArray(t)||!t.length)throw new Error("You have not imported any remote or custom packs");return t.filter(t=>t.name.toLowerCase().indexOf(e)>=0||t.id.indexOf(e)>=0)},De=e=>{e?window.magane={appendPack:Le,appendEmojisPack:Te,appendCustomPack:Ne,editPack:Re,deletePack:Me,searchPacks:Oe,Modules:s,hasPermission:ye}:window.magane instanceof Node||delete window.magane};N(async()=>{switch(u=p.parentNode.parentNode,n(0,o=document.body?a.BETTERDISCORD:a.LEGACY),n(0,o),o){case a.BETTERDISCORD:i("Magane is likely mounted with MaganeBD.");break;case a.VENCORD:i("Magane is mounted with MaganeVencord.");break;default:i("Magane is mounted with other or legacy method.")}const e=Date.now();try{J("Loading Magane…"),s.ChannelStore=l.findByProps("getChannel","getDMFromUserId"),s.SelectedChannelStore=l.findByProps("getLastSelectedChannelId"),s.DiscordConstants=l.findByProps("Permissions","ActivityTypes","StatusTypes"),s.DiscordPermissions=l.find(e=>e.ADD_REACTIONS,{searchExports:!0}),s.Permissions=l.findByProps("computePermissions"),s.UserStore=l.findByProps("getCurrentUser","getUser"),s.DraftStore=l.findByProps("getDraft","getState"),s.MessageUpload=l.findByProps("instantBatchUpload"),s.MessageUtils=l.findByProps("sendMessage"),s.PendingReplyStore=l.findByProps("getPendingReply"),s.UploadObject=l.find(e=>e.prototype&&e.prototype.upload&&e.prototype.getSize,{searchExports:!0}),s.React=l.findByProps("createElement","version"),(()=>{const e=document.createElement("iframe");document.head.append(e),_=Object.getOwnPropertyDescriptor(e.contentWindow.frames,"localStorage").get.call(window),e.remove()})(),pe(),await fe(),await Ae(),Q("Magane is now ready!"),j=new ResizeObserver(e=>{for(const t of e){if(!t.contentRect)return;se(t)}}),oe()}catch(e){console.error(e),ee("Unexpected error occurred when initializing Magane. Check your console for details.")}i(`Time taken: ${(Date.now()-e)/1e3}s.`),X.disableUpdateCheck||o!==a.BETTERDISCORD||await ue()}),R(()=>{document.removeEventListener("click",Pe),document.removeEventListener("keyup",Ze);let e=0;for(let t=0;t<m.length;t++)try{m[t].$destroy(),e++}catch(e){}for(const e of Object.values(H))clearTimeout(e);j&&j.disconnect(),De(!1),i(`${e}/${m.length} internal component(s) cleaned up.`)});const Pe=e=>{const t=p.querySelector(".stickerWindow");if(t){const{x:n,y:i,width:a,height:o}=t.getBoundingClientRect();if(e.target){if(g&&g.element.contains(e.target))return;const t=document.querySelectorAll('[class^="layerContainer-"]');if(t.length&&Array.from(t).some(t=>t.contains(e.target)))return}e.clientX<=n+a&&e.clientX>=n&&e.clientY<=i+o&&e.clientY>=i||Ue(!1)}},Ue=(e,t)=>{if(!document.body.contains(p))return ee("Oh no! Magane was unexpectedly destroyed.. Please consider updating to MaganeBD instead.",{timeout:6e3});t&&g&&t!==g&&(Ue(!1,g),g=null);let i=t||g;if(!i&&m.length&&(i=m.find(e=>document.body.contains(e.element))),!i)return;if(!document.body.contains(i.textArea))return;const a=void 0===e?!v:e;if(a){if(ae(i),!X.ignoreViewportSize&&!G){Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)<=700&&(te("Viewport height is less than 700px, Magane window may not display properly.",{timeout:6e3}),G=!0)}g=i,document.addEventListener("click",Pe)}else document.removeEventListener("click",Pe);n(4,v=a),i.active=a},Fe=()=>{const e=!k;e&&null===y&&_e(0),n(5,k=e)},_e=e=>{n(7,y=e),b[y]||n(6,b[y]=!0,b)},We=e=>{ie({element:e.replace(/([.])/g,"\\$1"),container:p.querySelector(".stickers")})},je=e=>{try{const t=L[e].name;Me(e)&&Q(`Removed pack ${t}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),ee(e.toString(),{nolog:!0})}},Be=async(e,t)=>{const n={id:"",name:"",files:[],count:0,remoteType:0};if(t)for(const e of Object.keys(t))n[e]=t[e];switch(n.remoteType){case 1:n.name=String(e.album.name),n.thumbs=[];for(let t=0;t<e.album.files.length;t++)n.files.push(e.album.files[t].url),n.thumbs.push(e.album.files[t].thumb||null);break;case 2:n.name=String(e.name),n.thumbs=[];for(let t=0;t<e.files.length;t++)n.files.push(e.files[t].url),n.thumbs.push(e.files[t].thumb||null);break;case 0:default:if(["id","name","files"].some(t=>!e[t]))throw new Error("Invalid config. Some required fields are missing.");if(n.id=String(e.id),n.name=String(e.name),e.files.some(e=>"string"!=typeof e))throw new Error('Invalid "files" array. Some values are not string.');if(n.files=e.files,Array.isArray(e.thumbs)){if(e.thumbs.some(e=>"string"!=typeof e&&null!==e))throw new Error('Invalid "thumbs" array. Some values are neither string nor null.');n.thumbs=e.thumbs}n.description=e.description?String(e.description):null,n.homeUrl=e.homeUrl?String(e.homeUrl):null,n.template=e.template?String(e.template):null,e.updateUrl&&(n.updateUrl=String(e.updateUrl))}return n.count=n.files.length,Array.isArray(n.thumbs)&&n.thumbs.every(e=>null===e)&&(n.thumbs=[]),n},ze=async e=>{const t={updateUrl:e};if(!e||!/^https?:\/\//.test(e))throw new Error("URL must have HTTP(s) protocol.");const n=[/^(.+:\/\/)(.+)\/a\/([^/\s]+)/,/^(.+:\/\/)(.+)\/api\/album\/([^/\s]+)/];let a,o={index:-1};for(let t=0;t<n.length;t++){const i=e.match(n[t]);i&&!i.some(e=>void 0===e)&&(o={index:t,result:i})}if(0===o.index||1===o.index){1===o.index&&(e=`${o.result[1]}${o.result[2]}/a/${o.result[3]}`),t.id=`${o.result[2]}-${o.result[3]}`,t.homeUrl=e,t.updateUrl=e;const n=`${o.result[1]}${o.result[2]}/api/album/${o.result[3]}`,s="/view?page=1&limit=500";i("Fetching chibisafe album: "+(n+s));let r=await fetch(n+s,{cache:"no-cache"}).catch(e=>e);if(!r||200!==r.status&&304!==r.status){const e=r&&r.status?`${r.status} ${r.statusText}`.trim():"N/A";i(`HTTP error ${e}, re-trying with: ${n}`),r=await fetch(n,{cache:"no-cache"}),a=await r.json(),t.remoteType=2}else a=await r.json(),t.remoteType=1}if(!a)throw new Error("Unable to parse data. Check your console for details.");return Be(a,t)},Ge=async(e,t=!1)=>{try{if(!L[e]||!L[e].updateUrl)return;t||J("Updating pack information…",{nolog:!0});const i=await ze(L[e].updateUrl);i.id=e;const a=Se(i.id,i,{overwrite:!0});n(8,w=w.filter(t=>t.pack!==e||-1!==a.pack.files.findIndex(e=>e===t.id))),ce("magane.favorites",w),S=S.filter(t=>t.pack!==e||-1!==a.pack.files.findIndex(e=>e===t.id)),ce("magane.stats",S),C[e]&&n(13,C[e].name=a.pack.name,C),Ke();const o=E.findIndex(t=>t.id===e);return-1!==o&&(n(9,E[o]=a.pack,E),n(10,I[o]=a.pack.id,I),ce("magane.subscribed",E)),t||Q(`Updated pack ${a.pack.name}.`,{nolog:!0,timeout:6e3}),a}catch(e){console.error(e),ee(e.toString(),{nolog:!0})}},He=e=>{if(!L[e])return;const t="**ID:**\n\n```\n"+e+"\n```\n\n**Name:**\n\n"+L[e].name+"\n\n**Count:**\n\n"+L[e].count+"\n\n**Description:**\n\n"+(L[e].description||"N/A")+"\n\n**Home URL:**\n\n"+(L[e].homeUrl||"N/A")+"\n\n**Update URL:**\n\n```\n"+(L[e].updateUrl||"N/A")+"\n```\n\n**Remote Type:**\n\n"+(L[e].remoteType?`${L[e].remoteType} – ${V[L[e].remoteType]}`:"N/A");l.Alerts.show(L[e].name,t)},Ve=async()=>{if(T)try{const e=T.match(/^(https?:\/\/store\.line\.me\/((sticker|emoji)shop)\/product\/)?([a-z0-9]+)/);if(!e)return ee("Unsupported LINE Store URL or ID.");let t;if(J("Loading pack information…",{nolog:!0}),"emoji"===e[3]){const n=e[4],i=await fetch("https://magane.moe/api/proxy/emoji/"+n),a=await i.json();t=Te({name:a.title,id:a.id,count:a.len,animated:a.hasAnimation||null})}else{const n=Number(e[4]);if(isNaN(n)||n<0)return ee("Unsupported LINE Stickers ID.");const i=await fetch("https://magane.moe/api/proxy/sticker/"+n),a=await i.json();t=Le({name:a.title,firstid:a.first,count:a.len,animated:a.hasAnimation})}Q(`Added a new pack ${t.pack.name}. You can now subscribe to it from Packs tab.`,{nolog:!0,timeout:6e3}),n(15,T=null)}catch(e){console.error(e),ee(e.toString(),{nolog:!0})}},Xe=(e,t)=>{const n="**Please continue only if you trust the remote packs.**\n\n"+e;l.Alerts.show("Import Remote Packs",n,{confirmText:"Import",cancelText:"Cancel",danger:!0,onConfirm:t})},qe=()=>{if(!M)return;const e=M.split("\n").map(e=>e.trim()).filter(e=>e.length);e.length&&Xe("URLs:\n\n```\n"+e.join("\n")+"\n```",async()=>{const t=[];for(const n of e)try{J("Loading pack information…",{nolog:!0});const e=await ze(n);e.id="custom-"+e.id;const t=Se(e.id,e);Q(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),ee(e.toString(),{nolog:!0}),t.push(n)}t.length?(ee("Failed to add some remote packs. Their URLs have been kept in the input box."),n(16,M=t.join("\n"))):n(16,M="")})},Ye=()=>{document.getElementById("localRemotePackInput").click()},Je=()=>{const e=Object.values(L).filter(e=>e.updateUrl).map(e=>e.id);if(!e.length)return te("You do not have any remote packs that can be updated.");const t=`**Please confirm that you want to update __${e.length}__ remote pack${1===e.length?"":"s"}.**`;l.Alerts.show(`Update ${e.length} remote pack${1===e.length?"":"s"}`,t,{confirmText:"Yes, update all!",cancelText:"Cancel",danger:!0,onConfirm:async()=>{try{for(let t=0;t<e.length;t++){J(`Updating pack ${t+1} out of ${e.length}…`,{nolog:!0,timeout:500});if(!await Ge(e[t],!0))break}Q("Updates completed.",{nolog:!0})}catch(e){te("Updates cancelled due to unexpected errors.",{nolog:!0})}}})},Ke=()=>{const e=A.map(e=>e.pack).filter((e,t,n)=>n.indexOf(e)===t);if(X.frequentlyUsed){S=S.sort((e,t)=>t.used-e.used||t.lastUsed-e.lastUsed).slice(0,Math.ceil(1.5*X.frequentlyUsed));const e=S.slice(0,X.frequentlyUsed);e.forEach(e=>me(e.pack)),n(12,A=e)}else A.length&&n(12,A=[]);e.forEach(ge)},Qe=()=>{const e=parseInt(O,10);if(isNaN(e)||e<0)return ee("Invalid number.");n(20,X.frequentlyUsed=e,X),i("settings['frequentlyUsed'] = "+X.frequentlyUsed),ce("magane.settings",X),0===e?(S=[],ce("magane.stats",S),Q("Settings saved, and stickers usage cleared!",{nolog:!0})):Q("Settings saved!",{nolog:!0}),Ke()},Ze=e=>{for(const t in U)if("key"===t||"code"===t){if(U[t]!==e[t].toLocaleLowerCase())return}else if(U[t]!==e[t])return;e.target&&e.target.classList.contains("supress-magane-hotkey")||m.length&&(e.preventDefault(),Ue())},et=e=>{const t=(P||"").split("+").map(e=>e.trim());if(n(18,P=t.join("+")),P&&t.length){const e={key:null,code:null,altKey:!1,metaKey:!1,shiftKey:!1,ctrlKey:!1};for(let n=0;n<t.length;n++){let i=t[n].toLocaleLowerCase();if(n===t.length-1)/^(ctrl|ctl)/.test(i)&&(i=i.replace(/^(ctrl|ctl)/,"control")),/(right|left)$/.test(i)?(e.code=i,e.key=i.replace(/(right|left)$/,"")):e.key=i;else if(/^alt/.test(i))e.altKey=!0;else if(/^meta/.test(i))e.metaKey=!0;else if(/^shift/.test(i))e.shiftKey=!0;else{if(!/^(control|ctrl|ctl)/.test(i))return ee("Invalid hotkey. If used with modifier keys, only support 1 other key.",{timeout:6e3});e.ctrlKey=!0}}e.code||delete e.code,U=e,document.addEventListener("keyup",Ze)}else U=null,document.removeEventListener("keyup",Ze);e&&(n(20,X.hotkey=P,X),i("settings['hotkey'] = "+X.hotkey),ce("magane.settings",X),Q(U?"Hotkey saved.":"Hotkey cleared.",{nolog:!0}))},tt=()=>{document.getElementById("replaceDatabaseInput").click()},it=()=>{const e=document.createElement("a");let t="";try{J("Exporting database…");const n={};for(const e of Y){const t=le(e);void 0!==t&&(n[e]=t)}const i=JSON.stringify(n),a=new Blob([i]);t=window.URL.createObjectURL(a),e.href=t,e.download=`magane.database.${(new Date).toISOString()}.json`,e.click()}catch(e){console.error(e),ee("Unexpected error occurred. Check your console for details.")}e.remove(),t&&window.URL.revokeObjectURL(t)};return[o,d,p,h,v,k,b,y,w,E,I,$,A,C,L,T,M,O,P,W,X,a,ue,ve,ke,be,xe,Ee,Ie,$e,e=>`<span class="counts"><span>–</span>${e} sticker${1===e?"":"s"}</span>`,e=>{let t=""+e;return"string"==typeof e&&(e.startsWith("startswith-")?t="LINE "+e.replace("startswith-",""):e.startsWith("emojis-")?t="LINE Emojis "+e.replace("emojis-",""):e.startsWith("custom-")&&(t=e.replace("custom-",""))),`<span class="appendix"><span>–</span><span title="ID: ${e}">${t}</span></span>`},Fe,_e,We,e=>{const t=e.target.value.trim();if(13!==e.keyCode||!t.length)return;let i=Number(t);if(isNaN(i)||i<1||i>E.length)return ee(`New position must be ≥ 1 and ≤ ${E.length}.`);i--;let a=e.target.dataset.pack;if(void 0===a)return;he(a)||(a=Number(a));const o=E.findIndex(e=>e.id===a);if(o===i)return;const s=E.splice(o,1);I.splice(o,1),E.splice(i,0,s[0]),I.splice(i,0,s[0].id),e.target.blur(),e.target.value=String(o),n(9,E),n(10,I),ce("magane.subscribed",E),Q(`Moved pack from position ${o+1} to ${i+1}.`)},je,Ge,He,Ve,qe,async e=>{const{files:t}=e.target;if(!t.length)return!1;const n=[];J(`Reading ${t.length} file${1===t.length?"":"s"}…`);for(const e of t)await new Promise((t,a)=>{const o=new FileReader;o.onload=i=>{try{const a=JSON.parse(i.target.result);n.push({name:e.name,data:a}),t()}catch(e){a(e)}},i(`Reading ${e.name}…`),o.readAsText(e)}).catch(t=>{console.error(t),ee(e.name+" is not a valid JSON file.")});e.target.value="";const a=n.map(e=>e.name);Xe("Files:\n\n```\n"+a.join("\n")+"\n```",async()=>{const e=[];for(const t of n)try{const e=await Be(t.data);e.id="custom-"+e.id;const n=Se(e.id,e);Q(`Added a new pack ${n.pack.name}.`,{nolog:!0,timeout:6e3})}catch(n){console.error(n),ee(n.toString(),{nolog:!0}),e.push(t.name)}e.length&&ee(`Failed to add: ${e.join(",")}.`)})},Ye,Je,e=>{const{name:t}=e.target;if(!t)return!1;i(`settings['${t}'] = ${X[t]}`),De(X.enableWindowMagane),ce("magane.settings",X),Q("Settings saved!",{nolog:!0})},Qe,et,e=>{const{files:t}=e.target;if(!t.length)return!1;const a=new FileReader;a.onload=t=>{let i;e.target.value="";try{i=JSON.parse(t.target.result)}catch(e){console.error(e),ee("The selected file is not a valid JSON file.")}let a="This database contains the following data:";const o=[],s=[];for(const e of Y)if(void 0===i[e]||null===i[e])s.push(e);else{let t=null;if(Array.isArray(i[e]))t=i[e].length;else try{t=Object.keys(i[e]).length}catch(e){}let n="";null!==t&&(n=` has **${t}** item${1===t?"":"s"}`),a+=`\n**${e}**${n}`,o.push(e)}o.length||(a="**This is an empty database file.**"),s.length&&(a+=`\nThese missing or invalid field${1===s.length?"":"s"} **will be removed**:`,a+="\n"+s.join("\n")),a+="\n**Please continue only if you trust this database file.**",l.Alerts.show("Replace Database",a.replace(/\n/g,"\n\n"),{confirmText:"Go ahead!",cancelText:"Cancel",danger:!0,onConfirm:async()=>{for(const e of o)ce(e,i[e]);for(const e of s)_.removeItem(e);n(3,h=!0),J("Reloading Magane database…"),Object.assign(X,q),pe(!0),await fe(!0),await Ae(),Q("Magane is now ready!"),n(3,h=!1)}})},i(`Reading ${t[0].name}…`),a.readAsText(t[0])},tt,it,(e,t,n)=>n.pack===e.id&&n.id===t,(e,t)=>t.pack===e.pack&&t.id===e.id,(e,t)=>xe(e.pack,e.id,t),e=>Ie(e.pack,e.id),(e,t)=>xe(e.pack,e.id,t),e=>Ee(e.pack,e.id),e=>Ie(e.pack,e.id),(e,t,n)=>xe(e.id,t,n),(e,t)=>Ee(e.id,t),(e,t)=>Ie(e.id,t),()=>Fe(),()=>We("#pfavorites"),()=>We("#pfrequentlyused"),e=>We("#p"+e.id),()=>Fe(),()=>_e(0),()=>_e(1),()=>_e(2),()=>_e(3),e=>ke(e),e=>He(e.id),e=>Ge(e.id),function(){W=this.value,n(19,W)},e=>ke(e),e=>ve(e),e=>He(e.id),e=>Ge(e.id),e=>je(e.id),function(){T=this.value,n(15,T)},()=>Ve(),function(){M=this.value,n(16,M)},()=>qe(),()=>Ye(),()=>Je(),()=>ue(!0),function(){X.disableUpdateCheck=this.checked,n(20,X)},function(){X.enableWindowMagane=this.checked,n(20,X)},function(){X.disableToasts=this.checked,n(20,X)},function(){X.closeWindowOnSend=this.checked,n(20,X)},function(){X.useLeftToolbar=this.checked,n(20,X)},function(){X.hidePackAppendix=this.checked,n(20,X)},function(){X.disableDownscale=this.checked,n(20,X)},function(){X.disableImportedObfuscation=this.checked,n(20,X)},function(){X.alwaysSendAsLink=this.checked,n(20,X)},function(){X.ctrlInvertSendBehavior=this.checked,n(20,X)},function(){X.ignoreEmbedLinksPermission=this.checked,n(20,X)},function(){X.markAsSpoiler=this.checked,n(20,X)},function(){X.ignoreViewportSize=this.checked,n(20,X)},function(){X.disableSendingWithChatInput=this.checked,n(20,X)},function(){O=this.value,n(17,O)},()=>Qe(),function(){P=this.value,n(18,P)},()=>et(!0),()=>tt(),()=>it(),function(e){D[e?"unshift":"push"](()=>{p=e,n(2,p)})}]}class rt extends J{constructor(e){super(),Y(this,e,st,tt,o,{},null,[-1,-1,-1,-1,-1,-1])}}const ct=()=>{console.log("[MAGANE] > checkDOM()");let e=document.getElementById("maganeContainer");if(e)return;const t=document.querySelector("[class*=baseLayer] > [class*=container] > [class*=base]");t?(console.log("[MAGANE] > DOM ready, injecting!"),e=document.createElement("div"),e.id="maganeContainer",t.insertAdjacentElement("afterbegin",e),window.MAGANE_APP=new rt({target:e})):setTimeout(()=>ct(),500)};"object"==typeof BdApi?ct():console.error("This plugin does not work outside of BetterDiscord!")}();
//# sourceMappingURL=magane.min.js.map
