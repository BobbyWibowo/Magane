!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function r(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}const c="undefined"!=typeof window;let l=c?()=>window.performance.now():()=>Date.now(),d=c?e=>requestAnimationFrame(e):e;const p=new Set;function u(e){p.forEach(t=>{t.c(e)||(p.delete(t),t.f())}),0!==p.size&&d(u)}function m(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function b(){return k(" ")}function w(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function M(e,t){e.value=null==t?"":t}function S(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function $(e,t,n){e.classList[n?"add":"remove"](t)}class I{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){var i;this.e||(this.is_svg?this.e=(i=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",i)):this.e=v(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)g(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(f)}}let A;function T(e){A=e}function E(){if(!A)throw new Error("Function called outside component initialization");return A}const N=[],U=[],L=[],O=[],P=Promise.resolve();let W=!1;function D(e){L.push(e)}const j=new Set;let F=0;function B(){const e=A;do{for(;F<N.length;){const e=N[F];F++,T(e),_(e.$$)}for(T(null),N.length=0,F=0;U.length;)U.pop()();for(let e=0;e<L.length;e+=1){const t=L[e];j.has(t)||(j.add(t),t())}L.length=0}while(N.length);for(;O.length;)O.pop()();W=!1,j.clear(),T(e)}function _(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const R=new Set;function z(e,t){e&&e.i&&(R.delete(e),e.i(t))}function J(e,t){e.d(1),t.delete(e.key)}function H(e,t){-1===e.$$.dirty[0]&&(N.push(e),W||(W=!0,P.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function q(o,s,r,c,l,d,p,u=[-1]){const m=A;T(o);const g=o.$$={fragment:null,ctx:null,props:d,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(m?m.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||m.$$.root};p&&p(g.root);let h=!1;if(g.ctx=r?r(o,s.props||{},(e,t,...n)=>{const i=n.length?n[0]:t;return g.ctx&&l(g.ctx[e],g.ctx[e]=i)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](i),h&&H(o,e)),t}):[],g.update(),h=!0,i(g.before_update),g.fragment=!!c&&c(g.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);g.fragment&&g.fragment.l(e),e.forEach(f)}else g.fragment&&g.fragment.c();s.intro&&z(o.$$.fragment),function(e,n,o,s){const{fragment:r,on_mount:c,on_destroy:l,after_update:d}=e.$$;r&&r.m(n,o),s||D(()=>{const n=c.map(t).filter(a);l?l.push(...n):i(n),e.$$.on_mount=[]}),d.forEach(D)}(o,s.target,s.anchor,s.customElement),B()}T(m)}var Y={$:e=>"string"==typeof e?document.querySelector(e):e,extend:(...e)=>Object.assign(...e),cumulativeOffset(e){let t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}},directScroll:e=>e&&e!==document&&e!==document.body,scrollTop(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollTop=t:e.scrollTop:n?document.documentElement.scrollTop=document.body.scrollTop=t:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(e,t){let n=void 0!==t;return this.directScroll(e)?n?e.scrollLeft=t:e.scrollLeft:n?document.documentElement.scrollLeft=document.body.scrollLeft=t:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const V={container:"body",duration:500,delay:0,offset:0,easing:function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1},onStart:e,onDone:e,onAborting:e,scrollX:!1,scrollY:!0},X=e=>{let{offset:t,duration:n,delay:i,easing:a,x:o=0,y:s=0,scrollX:r,scrollY:c,onStart:m,onDone:g,container:f,onAborting:h,element:v}=e;"function"==typeof t&&(t=t());var k=Y.cumulativeOffset(f),b=v?Y.cumulativeOffset(v):{top:s,left:o},w=Y.scrollLeft(f),y=Y.scrollTop(f),x=b.left-k.left+t,C=b.top-k.top+t,M=x-w,S=C-y;let $=!0,I=!1,A=l()+i,T=A+n;function E(e){e||(I=!0,m(v,{x:o,y:s}))}function N(e){!function(e,t,n){r&&Y.scrollLeft(e,n),c&&Y.scrollTop(e,t)}(f,y+S*e,w+M*e)}function U(){$=!1}return function(e){let t;0===p.size&&d(u),new Promise(n=>{p.add(t={c:e,f:n})})}(e=>{if(!I&&e>=A&&E(!1),I&&e>=T&&(N(1),U(),g(v,{x:o,y:s})),!$)return h(v,{x:o,y:s}),!1;if(I){N(0+1*a((e-A)/n))}return!0}),E(i),N(0),U},Q=e=>X((e=>{let t=Y.extend({},V,e);return t.container=Y.$(t.container),t.element=Y.$(t.element),t})(e));function G(e,t,n){const i=e.slice();return i[116]=t[n],i}function Z(e,t,n){const i=e.slice();return i[116]=t[n],i[120]=n,i}function K(e,t,n){const i=e.slice();return i[116]=t[n],i[120]=n,i}function ee(e,t,n){const i=e.slice();return i[116]=t[n],i[120]=n,i}function te(e,t,n){const i=e.slice();return i[123]=t[n],i[120]=n,i}function ne(e,t,n){const i=e.slice();return i[123]=t[n],i[120]=n,i}function ie(e){let t;return{c(){t=v("h3"),t.textContent="It seems you aren't subscribed to any pack yet. Click the plus symbol on the bottom-left to get started! ðŸŽ‰",x(t,"class","getStarted")},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function ae(e){let t,n,i,a,o,s=e[25](e[7].length)+"",r=e[7],c=[];for(let t=0;t<r.length;t+=1)c[t]=oe(ne(e,r,t));return{c(){t=v("div"),n=v("span"),i=k("Favorites"),a=new I(!1),o=b();for(let e=0;e<c.length;e+=1)c[e].c();a.a=null,x(n,"id","pfavorites"),x(t,"class","pack")},m(e,r){g(e,t,r),m(t,n),m(n,i),a.m(s,n),m(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null)},p(e,n){if(128&n[0]&&s!==(s=e[25](e[7].length)+"")&&a.p(s),11534720&n[0]){let i;for(r=e[7],i=0;i<r.length;i+=1){const a=ne(e,r,i);c[i]?c[i].p(a,n):(c[i]=oe(a),c[i].c(),c[i].m(t,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=r.length}},d(e){e&&f(t),h(c,e)}}}function oe(e){let t,n,a,o,s,c,l,d,p,u;function h(){return e[46](e[123])}function k(){return e[47](e[123])}return{c(){t=v("div"),n=v("img"),c=b(),l=v("div"),l.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',d=b(),x(n,"class","image"),r(n.src,a=""+e[20](e[123].pack,e[123].id))||x(n,"src",a),x(n,"alt",o=e[123].pack+" - "+e[123].id),x(n,"title",s=(e[8][e[123].pack]?e[8][e[123].pack].name:"N/A")+("string"==typeof e[123].pack&&e[123].pack.startsWith("custom-")?" â€“ "+e[123].id:"")),x(l,"class","deleteFavorite"),x(l,"title","Unfavorite"),x(t,"class","sticker")},m(e,i){g(e,t,i),m(t,n),m(t,c),m(t,l),m(t,d),p||(u=[w(n,"click",h),w(l,"click",k)],p=!0)},p(t,i){e=t,128&i[0]&&!r(n.src,a=""+e[20](e[123].pack,e[123].id))&&x(n,"src",a),128&i[0]&&o!==(o=e[123].pack+" - "+e[123].id)&&x(n,"alt",o),384&i[0]&&s!==(s=(e[8][e[123].pack]?e[8][e[123].pack].name:"N/A")+("string"==typeof e[123].pack&&e[123].pack.startsWith("custom-")?" â€“ "+e[123].id:""))&&x(n,"title",s)},d(e){e&&f(t),p=!1,i(u)}}}function se(e){let t,n,i;function a(){return e[50](e[116],e[123])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","deleteFavorite"),x(t,"title","Unfavorite")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function re(e){let t,n,i;function a(){return e[49](e[116],e[123])}return{c(){t=v("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(t,"class","addFavorite"),x(t,"title","Favorite")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ce(e){let t,n,i,a,o,s,c,l,d;function p(...t){return e[43](e[116],e[123],...t)}function u(){return e[48](e[116],e[123])}function h(e,t){return 640&t[0]&&(c=null),null==c&&(c=!(-1!==e[7].findIndex(p))),c?re:se}let k=h(e,[-1,-1,-1,-1,-1]),y=k(e);return{c(){t=v("div"),n=v("img"),s=b(),y.c(),x(n,"class","image"),r(n.src,i=""+e[20](e[116].id,e[123],!1,e[120]))||x(n,"src",i),x(n,"alt",a=e[116].id+" - "+e[123]),x(n,"title",o="string"==typeof e[116].id&&e[116].id.startsWith("custom-")?e[123]:""),x(t,"class","sticker")},m(e,i){g(e,t,i),m(t,n),m(t,s),y.m(t,null),l||(d=w(n,"click",u),l=!0)},p(s,c){e=s,512&c[0]&&!r(n.src,i=""+e[20](e[116].id,e[123],!1,e[120]))&&x(n,"src",i),512&c[0]&&a!==(a=e[116].id+" - "+e[123])&&x(n,"alt",a),512&c[0]&&o!==(o="string"==typeof e[116].id&&e[116].id.startsWith("custom-")?e[123]:"")&&x(n,"title",o),k===(k=h(e,c))&&y?y.p(e,c):(y.d(1),y=k(e),y&&(y.c(),y.m(t,null)))},d(e){e&&f(t),y.d(),l=!1,d()}}}function le(e){let t,n,i,a,o,s,r,c=e[116].name+"",l=e[25](e[116].files.length)+"",d=e[116].files,p=[];for(let t=0;t<d.length;t+=1)p[t]=ce(te(e,d,t));return{c(){t=v("div"),n=v("span"),i=k(c),a=new I(!1),s=b();for(let e=0;e<p.length;e+=1)p[e].c();r=b(),a.a=null,x(n,"id",o="p"+e[116].id),x(t,"class","pack")},m(e,o){g(e,t,o),m(t,n),m(n,i),a.m(l,n),m(t,s);for(let e=0;e<p.length;e+=1)p[e].m(t,null);m(t,r)},p(e,s){if(512&s[0]&&c!==(c=e[116].name+"")&&C(i,c),512&s[0]&&l!==(l=e[25](e[116].files.length)+"")&&a.p(l),512&s[0]&&o!==(o="p"+e[116].id)&&x(n,"id",o),15729280&s[0]){let n;for(d=e[116].files,n=0;n<d.length;n+=1){const i=te(e,d,n);p[n]?p[n].p(i,s):(p[n]=ce(i),p[n].c(),p[n].m(t,r))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}},d(e){e&&f(t),h(p,e)}}}function de(e){let t,n,i,a;function o(){return e[53](e[116])}return{c(){t=v("div"),x(t,"class","pack"),x(t,"title",n=e[116].name),S(t,"background-image",`url(${e[20](e[116].id,e[116].files[0],!1,0)})`)},m(e,n){g(e,t,n),i||(a=w(t,"click",o),i=!0)},p(i,a){e=i,512&a[0]&&n!==(n=e[116].name)&&x(t,"title",n),512&a[0]&&S(t,"background-image",`url(${e[20](e[116].id,e[116].files[0],!1,0)})`)},d(e){e&&f(t),i=!1,a()}}}function pe(e){let t,n,i=[],a=new Map,o=e[9];const s=e=>e[116].id;for(let t=0;t<o.length;t+=1){let n=Z(e,o,t),r=s(n);a.set(r,i[t]=ge(r,n))}return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","tab-content has-scroll-y"),x(t,"style",n=0===e[6]?"":"display: none;")},m(e,n){g(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,r){68751872&r[0]|5&r[1]&&(o=e[9],i=function(e,t,n,i,a,o,s,r,c,l,d,p){let u=e.length,m=o.length,g=u;const f={};for(;g--;)f[e[g].key]=g;const h=[],v=new Map,k=new Map;for(g=m;g--;){const e=p(a,o,g),r=n(e);let c=s.get(r);c?i&&c.p(e,t):(c=l(r,e),c.c()),v.set(r,h[g]=c),r in f&&k.set(r,Math.abs(g-f[r]))}const b=new Set,w=new Set;function y(e){z(e,1),e.m(r,d),s.set(e.key,e),d=e.first,m--}for(;u&&m;){const t=h[m-1],n=e[u-1],i=t.key,a=n.key;t===n?(d=t.first,u--,m--):v.has(a)?!s.has(i)||b.has(i)?y(t):w.has(a)?u--:k.get(i)>k.get(a)?(w.add(i),y(t)):(b.add(a),u--):(c(n,s),u--)}for(;u--;){const t=e[u];v.has(t.key)||c(t,s)}for(;m;)y(h[m-1]);return h}(i,r,s,1,e,o,a,t,J,ge,null,Z)),64&r[0]&&n!==(n=0===e[6]?"":"display: none;")&&x(t,"style",n)},d(e){e&&f(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function ue(e){let t,n,a,o,s,r;return{c(){t=v("div"),n=v("input"),x(n,"class","inputPackIndex"),x(n,"type","text"),x(n,"data-pack",a=e[116].id),n.value=o=e[120]+1,x(t,"class","index")},m(i,a){g(i,t,a),m(t,n),s||(r=[w(n,"click",Ce),w(n,"keypress",e[31])],s=!0)},p(e,t){512&t[0]&&a!==(a=e[116].id)&&x(n,"data-pack",a),512&t[0]&&o!==(o=e[120]+1)&&n.value!==o&&(n.value=o)},d(e){e&&f(t),s=!1,i(r)}}}function me(e){let t,n,i;function a(){return e[60](e[116])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ge(e,t){let n,i,a,o,s,r,c,l,d,p,u,h,y,M,$,A,T,E,N,U,L,O=t[116].name+"",P=t[116].count+"",W=(t[16].hidePackAppendix?"":t[26](t[116].id))+"",D=t[9].length>1&&ue(t);function j(){return t[59](t[116])}let F=t[12][t[116].id]&&t[12][t[116].id].updateUrl&&me(t);return{key:e,first:null,c(){n=v("div"),D&&D.c(),i=b(),a=v("div"),o=b(),s=v("div"),r=v("span"),c=k(O),d=b(),p=v("span"),u=k(P),h=k(" stickers"),y=new I(!1),M=b(),$=v("div"),A=v("button"),A.textContent="Del",T=b(),F&&F.c(),N=b(),x(a,"class","preview"),S(a,"background-image",`url(${t[20](t[116].id,t[116].files[0],!1,0)})`),x(r,"title",l=t[16].hidePackAppendix?"ID: "+t[116].id:""),y.a=null,x(s,"class","info"),x(A,"class","button is-danger"),x(A,"title","Unsubscribe"),x($,"class",E="action"+(t[12][t[116].id]&&t[12][t[116].id].updateUrl?" is-tight":"")),x(n,"class","pack"),this.first=n},m(e,t){g(e,n,t),D&&D.m(n,null),m(n,i),m(n,a),m(n,o),m(n,s),m(s,r),m(r,c),m(s,d),m(s,p),m(p,u),m(p,h),y.m(W,p),m(n,M),m(n,$),m($,A),m($,T),F&&F.m($,null),m(n,N),U||(L=w(A,"click",j),U=!0)},p(e,o){(t=e)[9].length>1?D?D.p(t,o):(D=ue(t),D.c(),D.m(n,i)):D&&(D.d(1),D=null),512&o[0]&&S(a,"background-image",`url(${t[20](t[116].id,t[116].files[0],!1,0)})`),512&o[0]&&O!==(O=t[116].name+"")&&C(c,O),66048&o[0]&&l!==(l=t[16].hidePackAppendix?"ID: "+t[116].id:"")&&x(r,"title",l),512&o[0]&&P!==(P=t[116].count+"")&&C(u,P),66048&o[0]&&W!==(W=(t[16].hidePackAppendix?"":t[26](t[116].id))+"")&&y.p(W),t[12][t[116].id]&&t[12][t[116].id].updateUrl?F?F.p(t,o):(F=me(t),F.c(),F.m($,null)):F&&(F.d(1),F=null),4608&o[0]&&E!==(E="action"+(t[12][t[116].id]&&t[12][t[116].id].updateUrl?" is-tight":""))&&x($,"class",E)},d(e){e&&f(n),D&&D.d(),F&&F.d(),U=!1,L()}}}function fe(e){let t,n=e[11],i=[];for(let t=0;t<n.length;t+=1)i[t]=we(G(e,n,t));return{c(){t=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","packs has-scroll-y"),x(t,"style","")},m(e,n){g(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,a){if(69016576&a[0]|6&a[1]){let o;for(n=e[11],o=0;o<n.length;o+=1){const s=G(e,n,o);i[o]?i[o].p(s,a):(i[o]=we(s),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&f(t),h(i,e)}}}function he(e){let t,n,i;function a(){return e[63](e[116])}return{c(){t=v("button"),t.textContent="Add",x(t,"class","button is-primary"),x(t,"title","Subscribe")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ve(e){let t,n,i;function a(){return e[62](e[116])}return{c(){t=v("button"),t.textContent="Del",x(t,"class","button is-danger"),x(t,"title","Unsubscribe")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function ke(e){let t,n,i,a,o=e[12][e[116].id].updateUrl&&be(e);function s(){return e[65](e[116])}return{c(){o&&o.c(),t=b(),n=v("button"),x(n,"class","button delete-pack"),x(n,"title","Purge")},m(e,r){o&&o.m(e,r),g(e,t,r),g(e,n,r),i||(a=w(n,"click",s),i=!0)},p(n,i){(e=n)[12][e[116].id].updateUrl?o?o.p(e,i):(o=be(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&f(t),e&&f(n),i=!1,a()}}}function be(e){let t,n,i;function a(){return e[64](e[116])}return{c(){t=v("button"),t.textContent="Up",x(t,"class","button update-pack"),x(t,"title","Update")},m(e,o){g(e,t,o),n||(i=w(t,"click",a),n=!0)},p(t,n){e=t},d(e){e&&f(t),n=!1,i()}}}function we(e){let t,n,i,a,o,s,r,c,l,d,p,u,h,w,y,M,$,A,T=e[116].name+"",E=e[116].count+"",N=(e[16].hidePackAppendix?"":e[26](e[116].id))+"";function U(e,t){return 3072&t[0]&&(y=null),null==y&&(y=!!e[10].includes(e[116].id)),y?ve:he}let L=U(e,[-1,-1,-1,-1,-1]),O=L(e),P=e[12][e[116].id]&&ke(e);return{c(){t=v("div"),n=v("div"),i=b(),a=v("div"),o=v("span"),s=k(T),c=b(),l=v("span"),d=k(E),p=k(" stickers"),u=new I(!1),h=b(),w=v("div"),O.c(),M=b(),P&&P.c(),A=b(),x(n,"class","preview"),S(n,"background-image",`url(${e[20](e[116].id,e[116].files[0],!1,0)})`),x(o,"title",r=e[16].hidePackAppendix?"ID: "+e[116].id:""),u.a=null,x(a,"class","info"),x(w,"class",$="action"+(e[12][e[116].id]?" is-tight":"")),x(t,"class","pack")},m(e,r){g(e,t,r),m(t,n),m(t,i),m(t,a),m(a,o),m(o,s),m(a,c),m(a,l),m(l,d),m(l,p),u.m(N,l),m(t,h),m(t,w),O.m(w,null),m(w,M),P&&P.m(w,null),m(t,A)},p(e,t){2048&t[0]&&S(n,"background-image",`url(${e[20](e[116].id,e[116].files[0],!1,0)})`),2048&t[0]&&T!==(T=e[116].name+"")&&C(s,T),67584&t[0]&&r!==(r=e[16].hidePackAppendix?"ID: "+e[116].id:"")&&x(o,"title",r),2048&t[0]&&E!==(E=e[116].count+"")&&C(d,E),67584&t[0]&&N!==(N=(e[16].hidePackAppendix?"":e[26](e[116].id))+"")&&u.p(N),L===(L=U(e,t))&&O?O.p(e,t):(O.d(1),O=L(e),O&&(O.c(),O.m(w,M))),e[12][e[116].id]?P?P.p(e,t):(P=ke(e),P.c(),P.m(w,null)):P&&(P.d(1),P=null),6144&t[0]&&$!==($="action"+(e[12][e[116].id]?" is-tight":""))&&x(w,"class",$)},d(e){e&&f(t),O.d(),P&&P.d()}}}function ye(t){let n,a,o,s,r,c,l,d,p,u,C,I,A,T,E,N,U,L,O,P,W,D,j,F,B,_,R,z,J,H,q,Y,V,X,Q,G,Z,te,ne,oe,se,re,ce,ue,me,ge,he,ve,ke,be,we,ye,xe,Ce,$e,Ie,Ae,Te,Ee,Ne,Ue,Le,Oe,Pe,We,De,je,Fe,Be,_e,Re,ze,Je,He,qe,Ye,Ve,Xe,Qe,Ge,Ze,Ke,et,tt,nt,it,at,ot,st,rt,ct,lt,dt,pt,ut,mt,gt,ft,ht,vt,kt,bt,wt,yt,xt,Ct,Mt,St,$t,It,At,Tt,Et,Nt,Ut,Lt,Ot,Pt,Wt,Dt,jt,Ft,Bt,_t,Rt,zt,Jt,Ht,qt=!t[7]&&!t[9]&&ie(),Yt=t[7]&&t[7].length&&ae(t),Vt=t[9],Xt=[];for(let e=0;e<Vt.length;e+=1)Xt[e]=le(ee(t,Vt,e));let Qt=t[22]&&t[22].length&&function(t){let n,i,a;return{c(){n=v("div"),n.innerHTML='<div class="icon-favorite"></div>',x(n,"class","pack"),x(n,"title","Favorites")},m(e,o){g(e,n,o),i||(a=w(n,"click",t[52]),i=!0)},p:e,d(e){e&&f(n),i=!1,a()}}}(t),Gt=t[9],Zt=[];for(let e=0;e<Gt.length;e+=1)Zt[e]=de(K(t,Gt,e));let Kt=t[5][0]&&pe(t),en=t[5][1]&&fe(t);return{c(){n=v("main"),a=v("div"),o=v("div"),o.innerHTML='<img class="channel-textarea-stickers-content" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2224%22%20height%3D%2224%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M18.5%2011c-4.136%200-7.5%203.364-7.5%207.5c0%20.871.157%201.704.432%202.482l9.551-9.551A7.462%207.462%200%200%200%2018.5%2011z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3Cpath%20d%3D%22M12%202C6.486%202%202%206.486%202%2012c0%204.583%203.158%208.585%207.563%209.69A9.431%209.431%200%200%201%209%2018.5C9%2013.262%2013.262%209%2018.5%209c1.12%200%202.191.205%203.19.563C20.585%205.158%2016.583%202%2012%202z%22%20fill%3D%22%23b9bbbe%22%2F%3E%3C%2Fsvg%3E" alt="Magane menu button"/>',s=b(),r=v("div"),c=v("div"),qt&&qt.c(),l=b(),Yt&&Yt.c(),d=b();for(let e=0;e<Xt.length;e+=1)Xt[e].c();u=b(),C=v("div"),I=v("div"),A=v("div"),T=v("div"),T.innerHTML='<div class="icon-plus"></div>',E=b(),Qt&&Qt.c(),N=b(),U=v("div"),L=v("div");for(let e=0;e<Zt.length;e+=1)Zt[e].c();P=b(),W=v("div"),D=v("div"),j=b(),F=v("div"),B=v("div"),_=v("div"),R=v("div"),R.textContent="Installed",z=b(),J=v("div"),J.textContent="Packs",H=b(),q=v("div"),q.textContent="Import",Y=b(),V=v("div"),V.textContent="Misc",X=b(),Kt&&Kt.c(),Q=b(),G=v("div"),Z=v("input"),te=b(),en&&en.c(),oe=b(),se=v("div"),re=v("div"),ce=v("p"),ce.textContent="LINE Store Proxy",ue=b(),me=v("p"),me.innerHTML='If you are looking for a sticker pack that is not provided by Magane, you can go to the <a href="https://store.line.me/" target="_blank">LINE Store</a> and pick whatever pack you want and paste the full URL in the box below.',ge=b(),he=v("p"),he.textContent="e.g. https://store.line.me/stickershop/product/17573/ja",ve=b(),ke=v("p"),be=v("input"),we=b(),ye=v("button"),ye.textContent="Add",xe=b(),Ce=v("div"),$e=v("p"),$e.textContent="Remote Packs",Ie=b(),Ae=v("p"),Ae.innerHTML='You can paste URL to a JSON config file of a remote pack in here.<br/>\n\t\t\t\t\t\t\t\t\tThis also supports public album links of any file hosting websites running <a href="https://github.com/WeebDev/chibisafe" target="_blank">Chibisafe</a>.',Te=b(),Ee=v("p"),Ee.innerHTML="e.g. https://example.com/packs/my_custom_pack.json<br/>\n\t\t\t\t\t\t\t\t\thttps://chibisafe.moe/a/my_album",Ne=b(),Ue=v("p"),Le=v("input"),Oe=b(),Pe=v("button"),Pe.textContent="Add",We=b(),De=v("p"),je=v("input"),Fe=b(),Be=v("button"),Be.textContent="Load local JSON",_e=b(),Re=v("p"),ze=v("button"),ze.textContent="Update all remote packs",He=b(),qe=v("div"),Ye=v("div"),Ve=v("p"),Ve.textContent="Settings",Xe=b(),Qe=v("p"),Ge=v("label"),Ze=v("input"),Ke=k("\n\t\t\t\t\t\t\t\t\t\tDisable Toasts"),et=b(),tt=v("p"),nt=v("label"),it=v("input"),at=k("\n\t\t\t\t\t\t\t\t\t\tClose window when sending a sticker"),ot=b(),st=v("p"),rt=v("label"),ct=v("input"),lt=k("\n\t\t\t\t\t\t\t\t\t\tUse left toolbar instead of bottom toolbar on main window"),dt=b(),pt=v("p"),ut=v("label"),mt=v("input"),gt=k("\n\t\t\t\t\t\t\t\t\t\tHide pack's appendix in packs list (e.g. its numerical ID)"),ft=b(),ht=v("p"),vt=v("label"),kt=v("input"),bt=k("\n\t\t\t\t\t\t\t\t\t\tDisable downscaling of manually imported LINE Store packs"),wt=b(),yt=v("p"),xt=v("label"),Ct=v("input"),Mt=k("\n\t\t\t\t\t\t\t\t\t\tDisable obfuscation of files names for imported custom packs"),St=b(),$t=v("p"),It=v("label"),At=v("input"),Tt=k("\n\t\t\t\t\t\t\t\t\t\tMark stickers as spoilers when sending"),Et=b(),Nt=v("div"),Ut=v("p"),Ut.textContent="Database",Lt=b(),Ot=v("p"),Pt=v("input"),Wt=b(),Dt=v("button"),Dt.textContent="Replace Database",jt=b(),Ft=v("p"),Bt=v("button"),Bt.textContent="Export Database",x(o,"class","magane-button channel-textarea-emoji channel-textarea-stickers"),$(o,"active",t[3]),x(c,"class",p="stickers has-scroll-y "+(t[16].useLeftToolbar?"has-left-toolbar":"")),x(c,"style",""),x(T,"class","pack"),x(T,"title","Manage subscribed packs"),x(A,"class","packs-wrapper"),x(I,"class","packs packs-controls"),x(L,"class","packs-wrapper"),x(U,"class","packs"),x(U,"style",""),x(C,"class",O="packs-toolbar "+(t[16].useLeftToolbar?"has-scroll-y":"has-scroll-x")),x(D,"class","modal-close"),x(R,"class","tab"),$(R,"is-active",0===t[6]),x(J,"class","tab"),$(J,"is-active",1===t[6]),x(q,"class","tab"),$(q,"is-active",2===t[6]),x(V,"class","tab"),$(V,"is-active",3===t[6]),x(_,"class","tabs"),x(Z,"class","inputQuery"),x(Z,"type","text"),x(Z,"placeholder","Search"),x(G,"class","tab-content avail-packs"),x(G,"style",ne=1===t[6]?"":"display: none;"),x(ce,"class","section-title"),x(be,"class","inputQuery"),x(be,"type","text"),x(be,"placeholder","LINE Sticker Pack URL"),x(ye,"class","button is-primary"),x(ke,"class","input-grouped"),x(re,"class","section line-proxy"),x($e,"class","section-title"),x(Le,"class","inputQuery"),x(Le,"type","text"),x(Le,"placeholder","Remote Pack JSON or Chibisafe Album URL"),x(Pe,"class","button is-primary"),x(Ue,"class","input-grouped"),x(je,"id","localRemotePackInput"),x(je,"type","file"),S(je,"display","none"),x(je,"accept","application/JSON"),x(Be,"class","button has-width-full"),x(ze,"class","button is-primary has-width-full"),x(Ce,"class","section remote-packs"),x(se,"class","tab-content has-scroll-y import"),x(se,"style",Je=2===t[6]?"":"display: none;"),x(Ve,"class","section-title"),x(Ze,"name","disableToasts"),x(Ze,"type","checkbox"),x(it,"name","closeWindowOnSend"),x(it,"type","checkbox"),x(ct,"name","useLeftToolbar"),x(ct,"type","checkbox"),x(mt,"name","hidePackAppendix"),x(mt,"type","checkbox"),x(kt,"name","disableDownscale"),x(kt,"type","checkbox"),x(Ct,"name","disableImportedObfuscation"),x(Ct,"type","checkbox"),x(At,"name","markAsSpoiler"),x(At,"type","checkbox"),x(Ye,"class","section settings"),x(Ut,"class","section-title"),x(Pt,"id","replaceDatabaseInput"),x(Pt,"type","file"),S(Pt,"display","none"),x(Pt,"accept","application/JSON"),x(Dt,"class","button is-danger has-width-full"),x(Bt,"class","button is-primary has-width-full"),x(Nt,"class","section database"),x(qe,"class","tab-content has-scroll-y misc"),x(qe,"style",_t=3===t[6]?"":"display: none;"),x(B,"class","stickersConfig"),x(F,"class","modal-content"),x(W,"class","stickersModal"),x(W,"style",Rt=t[4]?"":"display: none;"),x(r,"class","stickerWindow"),x(r,"style",zt="bottom: "+t[0].wbottom+"px; right: "+t[0].wright+"px; "+(t[3]?"":"display: none;")),x(a,"id","magane"),S(a,"top",t[0].top+"px"),S(a,"left",t[0].left+"px"),S(a,"display",t[2]?"flex":"none")},m(e,i){g(e,n,i),m(n,a),m(a,o),m(a,s),m(a,r),m(r,c),qt&&qt.m(c,null),m(c,l),Yt&&Yt.m(c,null),m(c,d);for(let e=0;e<Xt.length;e+=1)Xt[e].m(c,null);m(r,u),m(r,C),m(C,I),m(I,A),m(A,T),m(A,E),Qt&&Qt.m(A,null),m(C,N),m(C,U),m(U,L);for(let e=0;e<Zt.length;e+=1)Zt[e].m(L,null);var p;m(r,P),m(r,W),m(W,D),m(W,j),m(W,F),m(F,B),m(B,_),m(_,R),m(_,z),m(_,J),m(_,H),m(_,q),m(_,Y),m(_,V),m(B,X),Kt&&Kt.m(B,null),m(B,Q),m(B,G),m(G,Z),M(Z,t[15]),m(G,te),en&&en.m(G,null),m(B,oe),m(B,se),m(se,re),m(re,ce),m(re,ue),m(re,me),m(re,ge),m(re,he),m(re,ve),m(re,ke),m(ke,be),M(be,t[13]),m(ke,we),m(ke,ye),m(se,xe),m(se,Ce),m(Ce,$e),m(Ce,Ie),m(Ce,Ae),m(Ce,Te),m(Ce,Ee),m(Ce,Ne),m(Ce,Ue),m(Ue,Le),M(Le,t[14]),m(Ue,Oe),m(Ue,Pe),m(Ce,We),m(Ce,De),m(De,je),m(De,Fe),m(De,Be),m(Ce,_e),m(Ce,Re),m(Re,ze),m(B,He),m(B,qe),m(qe,Ye),m(Ye,Ve),m(Ye,Xe),m(Ye,Qe),m(Qe,Ge),m(Ge,Ze),Ze.checked=t[16].disableToasts,m(Ge,Ke),m(Ye,et),m(Ye,tt),m(tt,nt),m(nt,it),it.checked=t[16].closeWindowOnSend,m(nt,at),m(Ye,ot),m(Ye,st),m(st,rt),m(rt,ct),ct.checked=t[16].useLeftToolbar,m(rt,lt),m(Ye,dt),m(Ye,pt),m(pt,ut),m(ut,mt),mt.checked=t[16].hidePackAppendix,m(ut,gt),m(Ye,ft),m(Ye,ht),m(ht,vt),m(vt,kt),kt.checked=t[16].disableDownscale,m(vt,bt),m(Ye,wt),m(Ye,yt),m(yt,xt),m(xt,Ct),Ct.checked=t[16].disableImportedObfuscation,m(xt,Mt),m(Ye,St),m(Ye,$t),m($t,It),m(It,At),At.checked=t[16].markAsSpoiler,m(It,Tt),m(qe,Et),m(qe,Nt),m(Nt,Ut),m(Nt,Lt),m(Nt,Ot),m(Ot,Pt),m(Ot,Wt),m(Ot,Dt),m(Nt,jt),m(Nt,Ft),m(Ft,Bt),t[81](n),Jt||(Ht=[w(o,"click",t[44]),w(o,"contextmenu",y((p=t[45],function(e){return e.preventDefault(),p.call(this,e)}))),w(T,"click",t[51]),w(D,"click",t[54]),w(R,"click",t[55]),w(J,"click",t[56]),w(q,"click",t[57]),w(V,"click",t[58]),w(Z,"keyup",t[24]),w(Z,"input",t[61]),w(be,"input",t[66]),w(ye,"click",t[67]),w(Le,"input",t[68]),w(Pe,"click",t[69]),w(je,"click",Me),w(je,"change",t[36]),w(Be,"click",t[70]),w(ze,"click",t[71]),w(Ze,"change",t[72]),w(it,"change",t[73]),w(ct,"change",t[74]),w(mt,"change",t[75]),w(kt,"change",t[76]),w(Ct,"change",t[77]),w(At,"change",t[78]),w(Ye,"change",t[39]),w(Pt,"click",Se),w(Pt,"change",t[40]),w(Dt,"click",t[79]),w(Bt,"click",t[80])],Jt=!0)},p(e,t){if(8&t[0]&&$(o,"active",e[3]),e[7]||e[9]?qt&&(qt.d(1),qt=null):qt||(qt=ie(),qt.c(),qt.m(c,l)),e[7]&&e[7].length?Yt?Yt.p(e,t):(Yt=ae(e),Yt.c(),Yt.m(c,d)):Yt&&(Yt.d(1),Yt=null),49283712&t[0]){let n;for(Vt=e[9],n=0;n<Vt.length;n+=1){const i=ee(e,Vt,n);Xt[n]?Xt[n].p(i,t):(Xt[n]=le(i),Xt[n].c(),Xt[n].m(c,null))}for(;n<Xt.length;n+=1)Xt[n].d(1);Xt.length=Vt.length}if(65536&t[0]&&p!==(p="stickers has-scroll-y "+(e[16].useLeftToolbar?"has-left-toolbar":""))&&x(c,"class",p),e[22]&&e[22].length&&Qt.p(e,t),1074790912&t[0]){let n;for(Gt=e[9],n=0;n<Gt.length;n+=1){const i=K(e,Gt,n);Zt[n]?Zt[n].p(i,t):(Zt[n]=de(i),Zt[n].c(),Zt[n].m(L,null))}for(;n<Zt.length;n+=1)Zt[n].d(1);Zt.length=Gt.length}65536&t[0]&&O!==(O="packs-toolbar "+(e[16].useLeftToolbar?"has-scroll-y":"has-scroll-x"))&&x(C,"class",O),64&t[0]&&$(R,"is-active",0===e[6]),64&t[0]&&$(J,"is-active",1===e[6]),64&t[0]&&$(q,"is-active",2===e[6]),64&t[0]&&$(V,"is-active",3===e[6]),e[5][0]?Kt?Kt.p(e,t):(Kt=pe(e),Kt.c(),Kt.m(B,Q)):Kt&&(Kt.d(1),Kt=null),32768&t[0]&&Z.value!==e[15]&&M(Z,e[15]),e[5][1]?en?en.p(e,t):(en=fe(e),en.c(),en.m(G,null)):en&&(en.d(1),en=null),64&t[0]&&ne!==(ne=1===e[6]?"":"display: none;")&&x(G,"style",ne),8192&t[0]&&be.value!==e[13]&&M(be,e[13]),16384&t[0]&&Le.value!==e[14]&&M(Le,e[14]),64&t[0]&&Je!==(Je=2===e[6]?"":"display: none;")&&x(se,"style",Je),65536&t[0]&&(Ze.checked=e[16].disableToasts),65536&t[0]&&(it.checked=e[16].closeWindowOnSend),65536&t[0]&&(ct.checked=e[16].useLeftToolbar),65536&t[0]&&(mt.checked=e[16].hidePackAppendix),65536&t[0]&&(kt.checked=e[16].disableDownscale),65536&t[0]&&(Ct.checked=e[16].disableImportedObfuscation),65536&t[0]&&(At.checked=e[16].markAsSpoiler),64&t[0]&&_t!==(_t=3===e[6]?"":"display: none;")&&x(qe,"style",_t),16&t[0]&&Rt!==(Rt=e[4]?"":"display: none;")&&x(W,"style",Rt),9&t[0]&&zt!==(zt="bottom: "+e[0].wbottom+"px; right: "+e[0].wright+"px; "+(e[3]?"":"display: none;"))&&x(r,"style",zt),1&t[0]&&S(a,"top",e[0].top+"px"),1&t[0]&&S(a,"left",e[0].left+"px"),4&t[0]&&S(a,"display",e[2]?"flex":"none")},i:e,o:e,d(e){e&&f(n),qt&&qt.d(),Yt&&Yt.d(),h(Xt,e),Qt&&Qt.d(),h(Zt,e),Kt&&Kt.d(),en&&en.d(),t[81](null),Jt=!1,i(Ht)}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('/** Magane: main.scss **/\ndiv#magane {\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  position: absolute;\n  z-index: 99;\n}\ndiv#magane button, div#magane input, div#magane select, div#magane label, div#magane span, div#magane p, div#magane a, div#magane li, div#magane ul, div#magane div {\n  font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;\n  color: var(--header-secondary);\n  font-weight: 400;\n  line-height: 1.5;\n  font-size: 16px;\n  text-rendering: optimizeLegibility;\n  -webkit-text-size-adjust: 100%;\n     -moz-text-size-adjust: 100%;\n          text-size-adjust: 100%;\n}\ndiv#magane div.channel-textarea-stickers {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\ndiv#magane div.channel-textarea-stickers:hover, div#magane div.channel-textarea-stickers.active {\n  filter: brightness(1.35);\n}\ndiv#magane img.channel-textarea-stickers-content {\n  width: 24px;\n  height: 24px;\n  padding: 4px;\n  margin-left: 2px;\n  margin-right: 2px;\n}\ndiv#magane div.stickerWindow {\n  z-index: 2000;\n  width: 600px;\n  min-height: 200px;\n  position: fixed;\n  background: var(--background-secondary);\n  max-height: 600px;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n  box-shadow: var(--elevation-stroke), var(--elevation-high);\n}\ndiv#magane div.stickerWindow div.stickers {\n  height: 550px !important;\n  margin-bottom: 100px;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers.has-left-toolbar {\n  height: 600px !important;\n  margin-left: 50px;\n}\ndiv#magane div.stickerWindow div.stickers h3.getStarted {\n  text-align: center;\n  padding-top: 40%;\n  pointer-events: none;\n}\ndiv#magane div.stickerWindow div.stickers div.pack {\n  float: left;\n  display: flex;\n  flex-flow: wrap;\n  justify-content: center;\n  padding: 25px;\n  width: 100%;\n  box-sizing: border-box;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span {\n  color: var(--header-secondary);\n  width: 100%;\n  cursor: auto;\n  padding-left: 10px;\n  margin: 10px 0px;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts {\n  padding-left: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack span .counts span {\n  padding: 0 0.5em;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100px;\n  height: 100px;\n  float: left;\n  position: relative;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker .image {\n  cursor: pointer;\n  max-height: 100%;\n  max-width: 100%;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  right: 0;\n  transition: all 0.2s ease;\n  display: none;\n  z-index: 2;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  transition: all 0.2s ease;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite {\n  bottom: 0;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path {\n  fill: #2ECC71;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n  top: 0px;\n  transform: rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n  transform: scale(1.25) rotateZ(45deg);\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n  fill: #F04747;\n}\ndiv#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.deleteFavorite {\n  display: block;\n  cursor: pointer;\n}\ndiv#magane div.stickerWindow div.packs-toolbar {\n  position: absolute;\n  bottom: 0;\n  background: var(--background-tertiary);\n  display: flex;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x {\n  width: 100%;\n  height: 50px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs {\n  flex: 1 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs.packs-controls {\n  flex: 0 0 auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-x div.packs div.packs-wrapper {\n  white-space: nowrap;\n  float: left;\n  width: 100%;\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y {\n  width: 50px;\n  height: 100%;\n  flex-direction: column;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs {\n  flex: 1 1 auto;\n  height: 100%;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs.packs-controls {\n  flex: 0 0 auto;\n  height: auto;\n}\ndiv#magane div.stickerWindow div.packs-toolbar.has-scroll-y div.packs div.packs-wrapper {\n  font-size: 0; /* quick hax to clear whitespace */\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack {\n  display: inline-block;\n  height: 40px;\n  width: 40px;\n  margin: 5px;\n  cursor: pointer;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  transition: all 0.2s ease;\n  filter: grayscale(100%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack:hover,\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.pack.active {\n  transform: scale(1.25);\n  filter: grayscale(0%);\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack > div {\n  background-image: url("/assets/f24711dae4f6d6b28335e866a93e9d9b.png");\n  width: 22px;\n  height: 22px;\n  background-size: 924px 704px;\n  background-repeat: no-repeat;\n  margin-top: 8px;\n  margin-left: 9px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-favorite {\n  background-position: -462px -132px;\n}\ndiv#magane div.stickerWindow div.packs-toolbar div.packs div.pack div.icon-plus {\n  background-position: -374px -484px;\n  /* make it greenish */\n  filter: hue-rotate(260deg) brightness(3) contrast(4.5);\n}\ndiv#magane .stickersModal {\n  z-index: 2001;\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  align-items: center;\n  justify-content: center;\n}\ndiv#magane .stickersModal.is-active {\n  display: flex;\n}\ndiv#magane .stickersModal .inputQuery {\n  width: calc(100% - 30px);\n  height: 36px;\n  box-sizing: border-box;\n  margin: 0 15px 10px;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .inputPackIndex {\n  width: 55px;\n  height: 36px;\n  box-sizing: border-box;\n  padding: 5px 12px;\n  border-radius: 3px;\n  border: 1px solid var(--background-secondary);\n  background: var(--background-secondary);\n  color: var(--header-secondary);\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-background {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(10, 10, 10, 0.86);\n}\ndiv#magane .stickersModal .modal-content,\ndiv#magane .stickersModal .modal-card {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: var(--background-tertiary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs {\n  width: 100%;\n  text-align: center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab {\n  color: var(--header-secondary);\n  display: inline-block;\n  border: none;\n  border-top: 0px transparent;\n  border-left: 0px transparent;\n  border-right: 0px transparent;\n  border-width: 1px;\n  border-style: solid;\n  border-bottom-color: var(--header-secondary);\n  padding: 20px;\n  cursor: pointer;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig .tabs .tab:hover, div#magane .stickersModal .modal-content .stickersConfig .tabs .tab.is-active {\n  border-bottom-color: var(--interactive-active);\n  color: var(--interactive-active);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content {\n  height: calc(100% - 66px); /* .tabs height */\n  width: 100%;\n  padding: 10px 0;\n  box-sizing: border-box;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs {\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.avail-packs .packs {\n  height: 100%;\n  width: 100%;\n  padding-bottom: 10px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section {\n  padding: 0 24px 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section .section-title, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section .section-title {\n  font-weight: 800;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section > p:last-of-type, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section > p:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a {\n  /* inherit Discord\'s link color */\n  color: var(--text-link);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .section a:hover, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .section a:hover {\n  text-decoration: underline;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped {\n  display: flex;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped input, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped input {\n  margin: 0;\n  width: auto;\n  flex-grow: 1;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.tab-content.import .input-grouped button, div#magane .stickersModal .modal-content .stickersConfig div.tab-content.misc .input-grouped button {\n  margin-left: 4px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack {\n  height: 75px;\n  width: 100%;\n  float: left;\n  display: flex;\n  padding: 0 20px;\n  box-sizing: border-box;\n  margin-bottom: 5px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack:last-of-type {\n  margin-bottom: 0;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle,\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  flex: 0 0 auto;\n  min-width: 75px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  flex: 1 0 auto;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action.is-tight button {\n  width: auto;\n  padding-right: 0.5em;\n  padding-left: 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack {\n  width: 36px;\n  height: 36px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before, div#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action button.delete-pack:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.index {\n  padding-top: 20px;\n  text-align: left;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n  height: 75px;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle {\n  padding: 20px;\n  cursor: move;\n  padding-top: 30px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.handle span {\n  background: #555;\n  height: 2px;\n  width: 100%;\n  display: block;\n  margin-bottom: 6px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n  padding-top: 20px;\n  text-align: right;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info {\n  flex: 1 1 auto;\n  padding: 14px;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span {\n  display: block;\n  width: 100%;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span:nth-of-type(1) {\n  font-weight: bold;\n  color: var(--header-secondary);\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(1) {\n  padding: 0 0.5em;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(2) {\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n}\ndiv#magane .stickersModal .modal-content .stickersConfig div.pack div.preview img {\n  height: 100%;\n  width: 100%;\n}\ndiv#magane .stickersModal .modal-close {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  background-color: rgba(10, 10, 10, 0.2);\n  border: none;\n  border-radius: 290486px;\n  cursor: pointer;\n  display: inline-block;\n  flex-grow: 0;\n  flex-shrink: 0;\n  font-size: 0;\n  outline: none;\n  vertical-align: top;\n  background: none;\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  height: 32px;\n  max-height: 32px;\n  max-width: 32px;\n  min-height: 32px;\n  min-width: 32px;\n  width: 32px;\n  z-index: 1;\n}\ndiv#magane .stickersModal .modal-close:before, div#magane .stickersModal .modal-close:after {\n  background-color: var(--header-secondary);\n  content: "";\n  display: block;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotate(45deg);\n  transform-origin: center center;\n}\ndiv#magane .stickersModal .modal-close:before {\n  height: 2px;\n  width: 50%;\n}\ndiv#magane .stickersModal .modal-close:after {\n  height: 50%;\n  width: 2px;\n}\ndiv#magane .stickersModal .modal-close:hover, div#magane .stickersModal .modal-close:focus {\n  background-color: rgba(10, 10, 10, 0.3);\n}\ndiv#magane .button {\n  align-items: center;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  box-shadow: none;\n  display: inline-flex;\n  font-size: 1rem;\n  padding: calc(0.375em - 1px) 0.75em;\n  position: relative;\n  vertical-align: top;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  cursor: pointer;\n  justify-content: center;\n  text-align: center;\n  white-space: nowrap;\n  border-color: transparent;\n  color: var(--header-secondary);\n  background-color: var(--background-secondary);\n  width: 62px; /* consistent width */\n}\ndiv#magane .button.is-danger {\n  color: #ffffff;\n  border-color: rgba(240, 71, 71, 0.3);\n  background: #f04747;\n}\ndiv#magane .button:hover, div#magane .button.is-primary:hover {\n  transform: scale3d(1.1, 1.1, 1.1);\n}\ndiv#magane .button.has-width-full {\n  width: 100%;\n}\ndiv#magane .button.has-width-full:hover {\n  /* TODO: Figure out how to do a more consistent scaling,\n    regardless of the button\'s dynamic size. */\n  transform: scale3d(1.04, 1.04, 1.04);\n}\ndiv#magane .has-scroll-x {\n  overflow-x: overlay;\n}\ndiv#magane .has-scroll-y {\n  overflow-y: overlay;\n}\ndiv#magane ::-webkit-scrollbar {\n  /* Let\'s make the scrollbars pretty */\n  width: 6px;\n  height: 6px;\n}\ndiv#magane ::-webkit-scrollbar-track {\n  margin: 0;\n  background: transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-track-piece {\n  border: 0 solid transparent;\n  background: transparent;\n  margin: 0;\n}\ndiv#magane ::-webkit-scrollbar-thumb {\n  background: rgba(105, 96, 128, 0.5);\n  border: 0 solid transparent;\n  border-radius: 5px;\n}\ndiv#magane ::-webkit-scrollbar-thumb:hover {\n  background: rgba(105, 96, 128, 0.75);\n}\ndiv#magane ::-webkit-scrollbar-thumb:active {\n  background: #696080;\n}');const xe=/^(startswith|emojis|custom)-/,Ce=e=>e.target.select(),Me=e=>e.stopPropagation(),Se=e=>e.stopPropagation();function $e(e,t,n){window.magane={};const i={},a={top:0,left:0};let o=null,s=null,r=null,c=!1,l=null,d="",p=!1,u=!1;const m={};let g=null,f=[];const h={};let v=[],k=[],b=[],w=[];const y={};let x=null,C=null,M=!1,S=null,$=null,I=null;const A={},T={disableToasts:!1,closeWindowOnSend:!1,disableDownscale:!1,useLeftToolbar:!1,disableImportedObfuscation:!1,markAsSpoiler:!1,hidePackAppendix:!1},N=["magane.available","magane.subscribed","magane.favorites","magane.settings"],L=(e,t="log")=>console[t]("%c[Magane]%c","color: #3a71c1; font-weight: 700","",e),O=(e,t={})=>{if(!t.nolog||T.disableToasts){const n=["log","info","warn","error"].includes(t.type)?t.type:"log";L(e,n)}T.disableToasts||BdApi.showToast(e,t)},P=(e,t={})=>(t.type="info",O(e,t)),W=(e,t={})=>(t.type="success",O(e,t)),D=(e,t={})=>(t.type="error",O(e,t)),j=(e,t={})=>(t.type="warn",O(e,t)),F=(e,t)=>{let n;return t&&L(`Waiting for ${t}â€¦`),new Promise(t=>{(n=()=>{const i=document.querySelector(e);if(i)return delete A[e],t(i);A[e]=setTimeout(n,500)})()})},B=async()=>{if(A['[class*="baseLayer"]:is([style=""], :not([style]))'])return;n(2,c=!1),await F('[class*="baseLayer"]:is([style=""], :not([style]))'),L("Updating button's positionâ€¦");const e=r.querySelector('[class^="buttons"]');if(!e)return;n(2,c=!0);const t=e.getBoundingClientRect();s===document.body?(n(0,a.top=t.top,a),n(0,a.left=t.left-36,a)):(n(0,a.top=l?t.top-22:t.top,a),n(0,a.left=t.left-72-36,a)),n(0,a.wbottom=s.clientHeight-a.top+8,a),n(0,a.wright=s.clientWidth-a.left-(t.width+36)-6,a)},_=async e=>{I?I.disconnect():I=new ResizeObserver(e=>{for(const t of e){if(!t.contentRect)return;t.contentRect.width||t.contentRect.height?B():(n(2,c=!1),_())}}),r=await F('[class^="channelTextArea-"]:not([class*="channelTextAreaDisabled"])',"textarea"),e&&B(),I.observe(r)},R=(e,t)=>{S.setItem(e,JSON.stringify(t))},z=async()=>{const e=await fetch("https://magane.moe/api/packs"),t=await e.json();d=t.baseURL;const i=S.getItem("magane.available");if(i)try{const e=JSON.parse(i),t=e.filter(e=>"object"==typeof e&&void 0!==e.id&&xe.test(e.id));e.length!==t.length&&R("magane.available",t),t.forEach(e=>{n(12,y[e.id]=e,y)}),v.push(...t)}catch(e){console.error(e)}v.push(...t.packs),v=v,n(11,w=v);const a=S.getItem("magane.subscribed");if(a)try{n(9,k=JSON.parse(a));for(const e of k)b.push(e.id);k.forEach(e=>{xe.test(e.id)&&n(12,y[e.id]=e,y)})}catch(e){console.error(e)}const o=S.getItem("magane.favorites");if(o)try{n(7,f=JSON.parse(o).filter(e=>{if(h[e.pack])return!0;const t=v.findIndex(t=>t.id===e.pack);return-1!==t?(n(8,h[e.pack]={name:v[t].name},h),!0):void 0}))}catch(e){console.error(e)}},J=e=>{-1===k.findIndex(t=>t.id===e.id)&&(n(9,k=[...k,e]),n(10,b=[...b,e.id]),R("magane.subscribed",k),L("Subscribed to pack > "+e.name))},H=e=>{for(let t=0;t<k.length;t++)if(k[t].id===e.id)return k.splice(t,1),b.splice(t,1),n(9,k),n(10,b),L("Unsubscribed from pack > "+e.name),void R("magane.subscribed",k)},q=(e,t,n,i)=>{let a;if("number"==typeof e)a=`${d}${e}/${t}`,n||(a=a.replace(/\.(gif|png)$/i,"_key.$1"));else if(e.startsWith("startswith-")){a="https://stickershop.line-scdn.net/stickershop/v1/sticker/%id%/android/sticker.png;compress=true".replace(/%id%/g,t.split(".")[0]);let i=n?"&h=180p":"&h=100p";y[e].animated&&(a=a.replace(/sticker(@2x)?\.png/,"sticker_animation$1.png"),i+="&output=gif"),T.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("emojis-")){a="https://stickershop.line-scdn.net/sticonshop/v1/sticon/%pack%/android/%id%.png".replace(/%pack%/g,e.split("-")[1]).replace(/%id%/g,t.split(".")[0]);let i=n?"":"&h=100p";y[e].animated&&(a=a.replace(/\.png/,"_animation.png"),i+="&output=gif"),T.disableDownscale||(a=`https://images.weserv.nl/?url=${encodeURIComponent(a)}${i}`)}else if(e.startsWith("custom-")){if(!n&&Array.isArray(y[e].thumbs)){if(y[e].thumbs.length&&("number"!=typeof i&&(i=y[e].files.findIndex(e=>e===t)),a=i>=0?y[e].thumbs[i]:null),!a)return"/assets/eedd4bd948a0da6d75bf5304bff4e17f.svg"}else a=t;"string"==typeof y[e].template&&(a=y[e].template.replace(/%pack%/g,e.replace("custom-","")).replace(/%id%/g,a))}return a},Y=async(e,t)=>{if(M)return j("Sending sticker is still on cooldownâ€¦",{timeout:1e3});M=!0;try{const n=i.userStore.getCurrentUser().id,a=i.selectedChannelStore.getChannelId(),o=i.channelStore.getChannel(a);if(!((e,t,n)=>{if(!t)return!1;if(!e||!n.guild_id)return!0;e=Array.isArray(e)?e:[e];for(const a of e)if(!i.permissionRoleUtils.can({permission:a,user:t,context:n})&&!i.computePermissions.can(a,t,n))return!1;return!0})([i.discordPermissions.ATTACH_FILES,i.discordPermissions.SEND_MESSAGES],n,o))return M=!1,D("You do not have permission to attach files in this channel.");O("Sendingâ€¦",{nolog:!0}),T.closeWindowOnSend&&ne(!1);const s=q(e,t,!0);L("Fetching sticker from remote: "+s);const c=await fetch(s,{cache:"force-cache"}),l=await c.arrayBuffer();let d=t;if("string"==typeof e)if(y[e].animated&&(e.startsWith("startswith-")||e.startsWith("emojis-")))d=d.replace(/\.png$/i,".gif"),j("Animated stickers/emojis from LINE Store currently cannot be animated.");else if(e.startsWith("custom-"))if(T.disableImportedObfuscation)d=t;else{const e=t.match(/(\.\w+)$/);d=`${Date.now().toString()}${e?e[1]:""}`}T.markAsSpoiler&&(d="SPOILER_"+d);const p=new File([Buffer.from(l)],d);L(`Sending sticker as ${d}â€¦`);let u="";const m=(()=>{let e=r[Object.keys(r).find(e=>e.startsWith("__reactInternalInstance")||e.startsWith("__reactFiber"))];if(!e)return null;for(;!e.stateNode||!e.stateNode.constructor||"ChannelTextAreaForm"!==e.stateNode.constructor.displayName;)e=e.return;return e})();if(m)u=m.stateNode.state.textValue;else if(r){L("Unable to fetch text area of chat input, attempting workaroundâ€¦","warn");let e=r.querySelector("span");e||(e=r),u=e.innerText}else L("Unable to fetch text area of chat input, workaround unavailableâ€¦","warn");i.messageUpload.upload({channelId:a,file:p,message:{content:u}}),m&&m.stateNode.setState({textValue:"",richValue:i.richUtils.toRichValue("")})}catch(e){console.error(e),D("Unexpected error occurred when sending sticker. Check your console for details.")}M=!1},V=(e,t)=>{if(-1!==f.findIndex(n=>n.pack===e&&n.id===t))return;if(!h[e]){const t=k.find(t=>t.id===e);t&&n(8,h[e]={name:t.name},h)}const i={pack:e,id:t};n(7,f=[...f,i]),R("magane.favorites",f),L(`Favorited sticker > ${t} of pack ${e}`),W("Favorited!",{nolog:!0})},X=(e,t)=>{const i=f.findIndex(n=>n.pack===e&&n.id===t);-1!==i&&(f.splice(i,1),n(7,f),f.some(t=>t.pack===e)||delete h[e],R("magane.favorites",f),L(`Unfavorited sticker > ${t} of pack ${e}`),P("Unfavorited!",{nolog:!0}))},G=()=>{const e="string"==typeof $&&$.trim().toLowerCase();n(11,w=e?v.filter(t=>t.name.toLowerCase().indexOf(e)>=0||String(t.id).indexOf(e)>=0):v)},Z=(e,t,i={})=>{let a,o=[];const s=S.getItem("magane.available");if(s&&(o=JSON.parse(s),o))if(a=o.findIndex(t=>t.id===e),a>=0){if(i.overwrite&&i.partial)t=Object.assign(o[a],t);else if(!i.overwrite)throw new Error(`Pack with ID ${e} already exist.`)}else if(i.overwrite)throw new Error(`Cannot overwrite missing pack with ID ${e}.`);if(!t.count||!t.files.length)throw new Error("Invalid stickers count.");const r={pack:t};if(xe.test(e)&&n(12,y[e]=t,y),a>=0){o[a]=t;const n=v.findIndex(t=>t.id===e);-1!==n&&(v[n]=t)}else o.unshift(t),v.unshift(t),v=v;return R("magane.available",o),G(),i.overwrite?L("Overwritten pack with ID "+e):L("Added a new pack with ID "+e),r},K=(e,t,n)=>{const i="object"==typeof e[0];if(!i&&"number"==typeof n&&e.length<n)throw new Error(`This function expects at least ${n} parameter(s).`);const a={};for(let n=0;n<t.length;n++)a[t[n]]=i?e[0][t[n]]:e[n];return a};window.magane.appendPack=(...e)=>{let{name:t,firstid:n,count:i,animated:a}=K(e,["name","firstid","count","animated"],3);if(n=Number(n),isNaN(n)||!isFinite(n)||n<0)throw new Error("Invalid first ID.");i=Math.max(Math.min(Number(i),200),0)||0;const o="startswith-"+n,s=[];for(let e=n;e<n+i;e+=1)s.push(e+".png");return Z(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},window.magane.appendEmojisPack=(...e)=>{let{name:t,id:n,count:i,animated:a}=K(e,["name","id","count","animated"],3);i=Math.max(Math.min(Number(i),200),0)||0;const o="emojis-"+n,s=[];for(let e=0;e<i;e+=1)s.push(String(e+1).padStart(3,"0")+".png");return Z(o,{name:t,count:i,id:o,animated:a?1:null,files:s})},window.magane.appendCustomPack=(...e)=>{let{name:t,id:n,count:i,animated:a,template:o,files:s,thumbs:r}=K(e,["name","id","count","animated","template","files","thumbs"],5);i=Math.max(Number(i),0)||0;const c="custom-"+n;if(Array.isArray(s)){if(!s.length)throw new Error('"files" array cannot be empty.')}else{if(!o)throw new Error('"template" must be set if not using custom "files" array.');s=[];for(let e=1;e<=i;e+=1)s.push(e+(a?".gif":".png"))}return Z(c,{name:t,count:i,id:c,animated:a?1:null,files:s,thumbs:r,template:o})},window.magane.editPack=(...e)=>{const{id:t,props:n}=K(e,["id","props"],2);if("object"!=typeof n)throw new Error('"props" must be an object.');return Z(t,n,{overwrite:!0,partial:!0})},window.magane.deletePack=e=>{if(!e&&!xe.test(e))throw new Error('Pack ID must start with either "startswith-", "emojis-", or "custom-".');const t=S.getItem("magane.available");if(t)try{const i=JSON.parse(t),a=i.findIndex(t=>t.id===e);if(-1===a)throw new Error("Unable to find pack with ID "+e);n(7,f=f.filter(t=>t.pack!==e)),delete h[e],R("magane.favorites",f);const o=k.find(t=>t.id===e);o&&H(o),i.splice(a,1),R("magane.available",i);const s=v.findIndex(t=>t.id===e);return-1!==s&&(v.splice(s,1),v=v,G()),delete y[e],L(`Removed pack with ID ${e} (old index: ${a})`),!0}catch(e){throw e}},window.magane.searchPacks=e=>{if(!e)throw new Error("Keyword required");e=e.toLowerCase();const t=S.getItem("magane.available");if(t)try{return JSON.parse(t).filter(t=>t.name.toLowerCase().indexOf(e)>=0||t.id.indexOf(e)>=0)}catch(e){throw e}};var ee;ee=async()=>{try{O("Loading Maganeâ€¦"),i.channelStore=BdApi.findModuleByProps("getChannel","getDMFromUserId"),i.selectedChannelStore=BdApi.findModuleByProps("getLastSelectedChannelId"),i.userStore=BdApi.findModuleByProps("getCurrentUser","getUser"),i.discordConstants=BdApi.findModuleByProps("Permissions","ActivityTypes","StatusTypes"),i.discordPermissions=i.discordConstants.Permissions,i.permissionRoleUtils=BdApi.findModuleByProps("can","ALLOW","DENY"),i.computePermissions=BdApi.findModuleByProps("computePermissions"),i.messageUpload=BdApi.findModuleByProps("upload","instantBatchUpload"),i.richUtils=BdApi.findModuleByProps("toRichValue","createEmptyState"),(()=>{const e=document.createElement("iframe");document.head.append(e),S=Object.getOwnPropertyDescriptor(e.contentWindow.frames,"localStorage").get.call(window),e.remove()})(),(()=>{const e=S.getItem("magane.settings");if(e)try{const t=JSON.parse(e);for(const e of Object.keys(T))void 0!==t[e]&&null!==t[e]&&n(16,T[e]=t[e],T)}catch(e){console.error(e)}})(),await z(),await(async()=>{let e=!1;const t=JSON.parse(S.getItem("magane.favorites")),n=JSON.parse(S.getItem("magane.subscribed"));t&&t.forEach(t=>{if("number"==typeof t.pack)return;const n=parseInt(t.pack,10);isNaN(t.pack)||(t.pack=n,e=!0)}),n&&n.forEach(t=>{if("number"==typeof t.id)return;const n=parseInt(t.id,10);isNaN(t.id)||(t.id=n,e=!0)}),e&&(P("Found packs/stickers to migrate, migrating now..."),S.setItem("magane.favorites",JSON.stringify(t)),S.setItem("magane.subscribed",JSON.stringify(n)),await z(),W("Migration successful."))})(),W("Magane is now ready!"),(async()=>{s=o.parentNode.parentNode,s===document.body?L("Magane is mounted with MaganeBD."):(L("Magane is mounted with legacy BD plugin."),l=Boolean(document.querySelector('[class*="titleBar-"]'))),_(!0)})()}catch(e){console.error(e),D("Unexpected error occurred when initializing Magane. Check your console for details.")}},E().$$.on_mount.push(ee),function(e){E().$$.on_destroy.push(e)}(()=>{for(const e of Object.values(A))clearTimeout(e);I&&I.disconnect(),delete window.magane,L("Internal components cleaned up.")});const te=e=>{const t=o.querySelector(".stickerWindow");if(t){const{x:n,y:i,width:a,height:s}=t.getBoundingClientRect();if(e.target){if(o.querySelector(".magane-button").contains(e.target))return;const t=document.querySelectorAll('[class^="layerContainer-"]');if(t.length&&Array.from(t).some(t=>t.contains(e.target)))return}e.clientX<=n+a&&e.clientX>=n&&e.clientY<=i+s&&e.clientY>=i||ne()}},ne=e=>{const t=void 0===e?!p:e;t?document.addEventListener("click",te):document.removeEventListener("click",te),n(3,p=t)},ie=()=>{const e=!u;e&&null===g&&ae(0),n(4,u=e)},ae=e=>{n(6,g=e),m[g]||n(5,m[g]=!0,m)},oe=e=>{Q({element:e.replace(/([.])/g,"\\$1"),container:o.querySelector(".stickers")})},se=e=>{try{const t=y[e].name;window.magane.deletePack(e)&&W(`Removed pack ${t}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),D(e.toString(),{nolog:!0})}},re=async(e,t)=>{const n={id:"",name:"",files:[],count:0,remoteType:0};if(t)for(const e of Object.keys(t))n[e]=t[e];switch(n.remoteType){case 1:n.name=String(e.name),n.thumbs=[];for(let t=0;t<e.files.length;t++)n.files.push(e.files[t].url),n.thumbs.push(e.files[t].thumb||null);break;case 0:default:if(["id","name","files"].some(t=>!e[t]))throw new Error("Invalid config. Some required fields are missing.");if(n.id=String(e.id),n.name=String(e.name),e.files.some(e=>"string"!=typeof e))throw new Error('Invalid "files" array. Some values are not string.');if(n.files=e.files,Array.isArray(e.thumbs)){if(e.thumbs.some(e=>"string"!=typeof e&&null!==e))throw new Error('Invalid "thumbs" array. Some values are neither string nor null.');n.thumbs=e.thumbs}n.description=e.description?String(e.description):null,n.homeUrl=e.homeUrl?String(e.homeUrl):null,n.template=e.template?String(e.template):null,e.updateUrl&&(n.updateUrl=String(e.updateUrl))}return n.count=n.files.length,Array.isArray(n.thumbs)&&n.thumbs.every(e=>null===e)&&(n.thumbs=[]),n},ce=async(e,t=!1,n)=>{const i={updateUrl:e};if(t)i.remoteType=n;else{if(!e||!/^https?:\/\//.test(e))throw new Error("URL must have HTTP(s) protocol.");const t=[/^(.+:\/\/)(.+)\/a\/([^/\s]+)/];let n={index:-1};for(let i=0;i<t.length;i++){const a=e.match(t[i]);a&&!a.some(e=>void 0===e)&&(n={index:i,result:a})}switch(n.index){case 0:i.id=`${n.result[2]}-${n.result[3]}`,i.homeUrl=e,i.updateUrl=`${n.result[1]}${n.result[2]}/api/album/${n.result[3]}`,i.remoteType=1}}const a=await fetch(i.updateUrl,{cache:"no-cache"}),o=await a.json();if(!o)throw new Error("Unable to parse data. Check your console for details.");return re(o,i)},le=async(e,t=!1)=>{try{if(!y[e]||!y[e].updateUrl)return;t||O("Updating pack informationâ€¦",{nolog:!0});const i=await ce(y[e].updateUrl,"number"==typeof y[e].remoteType,y[e].remoteType);i.id=e;const a=Z(i.id,i,{overwrite:!0});n(7,f=f.filter(t=>t.pack!==e||-1!==a.pack.files.findIndex(e=>e===t.id))),f.some(t=>t.pack===e)?n(8,h[e].name=a.pack.name,h):delete h[e],R("magane.favorites",f);const o=k.findIndex(t=>t.id===e);return-1!==o&&(n(9,k[o]=a.pack,k),n(10,b[o]=a.pack.id,b),R("magane.subscribed",k)),t||W(`Updated pack ${a.pack.name}.`,{nolog:!0,timeout:6e3}),a}catch(e){console.error(e),D(e.toString(),{nolog:!0})}},de=async()=>{if(x)try{const e=x.match(/^(https?:\/\/store\.line\.me\/((sticker|emoji)shop)\/product\/)?([a-z0-9]+)/);if(!e)return D("Unsupported LINE Store URL or ID.");let t;if(O("Loading pack informationâ€¦",{nolog:!0}),"emoji"===e[3]){const n=e[4],i=await fetch("https://magane.moe/api/proxy/emoji/"+n),a=await i.json();t=window.magane.appendEmojisPack({name:a.title,id:a.id,count:a.len,animated:a.hasAnimation||null})}else{const n=Number(e[4]);if(isNaN(n)||n<0)return D("Unsupported LINE Stickers ID.");const i=await fetch("https://magane.moe/api/proxy/sticker/"+n),a=await i.json();t=window.magane.appendPack({name:a.title,firstid:a.first,count:a.len,animated:a.hasAnimation})}W(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3}),n(13,x=null)}catch(e){console.error(e),D(e.toString(),{nolog:!0})}},pe=(e,t)=>{const n=e+"\n\n**Please continue only if you trust this remote pack.**";BdApi.showConfirmationModal("Import Remote Pack",n,{confirmText:"Import",cancelText:"Cancel",danger:!0,onConfirm:t})},ue=()=>{C&&pe("URL: "+C,async()=>{try{O("Loading pack informationâ€¦",{nolog:!0});const e=await ce(C);e.id="custom-"+e.id;const t=Z(e.id,e);W(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3}),n(14,C=null)}catch(e){console.error(e),D(e.toString(),{nolog:!0})}})},me=()=>{document.getElementById("localRemotePackInput").click()},ge=()=>{const e=Object.values(y).filter(e=>e.updateUrl).map(e=>e.id);if(!e.length)return j("You do not have any remote packs that can be updated.");const t=`**Please confirm that you want to update __${e.length}__ remote pack${1===e.length?"":"s"}.**`;BdApi.showConfirmationModal(`Update ${e.length} remote pack${1===e.length?"":"s"}`,t,{confirmText:"Import",cancelText:"Cancel",danger:!0,onConfirm:async()=>{try{for(let t=0;t<e.length;t++){O(`Updating pack ${t+1} out of ${e.length}â€¦`,{nolog:!0,timeout:1e3});if(!await le(e[t],!0))break}W("Updates completed.",{nolog:!0})}catch(e){j("Updates cancelled due to unexpected errors.",{nolog:!0})}}})},fe=()=>{document.getElementById("replaceDatabaseInput").click()},he=()=>{const e=document.createElement("a");let t="";try{O("Exporting databaseâ€¦");const n={};for(const e of N){const t=S.getItem(e);null!==t&&(n[e]=JSON.parse(t))}const i=JSON.stringify(n),a=new Blob([i]);t=window.URL.createObjectURL(a),e.href=t,e.download=`magane.database.${(new Date).toISOString()}.json`,e.click()}catch(e){console.error(e),D("Unexpected error occurred. Check your console for details.")}e.remove(),t&&window.URL.revokeObjectURL(t)};return[a,o,c,p,u,m,g,f,h,k,b,w,y,x,C,$,T,z,J,H,q,Y,V,X,G,e=>`<span class="counts"><span>â€“</span>${e} sticker${1===e?"":"s"}</span>`,e=>{let t=""+e;return"string"==typeof e&&(e.startsWith("startswith-")?t="LINE "+e.replace("startswith-",""):e.startsWith("emojis-")?t="LINE Emojis "+e.replace("emojis-",""):e.startsWith("custom-")&&(t=e.replace("custom-",""))),`<span class="appendix"><span>â€“</span><span title="ID: ${e}">${t}</span></span>`},ne,ie,ae,oe,e=>{const t=e.target.value.trim();if(13!==e.keyCode||!t.length)return;let i=Number(t);if(isNaN(i)||i<1||i>k.length)return D(`New position must be â‰¥ 1 and â‰¤ ${k.length}.`);i--;let a=e.target.dataset.pack;if(void 0===a)return;xe.test(a)||(a=Number(a));const o=k.findIndex(e=>e.id===a);if(o===i)return;const s=k.splice(o,1);b.splice(o,1),k.splice(i,0,s[0]),b.splice(i,0,s[0].id),e.target.blur(),e.target.value=String(o),n(9,k),n(10,b),R("magane.subscribed",k),W(`Moved pack from position ${o+1} to ${i+1}.`)},se,le,de,ue,e=>{const{files:t}=e.target;if(!t.length)return!1;const n=t[0],i=new FileReader;i.onload=t=>{let i;e.target.value="";try{i=JSON.parse(t.target.result)}catch(e){console.error(e),D("The selected file is not a valid JSON file.")}pe("File: "+n.name,async()=>{try{const e=await re(i);e.id="custom-"+e.id;const t=Z(e.id,e);W(`Added a new pack ${t.pack.name}.`,{nolog:!0,timeout:6e3})}catch(e){console.error(e),D(e.toString(),{nolog:!0})}})},L(`Reading ${n.name}â€¦`),i.readAsText(n)},me,ge,e=>{const{name:t}=e.target;if(!t)return!1;L(`settings['${t}'] = ${T[t]}`),R("magane.settings",T),W("Settings saved!",{nolog:!0})},e=>{const{files:t}=e.target;if(!t.length)return!1;const n=new FileReader;n.onload=t=>{let n;e.target.value="";try{n=JSON.parse(t.target.result)}catch(e){console.error(e),D("The selected file is not a valid JSON file.")}let i="This database contains the following data:";const a=[],o=[];for(const e of N)if(void 0===n[e]||null===n[e])o.push(e);else{let t=null;if(Array.isArray(n[e]))t=n[e].length;else try{t=Object.keys(n[e]).length}catch(e){}let o="";null!==t&&(o=` has **${t}** item${1===t?"":"s"}`),i+=`\n**${e}**${o}`,a.push(e)}a.length||(i="**This is an empty database file.**"),o.length&&(i+=`\nThese missing or invalid field${1===o.length?"":"s"} **will be removed**:`,i+="\n"+o.join("\n")),i+="\n**Please continue only if you trust this database file.**",BdApi.showConfirmationModal("Replace Database",i.replace(/\n/g,"\n\n"),{confirmText:"Replace",cancelText:"Cancel",danger:!0,onConfirm:()=>{for(const e of a)R(e,n[e]);for(const e of o)S.removeItem(e);BdApi.showConfirmationModal("Reload Now","Please reload Discord immediately (Ctrl + R) to complete Magane database replacement.",{cancelText:"Later",onConfirm:()=>window.location.reload()})}})},L(`Reading ${t[0].name}â€¦`),n.readAsText(t[0])},fe,he,(e,t,n)=>n.pack===e.id&&n.id===t,()=>ne(),()=>z(),e=>Y(e.pack,e.id),e=>X(e.pack,e.id),(e,t)=>Y(e.id,t),(e,t)=>V(e.id,t),(e,t)=>X(e.id,t),()=>ie(),()=>oe("#pfavorites"),e=>oe("#p"+e.id),()=>ie(),()=>ae(0),()=>ae(1),()=>ae(2),()=>ae(3),e=>H(e),e=>le(e.id),function(){$=this.value,n(15,$)},e=>H(e),e=>J(e),e=>le(e.id),e=>se(e.id),function(){x=this.value,n(13,x)},()=>de(),function(){C=this.value,n(14,C)},()=>ue(),()=>me(),()=>ge(),function(){T.disableToasts=this.checked,n(16,T)},function(){T.closeWindowOnSend=this.checked,n(16,T)},function(){T.useLeftToolbar=this.checked,n(16,T)},function(){T.hidePackAppendix=this.checked,n(16,T)},function(){T.disableDownscale=this.checked,n(16,T)},function(){T.disableImportedObfuscation=this.checked,n(16,T)},function(){T.markAsSpoiler=this.checked,n(16,T)},()=>fe(),()=>he(),function(e){U[e?"unshift":"push"](()=>{o=e,n(1,o)})}]}class Ie extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),q(this,e,$e,ye,o,{},null,[-1,-1,-1,-1,-1])}}const Ae=()=>{console.log("[MAGANE] > checkDOM()");let e=document.getElementById("maganeContainer");if(e)return;const t=document.querySelector("[class*=baseLayer] > [class*=container] > [class*=base]");t?(console.log("[MAGANE] > DOM ready, injecting!"),e=document.createElement("div"),e.id="maganeContainer",t.insertAdjacentElement("afterbegin",e),new Ie({target:e})):setTimeout(()=>Ae(),500)};"object"==typeof BdApi?Ae():console.error("This plugin does not work outside of BetterDiscord!")}();
//# sourceMappingURL=magane.min.js.map
