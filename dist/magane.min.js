!function(){"use strict";function n(){}function t(n){return n()}function e(){return Object.create(null)}function i(n){n.forEach(t)}function a(n){return"function"==typeof n}function o(n,t){return n!=n?t==t:n!==t||n&&"object"==typeof n||"function"==typeof n}const r="undefined"!=typeof window;let s=r?()=>window.performance.now():()=>Date.now(),c=r?n=>requestAnimationFrame(n):n;const l=new Set;function d(n){l.forEach(t=>{t.c(n)||(l.delete(t),t.f())}),0!==l.size&&c(d)}function p(n,t){n.appendChild(t)}function m(n,t,e){n.insertBefore(t,e||null)}function g(n){n.parentNode.removeChild(n)}function f(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function u(n){return document.createElement(n)}function h(n){return document.createTextNode(n)}function v(){return h(" ")}function k(n,t,e,i){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e,i)}function b(n){return function(t){return t.stopPropagation(),n.call(this,t)}}function x(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function w(n,t){t=""+t,n.data!==t&&(n.data=t)}function y(n,t){(null!=t||n.value)&&(n.value=t)}function $(n,t,e,i){n.style.setProperty(t,e,i?"important":"")}function M(n,t,e){n.classList[e?"add":"remove"](t)}class C{constructor(n,t=null){this.e=u("div"),this.a=t,this.u(n)}m(n,t=null){for(let e=0;e<this.n.length;e+=1)m(n,this.n[e],t);this.t=n}u(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}p(n){this.d(),this.u(n),this.m(this.t,this.a)}d(){this.n.forEach(g)}}let z;function W(n){z=n}function S(){if(!z)throw new Error("Function called outside component initialization");return z}const E=[],L=[],A=[],I=[],T=Promise.resolve();let O=!1;function F(n){A.push(n)}function N(){const n=new Set;do{for(;E.length;){const n=E.shift();W(n),_(n.$$)}for(;L.length;)L.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];n.has(e)||(e(),n.add(e))}A.length=0}while(E.length);for(;I.length;)I.pop()();O=!1}function _(n){if(null!==n.fragment){n.update(),i(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(F)}}const D=new Set;function P(n,t){-1===n.$$.dirty[0]&&(E.push(n),O||(O=!0,T.then(N)),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function j(o,r,s,c,l,d,p=[-1]){const m=z;W(o);const g=r.props||{},f=o.$$={fragment:null,ctx:null,props:d,update:n,not_equal:l,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:e(),dirty:p};let u=!1;var h,v;f.ctx=s?s(o,g,(n,t,e=t)=>(f.ctx&&l(f.ctx[n],f.ctx[n]=e)&&(f.bound[n]&&f.bound[n](e),u&&P(o,n)),t)):[],f.update(),u=!0,i(f.before_update),f.fragment=!!c&&c(f.ctx),r.target&&(r.hydrate?f.fragment&&f.fragment.l(function(n){return Array.from(n.childNodes)}(r.target)):f.fragment&&f.fragment.c(),r.intro&&((h=o.$$.fragment)&&h.i&&(D.delete(h),h.i(v))),function(n,e,o){const{fragment:r,on_mount:s,on_destroy:c,after_update:l}=n.$$;r&&r.m(e,o),F(()=>{const e=s.map(t).filter(a);c?c.push(...e):i(e),n.$$.on_mount=[]}),l.forEach(F)}(o,r.target,r.anchor),N()),W(m)}function B(n){const t=n-1;return t*t*t+1}var q={$:n=>"string"==typeof n?document.querySelector(n):n,extend:(...n)=>Object.assign(...n),cumulativeOffset(n){let t=0,e=0;do{t+=n.offsetTop||0,e+=n.offsetLeft||0,n=n.offsetParent}while(n);return{top:t,left:e}},directScroll:n=>n&&n!==document&&n!==document.body,scrollTop(n,t){let e=void 0!==t;return this.directScroll(n)?e?n.scrollTop=t:n.scrollTop:e?document.documentElement.scrollTop=document.body.scrollTop=t:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(n,t){let e=void 0!==t;return this.directScroll(n)?e?n.scrollLeft=t:n.scrollLeft:e?document.documentElement.scrollLeft=document.body.scrollLeft=t:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const R={container:"body",duration:500,delay:0,offset:0,easing:function(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1},onStart:n,onDone:n,onAborting:n,scrollX:!1,scrollY:!0},U=n=>{let{offset:t,duration:e,delay:i,easing:a,x:o=0,y:r=0,scrollX:p,scrollY:m,onStart:g,onDone:f,container:u,onAborting:h,element:v}=n;"function"==typeof t&&(t=t());var k=q.cumulativeOffset(u),b=v?q.cumulativeOffset(v):{top:r,left:o},x=q.scrollLeft(u),w=q.scrollTop(u),y=b.left-k.left+t,$=b.top-k.top+t,M=y-x,C=$-w;let z=!0,W=!1,S=s()+i,E=S+e;function L(n){n||(W=!0,g(v,{x:o,y:r}))}function A(n){!function(n,t,e){p&&q.scrollLeft(n,e),m&&q.scrollTop(n,t)}(u,w+C*n,x+M*n)}function I(){z=!1}return function(n){let t;0===l.size&&c(d),new Promise(e=>{l.add(t={c:n,f:e})})}(n=>{if(!W&&n>=S&&L(!1),W&&n>=E&&(A(1),I(),f(v,{x:o,y:r})),!z)return h(v,{x:o,y:r}),!1;if(W){A(0+1*a((n-S)/e))}return!0}),L(i),A(0),I},H=n=>U((n=>{let t=q.extend({},R,n);return t.container=q.$(t.container),t.element=q.$(t.element),t})(n));function J(n,t){void 0===t&&(t={});var e=t.insertAt;if(n&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===e&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}J("/** Magane: global.css **/\n\n[data-simplebar] {\n\tposition: relative;\n\tflex-direction: column;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start;\n\talign-content: flex-start;\n\talign-items: flex-start;\n}\n\n.simplebar-wrapper {\n\toverflow: hidden;\n\twidth: inherit;\n\theight: inherit;\n\tmax-width: inherit;\n\tmax-height: inherit;\n}\n\n.simplebar-mask {\n\tdirection: inherit;\n\tposition: absolute;\n\toverflow: hidden;\n\tpadding: 0;\n\tmargin: 0;\n\tleft: 0;\n\ttop: 0;\n\tbottom: 0;\n\tright: 0;\n\twidth: auto !important;\n\theight: auto !important;\n\tz-index: 0;\n}\n\n.simplebar-offset {\n\tdirection: inherit !important;\n\tbox-sizing: inherit !important;\n\tresize: none !important;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n\tpadding: 0;\n\tmargin: 0;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.simplebar-content-wrapper {\n\tdirection: inherit;\n\tbox-sizing: border-box !important;\n\tposition: relative;\n\tdisplay: block;\n\theight: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */\n\twidth: auto;\n\tvisibility: visible;\n\tmax-width: 100%; /* Not required for horizontal scroll to trigger */\n\tmax-height: 100%; /* Needed for vertical scroll to trigger */\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n}\n\n.simplebar-content-wrapper::-webkit-scrollbar,\n.simplebar-hide-scrollbar::-webkit-scrollbar {\n\twidth: 0;\n\theight: 0;\n}\n\n.simplebar-content:before,\n.simplebar-content:after {\n\tcontent: ' ';\n\tdisplay: table;\n}\n\n.simplebar-placeholder {\n\tmax-height: 100%;\n\tmax-width: 100%;\n\twidth: 100%;\n\tpointer-events: none;\n}\n\n.simplebar-height-auto-observer-wrapper {\n\tbox-sizing: inherit !important;\n\theight: 100%;\n\twidth: 100%;\n\tmax-width: 1px;\n\tposition: relative;\n\tfloat: left;\n\tmax-height: 1px;\n\toverflow: hidden;\n\tz-index: -1;\n\tpadding: 0;\n\tmargin: 0;\n\tpointer-events: none;\n\tflex-grow: inherit;\n\tflex-shrink: 0;\n\tflex-basis: 0;\n}\n\n.simplebar-height-auto-observer {\n\tbox-sizing: inherit;\n\tdisplay: block;\n\topacity: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\theight: 1000%;\n\twidth: 1000%;\n\tmin-height: 1px;\n\tmin-width: 1px;\n\toverflow: hidden;\n\tpointer-events: none;\n\tz-index: -1;\n}\n\n.simplebar-track {\n\tz-index: 1;\n\tposition: absolute;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\toverflow: hidden;\n}\n\n[data-simplebar].simplebar-dragging .simplebar-content {\n\tpointer-events: none;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n[data-simplebar].simplebar-dragging .simplebar-track {\n\tpointer-events: all;\n}\n\n.simplebar-scrollbar {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tmin-height: 10px;\n}\n\n.simplebar-scrollbar:before {\n\tposition: absolute;\n\tcontent: '';\n\tbackground: #696080;\n\tborder-radius: 7px;\n\tleft: 2px;\n\tright: 2px;\n\topacity: 0;\n\ttransition: opacity 0.2s linear;\n}\n\n.simplebar-scrollbar.simplebar-visible:before {\n\t/* When hovered, remove all transitions from drag handle */\n\topacity: 0.5;\n\ttransition: opacity 0s linear;\n}\n\n.simplebar-track.simplebar-vertical {\n\ttop: 0;\n\twidth: 11px;\n}\n\n.simplebar-track.simplebar-vertical .simplebar-scrollbar:before {\n\ttop: 2px;\n\tbottom: 2px;\n}\n\n.simplebar-track.simplebar-horizontal {\n\tleft: 0;\n\theight: 11px;\n}\n\n.simplebar-track.simplebar-horizontal .simplebar-scrollbar:before {\n\theight: 100%;\n\tleft: 2px;\n\tright: 2px;\n}\n\n.simplebar-track.simplebar-horizontal .simplebar-scrollbar {\n\tright: auto;\n\tleft: 0;\n\ttop: 2px;\n\theight: 7px;\n\tmin-height: 0;\n\tmin-width: 10px;\n\twidth: auto;\n}\n\n/* Rtl support */\n[data-simplebar-direction='rtl'] .simplebar-track.simplebar-vertical {\n\tright: auto;\n\tleft: 0;\n}\n\n.hs-dummy-scrollbar-size {\n\tdirection: rtl;\n\tposition: fixed;\n\topacity: 0;\n\tvisibility: hidden;\n\theight: 500px;\n\twidth: 500px;\n\toverflow-y: hidden;\n\toverflow-x: scroll;\n}\n\n.simplebar-hide-scrollbar {\n\tposition: fixed;\n\tleft: 0;\n\tvisibility: hidden;\n\toverflow-y: scroll;\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n}\n\niframe#localStorageIframe {\n\tdisplay: none;\n}\n");function Y(n,t,e){const i=n.slice();return i[66]=t[e],i}function X(n,t,e){const i=n.slice();return i[66]=t[e],i}function G(n,t,e){const i=n.slice();return i[66]=t[e],i[72]=e,i}function Q(n,t,e){const i=n.slice();return i[74]=t[e],i[72]=e,i}function V(n,t,e){const i=n.slice();return i[66]=t[e],i[72]=e,i}function Z(n,t,e){const i=n.slice();return i[74]=t[e],i[72]=e,i}function K(t){let e,i,a,o,r,s,c,l,d,h,b,w=!t[5]&&!t[7]&&nn(),y=t[5]&&t[5].length&&tn(t),$=t[7],M=[];for(let n=0;n<$.length;n+=1)M[n]=on(V(t,$,n));let C=t[17]&&t[17].length&&function(t){let e,i;return{c(){e=u("div"),e.innerHTML='<div class="icon-favorite"></div>',x(e,"class","pack"),x(e,"title","Favorites"),i=k(e,"click",t[57])},m(n,t){m(n,e,t)},p:n,d(n){n&&g(e),i()}}}(t),z=t[7],W=[];for(let n=0;n<z.length;n+=1)W[n]=rn(G(t,z,n));let S=t[3]&&sn(t);return{c(){e=u("div"),i=u("div"),w&&w.c(),a=v(),y&&y.c(),o=v();for(let n=0;n<M.length;n+=1)M[n].c();r=v(),s=u("div"),c=u("div"),c.innerHTML='<div class="icon-plus"></div>',l=v(),C&&C.c(),d=v();for(let n=0;n<W.length;n+=1)W[n].c();h=v(),S&&S.c(),x(i,"id","stickers"),x(i,"class","stickers"),x(c,"class","pack"),x(c,"title","Manage subscribed packs"),x(s,"class","packs"),x(e,"class","stickerWindow"),b=k(c,"click",t[56])},m(n,g){m(n,e,g),p(e,i),w&&w.m(i,null),p(i,a),y&&y.m(i,null),p(i,o);for(let n=0;n<M.length;n+=1)M[n].m(i,null);t[55](i),p(e,r),p(e,s),p(s,c),p(s,l),C&&C.m(s,null),p(s,d);for(let n=0;n<W.length;n+=1)W[n].m(s,null);p(e,h),S&&S.m(e,null)},p(n,t){if(n[5]||n[7]?w&&(w.d(1),w=null):w||(w=nn(),w.c(),w.m(i,a)),n[5]&&n[5].length?y?y.p(n,t):(y=tn(n),y.c(),y.m(i,o)):y&&(y.d(1),y=null),1278080&t[0]){let e;for($=n[7],e=0;e<$.length;e+=1){const a=V(n,$,e);M[e]?M[e].p(a,t):(M[e]=on(a),M[e].c(),M[e].m(i,null))}for(;e<M.length;e+=1)M[e].d(1);M.length=$.length}if(n[17]&&n[17].length&&C.p(n,t),34944&t[0]){let e;for(z=n[7],e=0;e<z.length;e+=1){const i=G(n,z,e);W[e]?W[e].p(i,t):(W[e]=rn(i),W[e].c(),W[e].m(s,null))}for(;e<W.length;e+=1)W[e].d(1);W.length=z.length}n[3]?S?S.p(n,t):(S=sn(n),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(n){n&&g(e),w&&w.d(),y&&y.d(),f(M,n),t[55](null),C&&C.d(),f(W,n),S&&S.d(),b()}}}function nn(n){let t;return{c(){t=u("h3"),t.textContent="It seems you aren't subscribed to any pack yet. Click the plus symbol on the bottom-left to get started! 🎉",x(t,"class","getStarted")},m(n,e){m(n,t,e)},d(n){n&&g(t)}}}function tn(n){let t,e,i,a,o,r=n[20](n[5].length)+"",s=n[5],c=[];for(let t=0;t<s.length;t+=1)c[t]=en(Z(n,s,t));return{c(){t=u("div"),e=u("span"),i=h("Favorites"),o=v();for(let n=0;n<c.length;n+=1)c[n].c();a=new C(r,null),x(e,"id","pfavorites"),x(t,"class","pack")},m(n,r){m(n,t,r),p(t,e),p(e,i),a.m(e),p(t,o);for(let n=0;n<c.length;n+=1)c[n].m(t,null)},p(n,e){if(32&e[0]&&r!==(r=n[20](n[5].length)+"")&&a.p(r),360544&e[0]){let i;for(s=n[5],i=0;i<s.length;i+=1){const a=Z(n,s,i);c[i]?c[i].p(a,e):(c[i]=en(a),c[i].c(),c[i].m(t,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=s.length}},d(n){n&&g(t),f(c,n)}}}function en(n){let t,e,a,o,r,s,c,l,d;function f(...t){return n[51](n[74],...t)}function h(...t){return n[52](n[74],...t)}return{c(){t=u("div"),e=u("img"),s=v(),c=u("div"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',l=v(),x(e,"class","image"),e.src!==(a=`${n[15](n[74].pack,n[74].id)}`)&&x(e,"src",a),x(e,"alt",o=n[74].pack+" - "+n[74].id),x(e,"title",r=n[6][n[74].pack].name),x(c,"class","deleteFavorite"),x(c,"title","Unfavorite"),x(t,"class","sticker"),d=[k(e,"click",f),k(c,"click",h)]},m(n,i){m(n,t,i),p(t,e),p(t,s),p(t,c),p(t,l)},p(t,i){n=t,32&i[0]&&e.src!==(a=`${n[15](n[74].pack,n[74].id)}`)&&x(e,"src",a),32&i[0]&&o!==(o=n[74].pack+" - "+n[74].id)&&x(e,"alt",o),96&i[0]&&r!==(r=n[6][n[74].pack].name)&&x(e,"title",r)},d(n){n&&g(t),i(d)}}}function an(n){let t,e,a,o,r,s,c;function l(...t){return n[53](n[66],n[74],...t)}function d(...t){return n[54](n[66],n[74],...t)}return{c(){t=u("div"),e=u("img"),r=v(),s=u("div"),s.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',x(e,"class","image"),e.src!==(a=`${n[15](n[66].id,n[74])}`)&&x(e,"src",a),x(e,"alt",o=n[66].id+" - "+n[74]),x(s,"class","addFavorite"),x(s,"title","Favorite"),x(t,"class","sticker"),c=[k(e,"click",l),k(s,"click",d)]},m(n,i){m(n,t,i),p(t,e),p(t,r),p(t,s)},p(t,i){n=t,128&i[0]&&e.src!==(a=`${n[15](n[66].id,n[74])}`)&&x(e,"src",a),128&i[0]&&o!==(o=n[66].id+" - "+n[74])&&x(e,"alt",o)},d(n){n&&g(t),i(c)}}}function on(n){let t,e,i,a,o,r,s,c=n[66].name+"",l=n[20](n[66].files.length)+"",d=n[66].files,k=[];for(let t=0;t<d.length;t+=1)k[t]=an(Q(n,d,t));return{c(){t=u("div"),e=u("span"),i=h(c),r=v();for(let n=0;n<k.length;n+=1)k[n].c();s=v(),a=new C(l,null),x(e,"id",o="p"+n[66].id),x(t,"class","pack")},m(n,o){m(n,t,o),p(t,e),p(e,i),a.m(e),p(t,r);for(let n=0;n<k.length;n+=1)k[n].m(t,null);p(t,s)},p(n,r){if(128&r[0]&&c!==(c=n[66].name+"")&&w(i,c),128&r[0]&&l!==(l=n[20](n[66].files.length)+"")&&a.p(l),128&r[0]&&o!==(o="p"+n[66].id)&&x(e,"id",o),229504&r[0]){let e;for(d=n[66].files,e=0;e<d.length;e+=1){const i=Q(n,d,e);k[e]?k[e].p(i,r):(k[e]=an(i),k[e].c(),k[e].m(t,s))}for(;e<k.length;e+=1)k[e].d(1);k.length=d.length}},d(n){n&&g(t),f(k,n)}}}function rn(n){let t,e,i;function a(...t){return n[58](n[66],...t)}return{c(){t=u("div"),x(t,"class","pack"),x(t,"title",e=n[66].name),$(t,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`),i=k(t,"click",a)},m(n,e){m(n,t,e)},p(i,a){n=i,128&a[0]&&e!==(e=n[66].name)&&x(t,"title",e),128&a[0]&&$(t,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`)},d(n){n&&g(t),i()}}}function sn(n){let t,e,a,o,r,s,c,l,d,f,h;function b(n,t){return 0===n[4]?ln:1===n[4]?cn:void 0}let w=b(n),y=w&&w(n);return{c(){t=u("div"),e=u("div"),a=v(),o=u("div"),r=u("div"),s=u("div"),c=u("div"),c.textContent="Installed",l=v(),d=u("div"),d.textContent="Packs",f=v(),y&&y.c(),x(e,"class","modal-close"),x(c,"class","tab"),M(c,"is-active",0===n[4]),x(d,"class","tab"),M(d,"is-active",1===n[4]),x(s,"class","tabs"),x(r,"class","stickersConfig"),x(o,"class","modal-content"),x(t,"class","stickersModal"),h=[k(e,"click",n[59]),k(c,"click",n[60]),k(d,"click",n[61])]},m(n,i){m(n,t,i),p(t,e),p(t,a),p(t,o),p(o,r),p(r,s),p(s,c),p(s,l),p(s,d),p(r,f),y&&y.m(r,null)},p(n,t){16&t[0]&&M(c,"is-active",0===n[4]),16&t[0]&&M(d,"is-active",1===n[4]),w===(w=b(n))&&y?y.p(n,t):(y&&y.d(1),y=w&&w(n),y&&(y.c(),y.m(r,null)))},d(n){n&&g(t),y&&y.d(),i(h)}}}function cn(n){let t,e,a,o,r=n[9],s=[];for(let t=0;t<r.length;t+=1)s[t]=mn(Y(n,r,t));return{c(){t=u("div"),e=u("input"),a=v();for(let n=0;n<s.length;n+=1)s[n].c();x(e,"class","inputQuery"),x(e,"type","text"),x(e,"placeholder","Search"),x(t,"class","tabContent"),x(t,"id","packsBar"),o=[k(e,"keyup",n[19]),k(e,"input",n[63])]},m(i,o){m(i,t,o),p(t,e),y(e,n[10]),p(t,a);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(n,i){if(1024&i[0]&&e.value!==n[10]&&y(e,n[10]),2155264&i[0]){let e;for(r=n[9],e=0;e<r.length;e+=1){const a=Y(n,r,e);s[e]?s[e].p(a,i):(s[e]=mn(a),s[e].c(),s[e].m(t,null))}for(;e<s.length;e+=1)s[e].d(1);s.length=r.length}},d(n){n&&g(t),f(s,n),i(o)}}}function ln(n){let t,e=n[7],i=[];for(let t=0;t<e.length;t+=1)i[t]=gn(X(n,e,t));return{c(){t=u("div");for(let n=0;n<i.length;n+=1)i[n].c();x(t,"class","tabContent"),x(t,"id","packsBar")},m(n,e){m(n,t,e);for(let n=0;n<i.length;n+=1)i[n].m(t,null)},p(n,a){if(2146432&a[0]){let o;for(e=n[7],o=0;o<e.length;o+=1){const r=X(n,e,o);i[o]?i[o].p(r,a):(i[o]=gn(r),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},d(n){n&&g(t),f(i,n)}}}function dn(n){let t,e;function i(...t){return n[65](n[66],...t)}return{c(){t=u("button"),t.textContent="Add",x(t,"class","button is-primary"),e=k(t,"click",i)},m(n,e){m(n,t,e)},p(t,e){n=t},d(n){n&&g(t),e()}}}function pn(n){let t,e;function i(...t){return n[64](n[66],...t)}return{c(){t=u("button"),t.textContent="Del",x(t,"class","button is-danger"),e=k(t,"click",i)},m(n,e){m(n,t,e)},p(t,e){n=t},d(n){n&&g(t),e()}}}function mn(n){let t,e,i,a,o,r,s,c,l,d,f,k,b,y,M,z=n[66].name+"",W=n[66].count+"",S=n[21](n[66].id)+"";function E(n,t){return(null==y||768&t[0])&&(y=!!n[8].includes(n[66].id)),y?pn:dn}let L=E(n,-1),A=L(n);return{c(){t=u("div"),e=u("div"),i=v(),a=u("div"),o=u("span"),r=h(z),s=v(),c=u("span"),l=h(W),d=h(" stickers"),k=v(),b=u("div"),A.c(),M=v(),x(e,"class","preview"),$(e,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`),f=new C(S,null),x(a,"class","info"),x(b,"class","action"),x(t,"class","pack")},m(n,g){m(n,t,g),p(t,e),p(t,i),p(t,a),p(a,o),p(o,r),p(a,s),p(a,c),p(c,l),p(c,d),f.m(c),p(t,k),p(t,b),A.m(b,null),p(t,M)},p(n,t){512&t[0]&&$(e,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`),512&t[0]&&z!==(z=n[66].name+"")&&w(r,z),512&t[0]&&W!==(W=n[66].count+"")&&w(l,W),512&t[0]&&S!==(S=n[21](n[66].id)+"")&&f.p(S),L===(L=E(n,t))&&A?A.p(n,t):(A.d(1),A=L(n),A&&(A.c(),A.m(b,null)))},d(n){n&&g(t),A.d()}}}function gn(n){let t,e,i,a,o,r,s,c,l,d,f,b,y,M,z,W,S=n[66].name+"",E=n[66].count+"",L=n[21](n[66].id)+"";function A(...t){return n[62](n[66],...t)}return{c(){t=u("div"),e=u("div"),i=v(),a=u("div"),o=u("span"),r=h(S),s=v(),c=u("span"),l=h(E),d=h(" stickers"),b=v(),y=u("div"),M=u("button"),M.textContent="Del",z=v(),x(e,"class","preview"),$(e,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`),f=new C(L,null),x(a,"class","info"),x(M,"class","button is-danger"),x(y,"class","action"),x(t,"class","pack"),W=k(M,"click",A)},m(n,g){m(n,t,g),p(t,e),p(t,i),p(t,a),p(a,o),p(o,r),p(a,s),p(a,c),p(c,l),p(c,d),f.m(c),p(t,b),p(t,y),p(y,M),p(t,z)},p(t,i){n=t,128&i[0]&&$(e,"background-image",`url(${n[15](n[66].id,n[66].files[0])})`),128&i[0]&&S!==(S=n[66].name+"")&&w(r,S),128&i[0]&&E!==(E=n[66].count+"")&&w(l,E),128&i[0]&&L!==(L=n[21](n[66].id)+"")&&f.p(L)},d(n){n&&g(t),W()}}}function fn(t){let e,a,o,r,s,c=t[2]&&K(t);return{c(){var n;e=u("main"),a=u("div"),o=u("div"),o.innerHTML='<img class="channel-textarea-stickers-content" src="https://discordapp.com/assets/a42df564f00ed8bbca652dc9345d3834.svg" alt="Magane menu button">',r=v(),c&&c.c(),x(o,"class","channel-textarea-emoji channel-textarea-stickers"),M(o,"active",t[2]),x(a,"id","magane"),$(a,"top",`${t[0].top}px`),$(a,"left",`${t[0].left}px`),$(a,"display",t[1]?"flex":"none"),s=[k(o,"click",t[49]),k(o,"contextmenu",b((n=t[50],function(t){return t.preventDefault(),n.call(this,t)})))]},m(n,t){m(n,e,t),p(e,a),p(a,o),p(a,r),c&&c.m(a,null)},p(n,t){4&t[0]&&M(o,"active",n[2]),n[2]?c?c.p(n,t):(c=K(n),c.c(),c.m(a,null)):c&&(c.d(1),c=null),1&t[0]&&$(a,"top",`${n[0].top}px`),1&t[0]&&$(a,"left",`${n[0].left}px`),2&t[0]&&$(a,"display",n[1]?"flex":"none")},i:n,o:n,d(n){n&&g(e),c&&c.d(),i(s)}}}J('/** Magane: main.scss **/\ndiv#magane {\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  position: absolute;\n  z-index: 99; }\n  div#magane button, div#magane input, div#magane select, div#magane label, div#magane span, div#magane p, div#magane a, div#magane li, div#magane ul, div#magane div {\n    font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;\n    color: var(--header-secondary);\n    font-weight: 400;\n    line-height: 1.5;\n    font-size: 16px;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    text-rendering: optimizeLegibility;\n    -webkit-text-size-adjust: 100%;\n    -moz-text-size-adjust: 100%;\n    -ms-text-size-adjust: 100%;\n    text-size-adjust: 100%; }\n  div#magane div.channel-textarea-stickers {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    filter: grayscale(100%);\n    transition: all 0.2s ease; }\n    div#magane div.channel-textarea-stickers:hover, div#magane div.channel-textarea-stickers.active {\n      transform: scale(1.15);\n      filter: grayscale(0%); }\n  div#magane img.channel-textarea-stickers-content {\n    width: 22px;\n    height: 22px; }\n  div#magane div.stickerWindow {\n    z-index: 2000;\n    width: 600px;\n    min-height: 200px;\n    right: 270px;\n    bottom: 82px;\n    position: fixed;\n    background: var(--background-secondary);\n    max-height: 600px;\n    overflow: hidden;\n    transition: all 0.2s ease;\n    border-radius: 4px; }\n    div#magane div.stickerWindow div.stickers {\n      overflow: auto;\n      height: 550px !important;\n      margin-bottom: 100px;\n      position: relative; }\n      div#magane div.stickerWindow div.stickers h3.getStarted {\n        text-align: center;\n        padding-top: 40%;\n        pointer-events: none; }\n      div#magane div.stickerWindow div.stickers div.pack {\n        float: left;\n        display: flex;\n        flex-flow: wrap;\n        justify-content: center;\n        padding: 25px;\n        width: 100%;\n        box-sizing: border-box; }\n        div#magane div.stickerWindow div.stickers div.pack span {\n          color: var(--header-secondary);\n          width: 100%;\n          cursor: auto;\n          padding-left: 10px;\n          margin: 10px 0px; }\n          div#magane div.stickerWindow div.stickers div.pack span .counts {\n            padding-left: 0; }\n          div#magane div.stickerWindow div.stickers div.pack span .counts span {\n            padding: 0 0.5em; }\n        div#magane div.stickerWindow div.stickers div.pack div.sticker {\n          display: flex;\n          align-items: center;\n          width: 100px;\n          height: 100px;\n          float: left;\n          position: relative; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker .image {\n            cursor: pointer;\n            width: 100px; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n            width: 20px;\n            height: 20px;\n            position: absolute;\n            right: 0;\n            transition: all 0.2s ease;\n            display: none;\n            z-index: 2; }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n              transform: scale(1.25); }\n              div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n                transition: all 0.2s ease; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite {\n            bottom: 0; }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path {\n              fill: #2ECC71; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n            top: 0px;\n            transform: rotateZ(45deg); }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n              transform: scale(1.25) rotateZ(45deg); }\n              div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n                fill: #F04747; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.addFavorite,\n          div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.deleteFavorite {\n            display: block;\n            cursor: pointer; }\n    div#magane div.stickerWindow > div.packs {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      height: 50px;\n      background: var(--background-tertiary); }\n      div#magane div.stickerWindow > div.packs div.pack {\n        display: block;\n        height: 40px;\n        width: 40px;\n        float: left;\n        margin-top: 5px;\n        margin-right: 10px;\n        cursor: pointer;\n        background-position: center;\n        background-size: cover;\n        background-repeat: no-repeat;\n        transition: all 0.2s ease;\n        filter: grayscale(100%); }\n        div#magane div.stickerWindow > div.packs div.pack:nth-of-type(1) {\n          margin-left: 10px; }\n        div#magane div.stickerWindow > div.packs div.pack:hover,\n        div#magane div.stickerWindow > div.packs div.pack div.pack.active {\n          transform: scale(1.25);\n          -webkit-transform: scale(1.25);\n          -webkit-filter: grayscale(0%);\n          filter: grayscale(0%); }\n        div#magane div.stickerWindow > div.packs div.pack > div {\n          background-image: url("/assets/f24711dae4f6d6b28335e866a93e9d9b.png");\n          width: 22px;\n          height: 22px;\n          background-size: 924px 704px;\n          background-repeat: no-repeat;\n          margin-top: 8px;\n          margin-left: 9px; }\n        div#magane div.stickerWindow > div.packs div.pack div.icon-favorite {\n          background-position: -462px -132px; }\n        div#magane div.stickerWindow > div.packs div.pack div.icon-plus {\n          background-position: -374px -484px;\n          -webkit-filter: invert(100%);\n          filter: invert(100%); }\n  div#magane .stickersModal {\n    z-index: 2001;\n    bottom: 0;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden; }\n    div#magane .stickersModal.is-active {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex; }\n    div#magane .stickersModal .inputQuery {\n      position: fixed;\n      z-index: 10;\n      width: 570px;\n      float: left;\n      display: flex;\n      height: 36px;\n      box-sizing: border-box;\n      margin: 0 15px 10px;\n      padding: 5px 12px;\n      border-radius: 3px;\n      border: 1px solid var(--background-secondary);\n      background: var(--background-secondary);\n      color: var(--header-secondary); }\n    div#magane .stickersModal .modal-background {\n      bottom: 0;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(10, 10, 10, 0.86); }\n    div#magane .stickersModal .modal-content,\n    div#magane .stickersModal .modal-card {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      background: var(--background-tertiary);\n      overflow: hidden; }\n    div#magane .stickersModal .modal-content .stickersConfig {\n      height: 100%;\n      width: 100%; }\n      div#magane .stickersModal .modal-content .stickersConfig .tabs {\n        height: 75px;\n        text-align: center; }\n        div#magane .stickersModal .modal-content .stickersConfig .tabs .tab {\n          color: var(--header-secondary);\n          display: inline-block;\n          border: none;\n          border-top: 0px transparent;\n          border-left: 0px transparent;\n          border-right: 0px transparent;\n          border-width: 1px;\n          border-style: solid;\n          border-bottom-color: var(--header-secondary);\n          padding: 20px;\n          cursor: pointer; }\n          div#magane .stickersModal .modal-content .stickersConfig .tabs .tab:hover, div#magane .stickersModal .modal-content .stickersConfig .tabs .tab.is-active {\n            border-bottom-color: var(--interactive-active);\n            color: var(--interactive-active); }\n      div#magane .stickersModal .modal-content .stickersConfig div.tabContent {\n        height: 525px !important;\n        overflow-y: auto; }\n      div#magane .stickersModal .modal-content .stickersConfig div.pack {\n        width: calc(100% - 20px);\n        float: left;\n        display: flex;\n        margin-left: 20px;\n        margin-bottom: 10px;\n        height: 75px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack:first-of-type {\n          margin-top: 46px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle,\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview,\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n          flex: none;\n          width: 75px;\n          height: 75px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n          background-position: center;\n          background-size: cover;\n          background-repeat: no-repeat; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle {\n          padding: 20px;\n          cursor: move;\n          padding-top: 30px; }\n          div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle span {\n            background: #555;\n            height: 2px;\n            width: 100%;\n            display: block;\n            margin-bottom: 6px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n          padding-top: 20px;\n          padding-left: 10px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.info {\n          flex: 1;\n          padding: 14px; }\n          div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span {\n            display: block;\n            width: 100%;\n            color: var(--header-secondary); }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span:nth-of-type(1) {\n              font-weight: bold;\n              color: var(--header-secondary); }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(1) {\n              padding: 0 0.5em; }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(2) {\n              user-select: text; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview img {\n          height: 100%;\n          width: 100%; }\n    div#magane .stickersModal .modal-close {\n      user-select: none;\n      -webkit-appearance: none;\n      background-color: rgba(10, 10, 10, 0.2);\n      border: none;\n      border-radius: 290486px;\n      cursor: pointer;\n      display: inline-block;\n      flex-grow: 0;\n      flex-shrink: 0;\n      font-size: 0;\n      outline: none;\n      vertical-align: top;\n      background: none;\n      position: absolute;\n      right: 20px;\n      top: 20px;\n      height: 32px;\n      max-height: 32px;\n      max-width: 32px;\n      min-height: 32px;\n      min-width: 32px;\n      width: 32px;\n      z-index: 1; }\n      div#magane .stickersModal .modal-close:before, div#magane .stickersModal .modal-close:after {\n        background-color: var(--header-secondary);\n        content: "";\n        display: block;\n        left: 50%;\n        position: absolute;\n        top: 50%;\n        transform: translateX(-50%) translateY(-50%) rotate(45deg);\n        transform-origin: center center; }\n      div#magane .stickersModal .modal-close:before {\n        height: 2px;\n        width: 50%; }\n      div#magane .stickersModal .modal-close:after {\n        height: 50%;\n        width: 2px; }\n      div#magane .stickersModal .modal-close:hover, div#magane .stickersModal .modal-close:focus {\n        background-color: rgba(10, 10, 10, 0.3); }\n  div#magane .button {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    align-items: center;\n    border: 1px solid transparent;\n    border-radius: 3px;\n    box-shadow: none;\n    display: inline-flex;\n    font-size: 1rem;\n    padding: calc(0.375em - 1px) 0.75em;\n    position: relative;\n    vertical-align: top;\n    user-select: none;\n    cursor: pointer;\n    justify-content: center;\n    text-align: center;\n    white-space: nowrap;\n    border-color: transparent;\n    color: var(--header-secondary);\n    background-color: var(--background-secondary); }\n    div#magane .button.is-danger {\n      color: #ffffff;\n      border-color: rgba(240, 71, 71, 0.3);\n      background: #f04747; }\n    div#magane .button:hover, div#magane .button.is-primary:hover {\n      transform: scale3d(1.1, 1.1, 1.1); }\n');const un="div[class^=textArea] div[aria-multiline][contenteditable]";function hn(n,t,e){var i;i={delay:250,easing:B},q.extend(R,i||{}),window.magane={};const a={top:0,left:0};let o=document.querySelector(un),r=!0,s=null,c="",l=!1,d=!1,p=0,m=[];const g={};let f=[],u=[],h=[],v=[];const k={};let b,x,w,y=!1,$=null,M=null,C=null;const z=(n,t="log")=>console[t]("%c[Magane]%c","color: #3a71c1; font-weight: 700","",n),W=(n,t)=>BdApi&&"function"==typeof BdApi.showToast?BdApi.showToast(n,t):t.nolog?void 0:(t.type&&["log","info","warn","error"].includes(t.type)||(t.type="log"),z(n,t.type)),E=(n,t={})=>(t.type="info",W(n,t)),A=(n,t={})=>(t.type="success",W(n,t)),I=(n,t={})=>(t.type="error",W(n,t)),T=(n,t={})=>(t.type="warn",W(n,t));var O;O=()=>{},S().$$.after_update.push(O);const F=()=>{setTimeout(()=>{const n=document.querySelector("[class^=channelTextArea] [class^=buttons]");if(!n)return void(r&&e(1,r=!1));r||e(1,r=!0);const t=n.getBoundingClientRect();e(0,a.top=s?t.top-21:t.top,a),e(0,a.left=t.left-100,a)},0)},N=()=>{let n;return new Promise(t=>{(n=()=>{if(o=document.querySelector(un),o)return t();setTimeout(n,500)})()})},_=async n=>{for(const t of n){if(!t.contentRect)return;if(F(),t.contentRect.width||t.contentRect.height)return;b.unobserve(o),await N(),b.observe(o),F()}},D=async(n=$.token)=>{if($.canCallAPI)return;if("string"!=typeof n)throw new Error("Not a token, buddy.");n=(n=n.replace(/"/gi,"")).replace(/^Bot\s*/i,"");const t=await fetch("https://discordapp.com/api/v7/gateway"),e=await t.json(),i=new WebSocket(`${e.url}/?encoding=json&v6`);await new Promise((t,e)=>{i.onerror=n=>e(n),i.onmessage=a=>{try{const e=JSON.parse(a.data);$.canCallAPI=!0,0===e.op&&"READY"===e.t&&i.close(),10===e.op&&i.send(JSON.stringify({op:2,d:{token:n,properties:{$browser:"b1nzy is a meme"},large_threshold:50}})),t()}catch(n){e(n)}}})},P=()=>{const n=document.createElement("iframe");n.id="localStorageIframe",$=document.body.appendChild(n).contentWindow.frames.localStorage},j=(n,t)=>{$.setItem(n,JSON.stringify(t))},U=async()=>{const n=await fetch("https://magane.moe/api/packs"),t=await n.json();c=t.baseURL;const i=$.getItem("magane.available");if(i)try{const n=JSON.parse(i),t=n.filter(n=>n.id.startsWith("startswith-")||n.id.startsWith("custom-"));n.length!==t.length&&j("magane.available",t),t.forEach(n=>{k[n.id]=n}),f.push(...t)}catch(n){console.error(n)}f.push(...t.packs),f=f,e(9,v=f);const a=$.getItem("magane.subscribed");if(a)try{e(7,u=JSON.parse(a));for(const n of u)h.push(n.id);u.forEach(n=>{(n.id.startsWith("startswith-")||n.id.startsWith("custom-"))&&(k[n.id]=n)})}catch(n){console.error(n)}const o=$.getItem("magane.favorites");if(o)try{e(5,m=JSON.parse(o).filter(n=>{if(g[n.pack])return!0;const t=f.findIndex(t=>t.id===n.pack);return 1!==t?(e(6,g[n.pack]={name:f[t].name},g),!0):void 0}))}catch(n){console.error(n)}},J=n=>{u.includes(n)||(e(7,u=[...u,n]),e(8,h=[...h,n.id]),j("magane.subscribed",u),z(`Subscribed to pack > ${n.name}`))},Y=n=>{if(u.includes(n)){for(let t=0;t<u.length;t++)u[t].id===n.id&&(u.splice(t,1),h.splice(t,1),e(7,u),e(8,h),z(`Unsubscribed from pack > ${n.name}`));j("magane.subscribed",u)}},X=(n,t)=>{let e;if(n.startsWith("startswith-")){const i="https://stickershop.line-scdn.net/stickershop/v1/sticker/%id%/android/sticker.png;compress=true";e="tab_on.png"===t?i.replace(/%id%/g,n.split("-")[1]):i.replace(/%id%/g,t.split(".")[0]),k[n].animated&&(e=e.replace("sticker.png","sticker_animation.png"))}else if(n.startsWith("custom-")){const i=k[n].template;if("tab_on.png"===t){const t=k[n].files[0];e=i.replace(/%pack%/g,n.split("-")[1]).replace(/%id%/g,t)}else e=i.replace(/%pack%/g,n.split("-")[1]).replace(/%id%/g,t)}else e=`${c}${n}/${t}`,"tab_on.png"!==t&&e.replace(".png","_key.png");return e},G=async(n,t,e=$.token)=>{if(y)return T("Sending sticker is still on cooldown…",{timeout:1e3});y=!0;try{W("Sending sticker…");const i=window.location.href.split("/").slice(-1)[0],a=X(n,t);z(`Fetching sticker from remote: ${a}`);const o=await fetch(a,{cache:"force-cache"}),r=await o.blob();let s=t;n.startsWith("startswith-")&&a.includes("sticker_animation.png")?(s=`${t.split(".")[0]}.gif`,T("Animated stickers from LINE Store currently cannot be animated!")):n.startsWith("custom-")&&(s=`${Date.now().toString().slice(-7)}.${t.split(".")[1]}`);const c=new FormData;c.append("file",r,s),z("Sending sticker…"),e=(e=e.replace(/"/gi,"")).replace(/^Bot\s*/i,""),await fetch(`https://discordapp.com/api/channels/${i}/messages`,{headers:{Authorization:e},method:"POST",body:c}),A("Sticker sent!")}catch(n){console.error(n),I("Unexpected error occurred when sending sticker. Check your console for details.")}y=!1},Q=(n,t)=>{for(const n of m)if(n.id===t)return I("You already have this sticker in your favorites.");if(!g[n]){const t=u.find(t=>t.id===n);e(6,g[n]={name:t&&t.name},g)}const i={pack:n,id:t};e(5,m=[...m,i]),j("magane.favorites",m),z(`Favorited sticker > ${t} of pack ${n}`),A("Added sticker to favorites.",{nolog:!0})},V=(n,t)=>{let i=!1;for(const n of m)n.id===t&&(i=!0);if(i){for(let n=0;n<m.length;n++)m[n].id===t&&(m.splice(n,1),e(5,m));m.some(t=>t.pack===n)||delete g[n],j("magane.favorites",m),z(`Unfavorited sticker > ${t} of pack ${n}`),E("Unfavorited sticker.",{nolog:!0})}},Z=()=>{const n="string"==typeof M&&M.trim().toLowerCase();e(9,v=n?f.filter(t=>t.name.toLowerCase().indexOf(n)>=0||t.id.indexOf(n)>=0):f)},K=(n,t)=>{const e=$.getItem("magane.available");if(e)try{const i=JSON.parse(e);if(i.findIndex(t=>t.id===n)>=0)throw new Error(`Pack with ID ${n} already exist`);return(n.startsWith("startswith-")||n.startsWith("custom-"))&&(k[n]=t),i.unshift(t),j("magane.available",i),f.unshift(t),f=f,Z(),z(`Added a new pack with ID ${n}`)}catch(n){throw n}};window.magane.appendPack=(n,t,e,i,a)=>{if(a)throw new Error("This function expects only 4 parameters. Were you looking for appendCustomPack()?");const o=`startswith-${t}`,r=[];for(let n=t;n<t+e;n+=1)r.push(`${n}.png`);return K(o,{name:n,count:e,id:o,animated:i?1:null,files:r})},window.magane.appendCustomPack=(n,t,e,i,a)=>{if(!a)throw new Error("Missing URL template.");const o=`custom-${t}`,r=[];for(let n=1;n<=e;n+=1)r.push(n+(i?".gif":".png"));return K(o,{name:n,count:e,id:o,animated:i?1:null,files:r,template:a})},window.magane.deletePack=n=>{if(!n&&!n.startsWith("startswith-")&&!n.startsWith("custom-"))throw new Error('Pack ID must start with either "startswith-" or "custom-".');const t=$.getItem("magane.available");if(t)try{const e=JSON.parse(t),i=e.findIndex(t=>t.id===n);if(-1===i)throw new Error(`Unable to find pack with ID ${n}`);const a=m.filter(t=>t.pack===n);a.length&&a.forEach(t=>V(n,t.id));const o=u.find(t=>t.id===n);o&&Y(o),e.splice(i,1),j("magane.available",e);const r=f.findIndex(t=>t.id===n);return-1!==r&&(f.splice(r,1),f=f,Z()),z(`Removed pack with ID ${n} (old index: ${i})`)}catch(n){throw n}},window.magane.searchPacks=n=>{if(!n)throw new Error("Keyword required");n=n.toLowerCase();const t=$.getItem("magane.available");if(t)try{return JSON.parse(t).filter(t=>t.name.toLowerCase().indexOf(n)>=0||t.id.indexOf(n)>=0)}catch(n){throw n}};!function(n){S().$$.on_mount.push(n)}(async()=>{try{z("Mounted on DOM"),E("Initializing Magane…"),P(),await D(),await U(),A("Magane initialized. You can start sending stickers now!"),b=new ResizeObserver(_),await N(),b.observe(o),F(),s=document.querySelector("html.platform-win")}catch(n){console.error(n),I("Unexpected error occurred when initializing Magane. Check your console for details.")}});const nn=n=>{const t=document.querySelector("#magane .stickerWindow");if(t){const{x:e,y:i,width:a,height:o}=t.getBoundingClientRect();document.querySelector("#magane img").isSameNode(n.target)||n.clientX<=e+a&&n.clientX>=e&&n.clientY<=i+o&&n.clientY>=i||tn()}},tn=()=>{x=null,e(2,l=!l),l?document.addEventListener("click",nn):document.removeEventListener("click",nn)},en=()=>{x=null,w=null,e(3,d=!d)},an=n=>{w=null,e(4,p=n)};return[a,r,l,d,p,m,g,u,h,v,M,C,U,J,Y,X,G,Q,V,Z,n=>`<span class="counts"><span>–</span>${n} sticker${1===n?"":"s"}</span>`,n=>{let t="";return n.startsWith("startswith-")?t=`LINE ${n.replace("startswith-","")}`:n.startsWith("custom-")&&(t=`Custom ${n.replace("custom-","")}`),t?`<span class="appendix"><span>–</span><span title="ID: ${n}">${t}</span></span>`:""},tn,en,an,o,s,c,f,k,y,$,b,x,w,z,W,E,A,I,T,F,N,_,D,P,j,K,nn,()=>tn(),()=>U(),n=>G(n.pack,n.id),n=>V(n.pack,n.id),(n,t)=>G(n.id,t),(n,t)=>Q(n.id,t),function(n){L[n?"unshift":"push"](()=>{e(11,C=n)})},()=>en(),()=>H({element:"#pfavorites",container:C}),n=>H({element:`#p${n.id}`,container:C}),()=>en(),()=>an(0),()=>an(1),n=>Y(n),function(){M=this.value,e(10,M)},n=>Y(n),n=>J(n)]}class vn extends class{$destroy(){!function(n,t){const e=n.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=n}$on(n,t){const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}$set(){}}{constructor(n){super(),j(this,n,hn,fn,o,{},[-1,-1,-1])}}const kn=()=>{console.log("[MAGANE] > checkDOM()");let n=document.getElementById("maganeContainer");if(n)return;const t=document.querySelector("[class*=baseLayer] > [class*=container] > [class*=base]");t?(console.log("[MAGANE] > DOM ready, injecting!"),n=document.createElement("div"),n.id="maganeContainer",t.insertAdjacentElement("afterbegin",n),new vn({target:n})):setTimeout(()=>kn(),500)};kn()}();
