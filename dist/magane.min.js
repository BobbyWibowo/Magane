!function(t){"use strict";function n(){}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}t=t&&t.hasOwnProperty("default")?t.default:t;const s="undefined"!=typeof window;let c=s?()=>window.performance.now():()=>Date.now(),l=s?t=>requestAnimationFrame(t):n;const d=new Set;function p(t){d.forEach(n=>{n.c(t)||(d.delete(n),n.f())}),0!==d.size&&l(p)}function m(t,n){t.appendChild(n)}function f(t,n,e){t.insertBefore(n,e||null)}function g(t){t.parentNode.removeChild(t)}function u(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function h(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function k(){return v(" ")}function b(){return v("")}function w(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function x(t){return function(n){return n.stopPropagation(),t.call(this,n)}}function y(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n){n=""+n,t.data!==n&&(t.data=n)}function M(t,n){(null!=n||t.value)&&(t.value=n)}function C(t,n,e,i){t.style.setProperty(n,e,i?"important":"")}function S(t,n,e){t.classList[e?"add":"remove"](n)}class z{constructor(t,n=null){this.e=h("div"),this.a=n,this.u(t)}m(t,n=null){for(let e=0;e<this.n.length;e+=1)f(t,this.n[e],n);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(g)}}let W;function E(t){W=t}function L(t){(function(){if(!W)throw new Error("Function called outside component initialization");return W})().$$.on_mount.push(t)}const N=[],T=[],O=[],A=[],F=Promise.resolve();let I=!1;function _(t){O.push(t)}function D(){const t=new Set;do{for(;N.length;){const t=N.shift();E(t),P(t.$$)}for(;T.length;)T.pop()();for(let n=0;n<O.length;n+=1){const e=O[n];t.has(e)||(e(),t.add(e))}O.length=0}while(N.length);for(;A.length;)A.pop()();I=!1}function P(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const j=new Set;let B;function q(){B={r:0,c:[],p:B}}function R(){B.r||o(B.c),B=B.p}function U(t,n){t&&t.i&&(j.delete(t),t.i(n))}function H(t,n,e,i){if(t&&t.o){if(j.has(t))return;j.add(t),B.c.push(()=>{j.delete(t),i&&(e&&t.d(1),i())}),t.o(n)}}function J(t){t&&t.c()}function Y(t,n,i){const{fragment:r,on_mount:s,on_destroy:c,after_update:l}=t.$$;r&&r.m(n,i),_(()=>{const n=s.map(e).filter(a);c?c.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(_)}function X(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function G(t,n){-1===t.$$.dirty[0]&&(N.push(t),I||(I=!0,F.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Q(t,e,a,r,s,c,l=[-1]){const d=W;E(t);const p=e.props||{},m=t.$$={fragment:null,ctx:null,props:c,update:n,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:l};let f=!1;m.ctx=a?a(t,p,(n,e,i=e)=>(m.ctx&&s(m.ctx[n],m.ctx[n]=i)&&(m.bound[n]&&m.bound[n](i),f&&G(t,n)),e)):[],m.update(),f=!0,o(m.before_update),m.fragment=!!r&&r(m.ctx),e.target&&(e.hydrate?m.fragment&&m.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):m.fragment&&m.fragment.c(),e.intro&&U(t.$$.fragment),Y(t,e.target,e.anchor),D()),E(d)}var V={$:t=>"string"==typeof t?document.querySelector(t):t,extend:(...t)=>Object.assign(...t),cumulativeOffset(t){let n=0,e=0;do{n+=t.offsetTop||0,e+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:n,left:e}},directScroll:t=>t&&t!==document&&t!==document.body,scrollTop(t,n){let e=void 0!==n;return this.directScroll(t)?e?t.scrollTop=n:t.scrollTop:e?document.documentElement.scrollTop=document.body.scrollTop=n:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(t,n){let e=void 0!==n;return this.directScroll(t)?e?t.scrollLeft=n:t.scrollLeft:e?document.documentElement.scrollLeft=document.body.scrollLeft=n:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const Z={container:"body",duration:500,delay:0,offset:0,easing:function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},onStart:n,onDone:n,onAborting:n,scrollX:!1,scrollY:!0},K=t=>{let{offset:n,duration:e,delay:i,easing:o,x:a=0,y:r=0,scrollX:s,scrollY:m,onStart:f,onDone:g,container:u,onAborting:h,element:v}=t;"function"==typeof n&&(n=n());var k=V.cumulativeOffset(u),b=v?V.cumulativeOffset(v):{top:r,left:a},w=V.scrollLeft(u),x=V.scrollTop(u),y=b.left-k.left+n,$=b.top-k.top+n,M=y-w,C=$-x;let S=!0,z=!1,W=c()+i,E=W+e;function L(t){t||(z=!0,f(v,{x:a,y:r}))}function N(t){!function(t,n,e){s&&V.scrollLeft(t,e),m&&V.scrollTop(t,n)}(u,x+C*t,w+M*t)}function T(){S=!1}return function(t){let n;0===d.size&&l(p),new Promise(e=>{d.add(n={c:t,f:e})})}(t=>{if(!z&&t>=W&&L(!1),z&&t>=E&&(N(1),T(),g(v,{x:a,y:r})),!S)return h(v,{x:a,y:r}),!1;if(z){N(0+1*o((t-W)/e))}return!0}),L(i),N(0),T},tt=t=>K((t=>{let n=V.extend({},Z,t);return n.container=V.$(n.container),n.element=V.$(n.element),n})(t));function nt(t,n){void 0===n&&(n={});var e=n.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===e&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}nt("/** Magane: global.css **/\n\n[data-simplebar] {\n\tposition: relative;\n\tflex-direction: column;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start;\n\talign-content: flex-start;\n\talign-items: flex-start;\n}\n\n.simplebar-wrapper {\n\toverflow: hidden;\n\twidth: inherit;\n\theight: inherit;\n\tmax-width: inherit;\n\tmax-height: inherit;\n}\n\n.simplebar-mask {\n\tdirection: inherit;\n\tposition: absolute;\n\toverflow: hidden;\n\tpadding: 0;\n\tmargin: 0;\n\tleft: 0;\n\ttop: 0;\n\tbottom: 0;\n\tright: 0;\n\twidth: auto !important;\n\theight: auto !important;\n\tz-index: 0;\n}\n\n.simplebar-offset {\n\tdirection: inherit !important;\n\tbox-sizing: inherit !important;\n\tresize: none !important;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n\tpadding: 0;\n\tmargin: 0;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.simplebar-content-wrapper {\n\tdirection: inherit;\n\tbox-sizing: border-box !important;\n\tposition: relative;\n\tdisplay: block;\n\theight: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */\n\twidth: auto;\n\tvisibility: visible;\n\tmax-width: 100%; /* Not required for horizontal scroll to trigger */\n\tmax-height: 100%; /* Needed for vertical scroll to trigger */\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n}\n\n.simplebar-content-wrapper::-webkit-scrollbar,\n.simplebar-hide-scrollbar::-webkit-scrollbar {\n\twidth: 0;\n\theight: 0;\n}\n\n.simplebar-content:before,\n.simplebar-content:after {\n\tcontent: ' ';\n\tdisplay: table;\n}\n\n.simplebar-placeholder {\n\tmax-height: 100%;\n\tmax-width: 100%;\n\twidth: 100%;\n\tpointer-events: none;\n}\n\n.simplebar-height-auto-observer-wrapper {\n\tbox-sizing: inherit !important;\n\theight: 100%;\n\twidth: 100%;\n\tmax-width: 1px;\n\tposition: relative;\n\tfloat: left;\n\tmax-height: 1px;\n\toverflow: hidden;\n\tz-index: -1;\n\tpadding: 0;\n\tmargin: 0;\n\tpointer-events: none;\n\tflex-grow: inherit;\n\tflex-shrink: 0;\n\tflex-basis: 0;\n}\n\n.simplebar-height-auto-observer {\n\tbox-sizing: inherit;\n\tdisplay: block;\n\topacity: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\theight: 1000%;\n\twidth: 1000%;\n\tmin-height: 1px;\n\tmin-width: 1px;\n\toverflow: hidden;\n\tpointer-events: none;\n\tz-index: -1;\n}\n\n.simplebar-track {\n\tz-index: 1;\n\tposition: absolute;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\toverflow: hidden;\n}\n\n[data-simplebar].simplebar-dragging .simplebar-content {\n\tpointer-events: none;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n[data-simplebar].simplebar-dragging .simplebar-track {\n\tpointer-events: all;\n}\n\n.simplebar-scrollbar {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tmin-height: 10px;\n}\n\n.simplebar-scrollbar:before {\n\tposition: absolute;\n\tcontent: '';\n\tbackground: #696080;\n\tborder-radius: 7px;\n\tleft: 2px;\n\tright: 2px;\n\topacity: 0;\n\ttransition: opacity 0.2s linear;\n}\n\n.simplebar-scrollbar.simplebar-visible:before {\n\t/* When hovered, remove all transitions from drag handle */\n\topacity: 0.5;\n\ttransition: opacity 0s linear;\n}\n\n.simplebar-track.simplebar-vertical {\n\ttop: 0;\n\twidth: 11px;\n}\n\n.simplebar-track.simplebar-vertical .simplebar-scrollbar:before {\n\ttop: 2px;\n\tbottom: 2px;\n}\n\n.simplebar-track.simplebar-horizontal {\n\tleft: 0;\n\theight: 11px;\n}\n\n.simplebar-track.simplebar-horizontal .simplebar-scrollbar:before {\n\theight: 100%;\n\tleft: 2px;\n\tright: 2px;\n}\n\n.simplebar-track.simplebar-horizontal .simplebar-scrollbar {\n\tright: auto;\n\tleft: 0;\n\ttop: 2px;\n\theight: 7px;\n\tmin-height: 0;\n\tmin-width: 10px;\n\twidth: auto;\n}\n\n/* Rtl support */\n[data-simplebar-direction='rtl'] .simplebar-track.simplebar-vertical {\n\tright: auto;\n\tleft: 0;\n}\n\n.hs-dummy-scrollbar-size {\n\tdirection: rtl;\n\tposition: fixed;\n\topacity: 0;\n\tvisibility: hidden;\n\theight: 500px;\n\twidth: 500px;\n\toverflow-y: hidden;\n\toverflow-x: scroll;\n}\n\n.simplebar-hide-scrollbar {\n\tposition: fixed;\n\tleft: 0;\n\tvisibility: hidden;\n\toverflow-y: scroll;\n\tscrollbar-width: none;\n\t-ms-overflow-style: none;\n}\n\niframe#localStorageIframe {\n\tdisplay: none;\n}\n");function et(t,n,e){const i=t.slice();return i[63]=n[e],i}function it(t,n,e){const i=t.slice();return i[63]=n[e],i}function ot(t,n,e){const i=t.slice();return i[63]=n[e],i[69]=e,i}function at(t,n,e){const i=t.slice();return i[71]=n[e],i[69]=e,i}function rt(t,n,e){const i=t.slice();return i[63]=n[e],i[69]=e,i}function st(t,n,e){const i=t.slice();return i[71]=n[e],i[69]=e,i}function ct(n){let e,i,o,a;const r=new t({props:{class:"stickers",style:"",$$slots:{default:[gt]},$$scope:{ctx:n}}}),s=new t({props:{class:"packs",style:"",$$slots:{default:[ht]},$$scope:{ctx:n}}});let c=n[3]&&vt(n);return{c(){e=h("div"),J(r.$$.fragment),i=k(),J(s.$$.fragment),o=k(),c&&c.c(),y(e,"class","stickerWindow")},m(t,n){f(t,e,n),Y(r,e,null),m(e,i),Y(s,e,null),m(e,o),c&&c.m(e,null),a=!0},p(t,n){const i={};224&n[0]|4096&n[2]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const o={};128&n[0]|4096&n[2]&&(o.$$scope={dirty:n,ctx:t}),s.$set(o),t[3]?c?(c.p(t,n),U(c,1)):(c=vt(t),c.c(),U(c,1),c.m(e,null)):c&&(q(),H(c,1,1,()=>{c=null}),R())},i(t){a||(U(r.$$.fragment,t),U(s.$$.fragment,t),U(c),a=!0)},o(t){H(r.$$.fragment,t),H(s.$$.fragment,t),H(c),a=!1},d(t){t&&g(e),X(r),X(s),c&&c.d()}}}function lt(t){let n;return{c(){n=h("h3"),n.textContent="It seems you aren't subscribed to any pack yet. Click the plus symbol on the bottom-left to get started! 🎉",y(n,"class","getStarted")},m(t,e){f(t,n,e)},d(t){t&&g(n)}}}function dt(t){let n,e,i,o,a,r=t[19](t[5].length)+"",s=t[5],c=[];for(let n=0;n<s.length;n+=1)c[n]=pt(st(t,s,n));return{c(){n=h("div"),e=h("span"),i=v("Favorites"),a=k();for(let t=0;t<c.length;t+=1)c[t].c();o=new z(r,null),y(e,"id","pfavorites"),y(n,"class","pack")},m(t,r){f(t,n,r),m(n,e),m(e,i),o.m(e),m(n,a);for(let t=0;t<c.length;t+=1)c[t].m(n,null)},p(t,e){if(32&e[0]&&r!==(r=t[19](t[5].length)+"")&&o.p(r),180320&e[0]){let i;for(s=t[5],i=0;i<s.length;i+=1){const o=st(t,s,i);c[i]?c[i].p(o,e):(c[i]=pt(o),c[i].c(),c[i].m(n,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=s.length}},d(t){t&&g(n),u(c,t)}}}function pt(t){let n,e,i,a,r,s,c,l,d;function p(...n){return t[49](t[71],...n)}function u(...n){return t[50](t[71],...n)}return{c(){n=h("div"),e=h("img"),s=k(),c=h("div"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',l=k(),y(e,"class","image"),e.src!==(i=`${t[14](t[71].pack,t[71].id)}`)&&y(e,"src",i),y(e,"alt",a=t[71].pack+" - "+t[71].id),y(e,"title",r=t[6][t[71].pack].name),y(c,"class","deleteFavorite"),y(c,"title","Unfavorite"),y(n,"class","sticker"),d=[w(e,"click",p),w(c,"click",u)]},m(t,i){f(t,n,i),m(n,e),m(n,s),m(n,c),m(n,l)},p(n,o){t=n,32&o[0]&&e.src!==(i=`${t[14](t[71].pack,t[71].id)}`)&&y(e,"src",i),32&o[0]&&a!==(a=t[71].pack+" - "+t[71].id)&&y(e,"alt",a),96&o[0]&&r!==(r=t[6][t[71].pack].name)&&y(e,"title",r)},d(t){t&&g(n),o(d)}}}function mt(t){let n,e,i,a,r,s,c;function l(...n){return t[51](t[63],t[71],...n)}function d(...n){return t[52](t[63],t[71],...n)}return{c(){n=h("div"),e=h("img"),r=k(),s=h("div"),s.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><path fill="grey" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>',y(e,"class","image"),e.src!==(i=`${t[14](t[63].id,t[71])}`)&&y(e,"src",i),y(e,"alt",a=t[63].id+" - "+t[71]),y(s,"class","addFavorite"),y(s,"title","Favorite"),y(n,"class","sticker"),c=[w(e,"click",l),w(s,"click",d)]},m(t,i){f(t,n,i),m(n,e),m(n,r),m(n,s)},p(n,o){t=n,128&o[0]&&e.src!==(i=`${t[14](t[63].id,t[71])}`)&&y(e,"src",i),128&o[0]&&a!==(a=t[63].id+" - "+t[71])&&y(e,"alt",a)},d(t){t&&g(n),o(c)}}}function ft(t){let n,e,i,o,a,r,s,c=t[63].name+"",l=t[19](t[63].files.length)+"",d=t[63].files,p=[];for(let n=0;n<d.length;n+=1)p[n]=mt(at(t,d,n));return{c(){n=h("div"),e=h("span"),i=v(c),r=k();for(let t=0;t<p.length;t+=1)p[t].c();s=k(),o=new z(l,null),y(e,"id",a="p"+t[63].id),y(n,"class","pack")},m(t,a){f(t,n,a),m(n,e),m(e,i),o.m(e),m(n,r);for(let t=0;t<p.length;t+=1)p[t].m(n,null);m(n,s)},p(t,r){if(128&r[0]&&c!==(c=t[63].name+"")&&$(i,c),128&r[0]&&l!==(l=t[19](t[63].files.length)+"")&&o.p(l),128&r[0]&&a!==(a="p"+t[63].id)&&y(e,"id",a),114816&r[0]){let e;for(d=t[63].files,e=0;e<d.length;e+=1){const i=at(t,d,e);p[e]?p[e].p(i,r):(p[e]=mt(i),p[e].c(),p[e].m(n,s))}for(;e<p.length;e+=1)p[e].d(1);p.length=d.length}},d(t){t&&g(n),u(p,t)}}}function gt(t){let n,e,i,o=!t[5]&&!t[7]&&lt(),a=t[5]&&t[5].length&&dt(t),r=t[7],s=[];for(let n=0;n<r.length;n+=1)s[n]=ft(rt(t,r,n));return{c(){o&&o.c(),n=k(),a&&a.c(),e=k();for(let t=0;t<s.length;t+=1)s[t].c();i=b()},m(t,r){o&&o.m(t,r),f(t,n,r),a&&a.m(t,r),f(t,e,r);for(let n=0;n<s.length;n+=1)s[n].m(t,r);f(t,i,r)},p(t,c){if(t[5]||t[7]?o&&(o.d(1),o=null):o||(o=lt(),o.c(),o.m(n.parentNode,n)),t[5]&&t[5].length?a?a.p(t,c):(a=dt(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),639104&c[0]){let n;for(r=t[7],n=0;n<r.length;n+=1){const e=rt(t,r,n);s[n]?s[n].p(e,c):(s[n]=ft(e),s[n].c(),s[n].m(i.parentNode,i))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},d(t){o&&o.d(t),t&&g(n),a&&a.d(t),t&&g(e),u(s,t),t&&g(i)}}}function ut(t){let n,e,i;function o(...n){return t[55](t[63],...n)}return{c(){n=h("div"),y(n,"class","pack"),y(n,"title",e=t[63].name),C(n,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`),i=w(n,"click",o)},m(t,e){f(t,n,e)},p(i,o){t=i,128&o[0]&&e!==(e=t[63].name)&&y(n,"title",e),128&o[0]&&C(n,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`)},d(t){t&&g(n),i()}}}function ht(t){let e,i,o,a,r,s=t[16]&&t[16].length&&function(t){let e,i;return{c(){e=h("div"),e.innerHTML='<div class="icon-favorite"></div>',y(e,"class","pack"),y(e,"title","Favorites"),i=w(e,"click",t[54])},m(t,n){f(t,e,n)},p:n,d(t){t&&g(e),i()}}}(t),c=t[7],l=[];for(let n=0;n<c.length;n+=1)l[n]=ut(ot(t,c,n));return{c(){e=h("div"),i=h("div"),i.innerHTML='<div class="icon-plus"></div>',o=k(),s&&s.c(),a=k();for(let t=0;t<l.length;t+=1)l[t].c();y(i,"class","pack"),y(i,"title","Manage subscribed packs"),y(e,"class","packs-wrapper"),r=w(i,"click",t[53])},m(t,n){f(t,e,n),m(e,i),m(e,o),s&&s.m(e,null),m(e,a);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,n){if(t[16]&&t[16].length&&s.p(t,n),16793728&n[0]){let i;for(c=t[7],i=0;i<c.length;i+=1){const o=ot(t,c,i);l[i]?l[i].p(o,n):(l[i]=ut(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=c.length}},d(t){t&&g(e),s&&s.d(),u(l,t),r()}}}function vt(t){let n,e,i,a,r,s,c,l,d,p,u,v,b,x;const $=[bt,kt],M=[];function C(t,n){return 0===t[4]?0:1===t[4]?1:-1}return~(u=C(t))&&(v=M[u]=$[u](t)),{c(){n=h("div"),e=h("div"),i=k(),a=h("div"),r=h("div"),s=h("div"),c=h("div"),c.textContent="Installed",l=k(),d=h("div"),d.textContent="Packs",p=k(),v&&v.c(),y(e,"class","modal-close"),y(c,"class","tab"),S(c,"is-active",0===t[4]),y(d,"class","tab"),S(d,"is-active",1===t[4]),y(s,"class","tabs"),y(r,"class","stickersConfig"),y(a,"class","modal-content"),y(n,"class","stickersModal"),x=[w(e,"click",t[56]),w(c,"click",t[57]),w(d,"click",t[58])]},m(t,o){f(t,n,o),m(n,e),m(n,i),m(n,a),m(a,r),m(r,s),m(s,c),m(s,l),m(s,d),m(r,p),~u&&M[u].m(r,null),b=!0},p(t,n){16&n[0]&&S(c,"is-active",0===t[4]),16&n[0]&&S(d,"is-active",1===t[4]);let e=u;u=C(t),u===e?~u&&M[u].p(t,n):(v&&(q(),H(M[e],1,1,()=>{M[e]=null}),R()),~u?(v=M[u],v||(v=M[u]=$[u](t),v.c()),U(v,1),v.m(r,null)):v=null)},i(t){b||(U(v),b=!0)},o(t){H(v),b=!1},d(t){t&&g(n),~u&&M[u].d(),o(x)}}}function kt(n){let e,i,a,r;const s=new t({props:{class:"tabContent",style:"",$$slots:{default:[$t]},$$scope:{ctx:n}}});return{c(){e=h("input"),i=k(),J(s.$$.fragment),y(e,"class","inputQuery"),y(e,"type","text"),y(e,"placeholder","Search"),r=[w(e,"keyup",n[18]),w(e,"input",n[60])]},m(t,o){f(t,e,o),M(e,n[10]),f(t,i,o),Y(s,t,o),a=!0},p(t,n){1024&n[0]&&e.value!==t[10]&&M(e,t[10]);const i={};768&n[0]|4096&n[2]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i)},i(t){a||(U(s.$$.fragment,t),a=!0)},o(t){H(s.$$.fragment,t),a=!1},d(t){t&&g(e),t&&g(i),X(s,t),o(r)}}}function bt(n){let e;const i=new t({props:{class:"tabContent",style:"",$$slots:{default:[Ct]},$$scope:{ctx:n}}});return{c(){J(i.$$.fragment)},m(t,n){Y(i,t,n),e=!0},p(t,n){const e={};128&n[0]|4096&n[2]&&(e.$$scope={dirty:n,ctx:t}),i.$set(e)},i(t){e||(U(i.$$.fragment,t),e=!0)},o(t){H(i.$$.fragment,t),e=!1},d(t){X(i,t)}}}function wt(t){let n,e;function i(...n){return t[62](t[63],...n)}return{c(){n=h("button"),n.textContent="Add",y(n,"class","button is-primary"),e=w(n,"click",i)},m(t,e){f(t,n,e)},p(n,e){t=n},d(t){t&&g(n),e()}}}function xt(t){let n,e;function i(...n){return t[61](t[63],...n)}return{c(){n=h("button"),n.textContent="Del",y(n,"class","button is-danger"),e=w(n,"click",i)},m(t,e){f(t,n,e)},p(n,e){t=n},d(t){t&&g(n),e()}}}function yt(t){let n,e,i,o,a,r,s,c,l,d,p,u,b,w,x,M=t[63].name+"",S=t[63].count+"",W=t[20](t[63].id)+"";function E(t,n){return(null==w||768&n[0])&&(w=!!t[8].includes(t[63].id)),w?xt:wt}let L=E(t,-1),N=L(t);return{c(){n=h("div"),e=h("div"),i=k(),o=h("div"),a=h("span"),r=v(M),s=k(),c=h("span"),l=v(S),d=v(" stickers"),u=k(),b=h("div"),N.c(),x=k(),y(e,"class","preview"),C(e,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`),p=new z(W,null),y(o,"class","info"),y(b,"class","action"),y(n,"class","pack")},m(t,g){f(t,n,g),m(n,e),m(n,i),m(n,o),m(o,a),m(a,r),m(o,s),m(o,c),m(c,l),m(c,d),p.m(c),m(n,u),m(n,b),N.m(b,null),m(n,x)},p(t,n){512&n[0]&&C(e,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`),512&n[0]&&M!==(M=t[63].name+"")&&$(r,M),512&n[0]&&S!==(S=t[63].count+"")&&$(l,S),512&n[0]&&W!==(W=t[20](t[63].id)+"")&&p.p(W),L===(L=E(t,n))&&N?N.p(t,n):(N.d(1),N=L(t),N&&(N.c(),N.m(b,null)))},d(t){t&&g(n),N.d()}}}function $t(t){let n,e=t[9],i=[];for(let n=0;n<e.length;n+=1)i[n]=yt(et(t,e,n));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=b()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);f(t,n,e)},p(t,o){if(1078016&o[0]){let a;for(e=t[9],a=0;a<e.length;a+=1){const r=et(t,e,a);i[a]?i[a].p(r,o):(i[a]=yt(r),i[a].c(),i[a].m(n.parentNode,n))}for(;a<i.length;a+=1)i[a].d(1);i.length=e.length}},d(t){u(i,t),t&&g(n)}}}function Mt(t){let n,e,i,o,a,r,s,c,l,d,p,u,b,x,M,S,W=t[63].name+"",E=t[63].count+"",L=t[20](t[63].id)+"";function N(...n){return t[59](t[63],...n)}return{c(){n=h("div"),e=h("div"),i=k(),o=h("div"),a=h("span"),r=v(W),s=k(),c=h("span"),l=v(E),d=v(" stickers"),u=k(),b=h("div"),x=h("button"),x.textContent="Del",M=k(),y(e,"class","preview"),C(e,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`),p=new z(L,null),y(o,"class","info"),y(x,"class","button is-danger"),y(b,"class","action"),y(n,"class","pack"),S=w(x,"click",N)},m(t,g){f(t,n,g),m(n,e),m(n,i),m(n,o),m(o,a),m(a,r),m(o,s),m(o,c),m(c,l),m(c,d),p.m(c),m(n,u),m(n,b),m(b,x),m(n,M)},p(n,i){t=n,128&i[0]&&C(e,"background-image",`url(${t[14](t[63].id,t[63].files[0])})`),128&i[0]&&W!==(W=t[63].name+"")&&$(r,W),128&i[0]&&E!==(E=t[63].count+"")&&$(l,E),128&i[0]&&L!==(L=t[20](t[63].id)+"")&&p.p(L)},d(t){t&&g(n),S()}}}function Ct(t){let n,e=t[7],i=[];for(let n=0;n<e.length;n+=1)i[n]=Mt(it(t,e,n));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=b()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);f(t,n,e)},p(t,o){if(1073280&o[0]){let a;for(e=t[7],a=0;a<e.length;a+=1){const r=it(t,e,a);i[a]?i[a].p(r,o):(i[a]=Mt(r),i[a].c(),i[a].m(n.parentNode,n))}for(;a<i.length;a+=1)i[a].d(1);i.length=e.length}},d(t){u(i,t),t&&g(n)}}}function St(t){let n,e,i,a,r,s,c=t[2]&&ct(t);return{c(){var o;n=h("main"),e=h("div"),i=h("div"),i.innerHTML='<img class="channel-textarea-stickers-content" src="https://discordapp.com/assets/a42df564f00ed8bbca652dc9345d3834.svg" alt="Magane menu button">',a=k(),c&&c.c(),y(i,"class","channel-textarea-emoji channel-textarea-stickers"),S(i,"active",t[2]),y(e,"id","magane"),C(e,"top",`${t[0].top}px`),C(e,"left",`${t[0].left}px`),C(e,"display",t[1]?"flex":"none"),s=[w(i,"click",t[47]),w(i,"contextmenu",x((o=t[48],function(t){return t.preventDefault(),o.call(this,t)})))]},m(t,o){f(t,n,o),m(n,e),m(e,i),m(e,a),c&&c.m(e,null),r=!0},p(t,n){4&n[0]&&S(i,"active",t[2]),t[2]?c?(c.p(t,n),U(c,1)):(c=ct(t),c.c(),U(c,1),c.m(e,null)):c&&(q(),H(c,1,1,()=>{c=null}),R()),(!r||1&n[0])&&C(e,"top",`${t[0].top}px`),(!r||1&n[0])&&C(e,"left",`${t[0].left}px`),(!r||2&n[0])&&C(e,"display",t[1]?"flex":"none")},i(t){r||(U(c),r=!0)},o(t){H(c),r=!1},d(t){t&&g(n),c&&c.d(),o(s)}}}nt('/** Magane: main.scss **/\ndiv#magane {\n  display: flex;\n  flex-direction: row;\n  height: 44px;\n  position: absolute;\n  z-index: 99; }\n  div#magane button, div#magane input, div#magane select, div#magane label, div#magane span, div#magane p, div#magane a, div#magane li, div#magane ul, div#magane div {\n    font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;\n    color: var(--header-secondary);\n    font-weight: 400;\n    line-height: 1.5;\n    font-size: 16px;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    text-rendering: optimizeLegibility;\n    -webkit-text-size-adjust: 100%;\n    -moz-text-size-adjust: 100%;\n    -ms-text-size-adjust: 100%;\n    text-size-adjust: 100%; }\n  div#magane div.channel-textarea-stickers {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    filter: grayscale(100%);\n    transition: all 0.2s ease; }\n    div#magane div.channel-textarea-stickers:hover, div#magane div.channel-textarea-stickers.active {\n      transform: scale(1.15);\n      filter: grayscale(0%); }\n  div#magane img.channel-textarea-stickers-content {\n    width: 22px;\n    height: 22px; }\n  div#magane div.stickerWindow {\n    z-index: 2000;\n    width: 600px;\n    min-height: 200px;\n    right: 270px;\n    bottom: 82px;\n    position: fixed;\n    background: var(--background-secondary);\n    max-height: 600px;\n    overflow: hidden;\n    transition: all 0.2s ease;\n    border-radius: 4px; }\n    div#magane div.stickerWindow div.stickers {\n      overflow: auto;\n      height: 550px !important;\n      margin-bottom: 100px;\n      position: relative; }\n      div#magane div.stickerWindow div.stickers h3.getStarted {\n        text-align: center;\n        padding-top: 40%;\n        pointer-events: none; }\n      div#magane div.stickerWindow div.stickers div.pack {\n        float: left;\n        display: flex;\n        flex-flow: wrap;\n        justify-content: center;\n        padding: 25px;\n        width: 100%;\n        box-sizing: border-box; }\n        div#magane div.stickerWindow div.stickers div.pack span {\n          color: var(--header-secondary);\n          width: 100%;\n          cursor: auto;\n          padding-left: 10px;\n          margin: 10px 0px; }\n          div#magane div.stickerWindow div.stickers div.pack span .counts {\n            padding-left: 0; }\n          div#magane div.stickerWindow div.stickers div.pack span .counts span {\n            padding: 0 0.5em; }\n        div#magane div.stickerWindow div.stickers div.pack div.sticker {\n          display: flex;\n          align-items: center;\n          width: 100px;\n          height: 100px;\n          float: left;\n          position: relative; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker .image {\n            cursor: pointer;\n            width: 100px; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n            width: 20px;\n            height: 20px;\n            position: absolute;\n            right: 0;\n            transition: all 0.2s ease;\n            display: none;\n            z-index: 2; }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n              transform: scale(1.25); }\n              div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path, div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n                transition: all 0.2s ease; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite {\n            bottom: 0; }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.addFavorite:hover svg path {\n              fill: #2ECC71; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite {\n            top: 0px;\n            transform: rotateZ(45deg); }\n            div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover {\n              transform: scale(1.25) rotateZ(45deg); }\n              div#magane div.stickerWindow div.stickers div.pack div.sticker div.deleteFavorite:hover svg path {\n                fill: #F04747; }\n          div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.addFavorite,\n          div#magane div.stickerWindow div.stickers div.pack div.sticker:hover div.deleteFavorite {\n            display: block;\n            cursor: pointer; }\n    div#magane div.stickerWindow > div.packs {\n      position: absolute;\n      bottom: 0;\n      width: 100%;\n      height: 50px;\n      background: var(--background-tertiary);\n      overflow: auto; }\n      div#magane div.stickerWindow > div.packs div.packs-wrapper {\n        white-space: nowrap;\n        float: left;\n        width: 100%; }\n      div#magane div.stickerWindow > div.packs div.pack {\n        display: inline-block;\n        height: 40px;\n        width: 40px;\n        margin: 5px;\n        cursor: pointer;\n        background-position: center;\n        background-size: cover;\n        background-repeat: no-repeat;\n        transition: all 0.2s ease;\n        filter: grayscale(100%); }\n        div#magane div.stickerWindow > div.packs div.pack:hover,\n        div#magane div.stickerWindow > div.packs div.pack div.pack.active {\n          transform: scale(1.25);\n          filter: grayscale(0%); }\n        div#magane div.stickerWindow > div.packs div.pack > div {\n          background-image: url("/assets/f24711dae4f6d6b28335e866a93e9d9b.png");\n          width: 22px;\n          height: 22px;\n          background-size: 924px 704px;\n          background-repeat: no-repeat;\n          margin-top: 8px;\n          margin-left: 9px; }\n        div#magane div.stickerWindow > div.packs div.pack div.icon-favorite {\n          background-position: -462px -132px; }\n        div#magane div.stickerWindow > div.packs div.pack div.icon-plus {\n          background-position: -374px -484px;\n          /* make it greenish */\n          filter: hue-rotate(260deg) brightness(3) contrast(4.5); }\n  div#magane .stickersModal {\n    z-index: 2001;\n    bottom: 0;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden; }\n    div#magane .stickersModal.is-active {\n      display: flex; }\n    div#magane .stickersModal .inputQuery {\n      width: calc(100% - 30px);\n      height: 36px;\n      box-sizing: border-box;\n      margin: 0 15px 10px;\n      padding: 5px 12px;\n      border-radius: 3px;\n      border: 1px solid var(--background-secondary);\n      background: var(--background-secondary);\n      color: var(--header-secondary); }\n    div#magane .stickersModal .modal-background {\n      bottom: 0;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(10, 10, 10, 0.86); }\n    div#magane .stickersModal .modal-content,\n    div#magane .stickersModal .modal-card {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      background: var(--background-tertiary);\n      overflow: hidden; }\n    div#magane .stickersModal .modal-content .stickersConfig {\n      height: 100%;\n      width: 100%;\n      display: flex;\n      flex-direction: column; }\n      div#magane .stickersModal .modal-content .stickersConfig .tabs {\n        height: 75px;\n        width: 100%;\n        text-align: center;\n        margin-bottom: 10px; }\n        div#magane .stickersModal .modal-content .stickersConfig .tabs .tab {\n          color: var(--header-secondary);\n          display: inline-block;\n          border: none;\n          border-top: 0px transparent;\n          border-left: 0px transparent;\n          border-right: 0px transparent;\n          border-width: 1px;\n          border-style: solid;\n          border-bottom-color: var(--header-secondary);\n          padding: 20px;\n          cursor: pointer; }\n          div#magane .stickersModal .modal-content .stickersConfig .tabs .tab:hover, div#magane .stickersModal .modal-content .stickersConfig .tabs .tab.is-active {\n            border-bottom-color: var(--interactive-active);\n            color: var(--interactive-active); }\n      div#magane .stickersModal .modal-content .stickersConfig div.tabContent {\n        height: 100%;\n        width: 100%;\n        overflow-y: auto; }\n      div#magane .stickersModal .modal-content .stickersConfig div.pack {\n        height: 75px;\n        width: 600px;\n        /* if not static, its width may flicker due to simplebar */\n        float: left;\n        display: flex;\n        padding: 0 20px;\n        box-sizing: border-box;\n        margin-bottom: 5px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack:last-of-type {\n          margin-bottom: 0; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle,\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview,\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n          flex: 0 0 auto;\n          width: 75px;\n          height: 75px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview {\n          background-position: center;\n          background-size: cover;\n          background-repeat: no-repeat; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle {\n          padding: 20px;\n          cursor: move;\n          padding-top: 30px; }\n          div#magane .stickersModal .modal-content .stickersConfig div.pack div.handle span {\n            background: #555;\n            height: 2px;\n            width: 100%;\n            display: block;\n            margin-bottom: 6px; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.action {\n          padding-top: 20px;\n          text-align: right; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.info {\n          flex: 1 1 auto;\n          padding: 14px; }\n          div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span {\n            display: block;\n            width: 100%;\n            color: var(--header-secondary); }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span:nth-of-type(1) {\n              font-weight: bold;\n              color: var(--header-secondary); }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(1) {\n              padding: 0 0.5em; }\n            div#magane .stickersModal .modal-content .stickersConfig div.pack div.info > span .appendix span:nth-of-type(2) {\n              user-select: text; }\n        div#magane .stickersModal .modal-content .stickersConfig div.pack div.preview img {\n          height: 100%;\n          width: 100%; }\n    div#magane .stickersModal .modal-close {\n      -moz-appearance: none;\n      -webkit-appearance: none;\n      user-select: none;\n      background-color: rgba(10, 10, 10, 0.2);\n      border: none;\n      border-radius: 290486px;\n      cursor: pointer;\n      display: inline-block;\n      flex-grow: 0;\n      flex-shrink: 0;\n      font-size: 0;\n      outline: none;\n      vertical-align: top;\n      background: none;\n      position: absolute;\n      right: 20px;\n      top: 20px;\n      height: 32px;\n      max-height: 32px;\n      max-width: 32px;\n      min-height: 32px;\n      min-width: 32px;\n      width: 32px;\n      z-index: 1; }\n      div#magane .stickersModal .modal-close:before, div#magane .stickersModal .modal-close:after {\n        background-color: var(--header-secondary);\n        content: "";\n        display: block;\n        left: 50%;\n        position: absolute;\n        top: 50%;\n        transform: translateX(-50%) translateY(-50%) rotate(45deg);\n        transform-origin: center center; }\n      div#magane .stickersModal .modal-close:before {\n        height: 2px;\n        width: 50%; }\n      div#magane .stickersModal .modal-close:after {\n        height: 50%;\n        width: 2px; }\n      div#magane .stickersModal .modal-close:hover, div#magane .stickersModal .modal-close:focus {\n        background-color: rgba(10, 10, 10, 0.3); }\n  div#magane .button {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    align-items: center;\n    border: 1px solid transparent;\n    border-radius: 3px;\n    box-shadow: none;\n    display: inline-flex;\n    font-size: 1rem;\n    padding: calc(0.375em - 1px) 0.75em;\n    position: relative;\n    vertical-align: top;\n    user-select: none;\n    cursor: pointer;\n    justify-content: center;\n    text-align: center;\n    white-space: nowrap;\n    border-color: transparent;\n    color: var(--header-secondary);\n    background-color: var(--background-secondary);\n    width: 62px;\n    /* consistent width */ }\n    div#magane .button.is-danger {\n      color: #ffffff;\n      border-color: rgba(240, 71, 71, 0.3);\n      background: #f04747; }\n    div#magane .button:hover, div#magane .button.is-primary:hover {\n      transform: scale3d(1.1, 1.1, 1.1); }\n');const zt="div[class^=textArea] div[aria-multiline][contenteditable]";function Wt(t,n,e){window.magane={};const i={top:0,left:0};let o=document.querySelector(zt),a=!0,r=null,s="",c=!1,l=!1,d=0,p=[];const m={};let f=[],g=[],u=[],h=[];const v={};let k,b=!1,w=null,x=null;const y=(t,n="log")=>console[n]("%c[Magane]%c","color: #3a71c1; font-weight: 700","",t),$=(t,n)=>"object"==typeof BdApi&&"function"==typeof BdApi.showToast?BdApi.showToast(t,n):n.nolog?void 0:(n.type&&["log","info","warn","error"].includes(n.type)||(n.type="log"),y(t,n.type)),M=(t,n={})=>(n.type="info",$(t,n)),C=(t,n={})=>(n.type="success",$(t,n)),S=(t,n={})=>(n.type="error",$(t,n)),z=(t,n={})=>(n.type="warn",$(t,n)),W=()=>{setTimeout(()=>{const t=document.querySelector("[class^=channelTextArea] [class^=buttons]");if(!t)return void(a&&e(1,a=!1));a||e(1,a=!0);const n=t.getBoundingClientRect();e(0,i.top=r?n.top-21:n.top,i),e(0,i.left=n.left-100,i)},0)},E=()=>{let t;return new Promise(n=>{(t=()=>{if(o=document.querySelector(zt),o)return n();setTimeout(t,500)})()})},N=async t=>{for(const n of t){if(!n.contentRect)return;if(W(),n.contentRect.width||n.contentRect.height)return;k.unobserve(o),await E(),k.observe(o),W()}},T=async(t=w.token)=>{if(w.canCallAPI)return;if("string"!=typeof t)throw new Error("Not a token, buddy.");t=(t=t.replace(/"/gi,"")).replace(/^Bot\s*/i,"");const n=await fetch("https://discordapp.com/api/v7/gateway"),e=await n.json(),i=new WebSocket(`${e.url}/?encoding=json&v6`);await new Promise((n,e)=>{i.onerror=t=>e(t),i.onmessage=o=>{try{const e=JSON.parse(o.data);w.canCallAPI=!0,0===e.op&&"READY"===e.t&&i.close(),10===e.op&&i.send(JSON.stringify({op:2,d:{token:t,properties:{$browser:"b1nzy is a meme"},large_threshold:50}})),n()}catch(t){e(t)}}})},O=()=>{const t=document.createElement("iframe");t.id="localStorageIframe",w=document.body.appendChild(t).contentWindow.frames.localStorage},A=(t,n)=>{w.setItem(t,JSON.stringify(n))},F=async()=>{const t=await fetch("https://magane.moe/api/packs"),n=await t.json();s=n.baseURL;const i=w.getItem("magane.available");if(i)try{const t=JSON.parse(i),n=t.filter(t=>t.id.startsWith("startswith-")||t.id.startsWith("custom-"));t.length!==n.length&&A("magane.available",n),n.forEach(t=>{v[t.id]=t}),f.push(...n)}catch(t){console.error(t)}f.push(...n.packs),f=f,e(9,h=f);const o=w.getItem("magane.subscribed");if(o)try{e(7,g=JSON.parse(o));for(const t of g)u.push(t.id);g.forEach(t=>{(t.id.startsWith("startswith-")||t.id.startsWith("custom-"))&&(v[t.id]=t)})}catch(t){console.error(t)}const a=w.getItem("magane.favorites");if(a)try{e(5,p=JSON.parse(a).filter(t=>{if(m[t.pack])return!0;const n=f.findIndex(n=>n.id===t.pack);return 1!==n?(e(6,m[t.pack]={name:f[n].name},m),!0):void 0}))}catch(t){console.error(t)}},I=t=>{g.includes(t)||(e(7,g=[...g,t]),e(8,u=[...u,t.id]),A("magane.subscribed",g),y(`Subscribed to pack > ${t.name}`))},_=t=>{if(g.includes(t)){for(let n=0;n<g.length;n++)g[n].id===t.id&&(g.splice(n,1),u.splice(n,1),e(7,g),e(8,u),y(`Unsubscribed from pack > ${t.name}`));A("magane.subscribed",g)}},D=(t,n)=>{let e;if(t.startsWith("startswith-")){const i="https://stickershop.line-scdn.net/stickershop/v1/sticker/%id%/android/sticker.png;compress=true";e="tab_on.png"===n?i.replace(/%id%/g,t.split("-")[1]):i.replace(/%id%/g,n.split(".")[0]),v[t].animated&&(e=e.replace("sticker.png","sticker_animation.png"))}else if(t.startsWith("custom-")){const i=v[t].template;if("tab_on.png"===n){const n=v[t].files[0];e=i.replace(/%pack%/g,t.split("-")[1]).replace(/%id%/g,n)}else e=i.replace(/%pack%/g,t.split("-")[1]).replace(/%id%/g,n)}else e=`${s}${t}/${n}`,"tab_on.png"!==n&&e.replace(".png","_key.png");return e},P=async(t,n,e=w.token)=>{if(b)return z("Sending sticker is still on cooldown…",{timeout:1e3});b=!0;try{$("Sending…");const i=window.location.href.split("/").slice(-1)[0],o=D(t,n);y(`Fetching sticker from remote: ${o}`);const a=await fetch(o,{cache:"force-cache"}),r=await a.blob();let s=n;t.startsWith("startswith-")&&o.includes("sticker_animation.png")?(s=`${n.split(".")[0]}.gif`,z("Animated stickers from LINE Store currently cannot be animated!")):t.startsWith("custom-")&&(s=`${Date.now().toString().slice(-7)}.${n.split(".")[1]}`);const c=new FormData;c.append("file",r,s),y("Sending…"),e=(e=e.replace(/"/gi,"")).replace(/^Bot\s*/i,""),await fetch(`https://discordapp.com/api/channels/${i}/messages`,{headers:{Authorization:e},method:"POST",body:c}),C("Sent!")}catch(t){console.error(t),S("Unexpected error occurred when sending sticker. Check your console for details.")}b=!1},j=(t,n)=>{for(const t of p)if(t.id===n)return S("This sticker is already in your favorites.");if(!m[t]){const n=g.find(n=>n.id===t);e(6,m[t]={name:n&&n.name},m)}const i={pack:t,id:n};e(5,p=[...p,i]),A("magane.favorites",p),y(`Favorited sticker > ${n} of pack ${t}`),C("Favorited!",{nolog:!0})},B=(t,n)=>{let i=!1;for(const t of p)t.id===n&&(i=!0);if(i){for(let t=0;t<p.length;t++)p[t].id===n&&(p.splice(t,1),e(5,p));p.some(n=>n.pack===t)||delete m[t],A("magane.favorites",p),y(`Unfavorited sticker > ${n} of pack ${t}`),M("Unfavorited!",{nolog:!0})}},q=()=>{const t="string"==typeof x&&x.trim().toLowerCase();e(9,h=t?f.filter(n=>n.name.toLowerCase().indexOf(t)>=0||n.id.indexOf(t)>=0):f)},R=(t,n)=>{const e=w.getItem("magane.available");if(e)try{const i=JSON.parse(e);if(i.findIndex(n=>n.id===t)>=0)throw new Error(`Pack with ID ${t} already exist`);return(t.startsWith("startswith-")||t.startsWith("custom-"))&&(v[t]=n),i.unshift(n),A("magane.available",i),f.unshift(n),f=f,q(),y(`Added a new pack with ID ${t}`)}catch(t){throw t}};window.magane.appendPack=(t,n,e,i,o)=>{if(o)throw new Error("This function expects only 4 parameters. Were you looking for appendCustomPack()?");const a=`startswith-${n}`,r=[];for(let t=n;t<n+e;t+=1)r.push(`${t}.png`);return R(a,{name:t,count:e,id:a,animated:i?1:null,files:r})},window.magane.appendCustomPack=(t,n,e,i,o)=>{if(!o)throw new Error("Missing URL template.");const a=`custom-${n}`,r=[];for(let t=1;t<=e;t+=1)r.push(t+(i?".gif":".png"));return R(a,{name:t,count:e,id:a,animated:i?1:null,files:r,template:o})},window.magane.deletePack=t=>{if(!t&&!t.startsWith("startswith-")&&!t.startsWith("custom-"))throw new Error('Pack ID must start with either "startswith-" or "custom-".');const n=w.getItem("magane.available");if(n)try{const e=JSON.parse(n),i=e.findIndex(n=>n.id===t);if(-1===i)throw new Error(`Unable to find pack with ID ${t}`);const o=p.filter(n=>n.pack===t);o.length&&o.forEach(n=>B(t,n.id));const a=g.find(n=>n.id===t);a&&_(a),e.splice(i,1),A("magane.available",e);const r=f.findIndex(n=>n.id===t);return-1!==r&&(f.splice(r,1),f=f,q()),y(`Removed pack with ID ${t} (old index: ${i})`)}catch(t){throw t}},window.magane.searchPacks=t=>{if(!t)throw new Error("Keyword required");t=t.toLowerCase();const n=w.getItem("magane.available");if(n)try{return JSON.parse(n).filter(n=>n.name.toLowerCase().indexOf(t)>=0||n.id.indexOf(t)>=0)}catch(t){throw t}};L(async()=>{try{y("Mounted on DOM"),O(),await T(),await F(),C("Magane initialized!"),k=new ResizeObserver(N),await E(),k.observe(o),W(),r=document.querySelector("html.platform-win")}catch(t){console.error(t),S("Unexpected error occurred when initializing Magane. Check your console for details.")}});const U=t=>{const n=document.querySelector("#magane .stickerWindow");if(n){const{x:e,y:i,width:o,height:a}=n.getBoundingClientRect();document.querySelector("#magane img").isSameNode(t.target)||t.clientX<=e+o&&t.clientX>=e&&t.clientY<=i+a&&t.clientY>=i||H()}},H=()=>{e(2,c=!c),c?document.addEventListener("click",U):document.removeEventListener("click",U)},J=()=>{e(3,l=!l)},Y=t=>{e(4,d=t)},X=t=>{tt({element:t,container:document.querySelector("#magane .stickers .simplebar-content-wrapper")})};return[i,a,c,l,d,p,m,g,u,h,x,F,I,_,D,P,j,B,q,t=>`<span class="counts"><span>–</span>${t} sticker${1===t?"":"s"}</span>`,t=>{let n="";return t.startsWith("startswith-")?n=`LINE ${t.replace("startswith-","")}`:t.startsWith("custom-")&&(n=`Custom ${t.replace("custom-","")}`),n?`<span class="appendix"><span>–</span><span title="ID: ${t}">${n}</span></span>`:""},H,J,Y,X,o,r,s,f,v,b,w,k,y,$,M,C,S,z,W,E,N,T,O,A,R,U,()=>H(),()=>F(),t=>P(t.pack,t.id),t=>B(t.pack,t.id),(t,n)=>P(t.id,n),(t,n)=>j(t.id,n),()=>J(),()=>X("#pfavorites"),t=>X(`#p${t.id}`),()=>J(),()=>Y(0),()=>Y(1),t=>_(t),function(){x=this.value,e(10,x)},t=>_(t),t=>I(t)]}class Et extends class{$destroy(){X(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}{constructor(t){super(),Q(this,t,Wt,St,r,{},[-1,-1,-1])}}const Lt=()=>{console.log("[MAGANE] > checkDOM()");let t=document.getElementById("maganeContainer");if(t)return;const n=document.querySelector("[class*=baseLayer] > [class*=container] > [class*=base]");n?(console.log("[MAGANE] > DOM ready, injecting!"),t=document.createElement("div"),t.id="maganeContainer",n.insertAdjacentElement("afterbegin",t),new Et({target:t})):setTimeout(()=>Lt(),500)};Lt()}(SimpleBar);
